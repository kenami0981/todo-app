"use strict";(self.webpackChunkTODO_APP=self.webpackChunkTODO_APP||[]).push([[179],{2011:(ut,Ae,k)=>{k.d(Ae,{hO:()=>qe,xv:()=>ce,Dh:()=>he,GT:()=>ge,cc:()=>Se,on:()=>H,pX:()=>X});var p=k(5e3),Y=k(127),O=k(5813);ut=k.hmd(ut);const le=["ngOnDestroy"],X=(be,rt,Ze,Ce={})=>new Proxy(be,{get:(_e,Ee)=>Ze.runOutsideAngular(()=>{var Ge;if(be[Ee])return(null===(Ge=null==Ce?void 0:Ce.spy)||void 0===Ge?void 0:Ge.get)&&Ce.spy.get(Ee,be[Ee]),be[Ee];if(le.indexOf(Ee)>-1)return()=>{};const je=rt.toPromise().then(ne=>{const W=ne&&ne[Ee];return"function"==typeof W?W.bind(ne):W&&W.then?W.then(ie=>Ze.run(()=>ie)):Ze.run(()=>W)});return new Proxy(()=>{},{get:(ne,W)=>je[W],apply:(ne,W,ie)=>je.then(me=>{var se;const Ne=me&&me(...ie);return(null===(se=null==Ce?void 0:Ce.spy)||void 0===se?void 0:se.apply)&&Ce.spy.apply(Ee,ie,Ne),Ne})})})}),ge=(be,rt)=>{rt.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Ce))})})};class re{constructor(rt){return rt}}const he=new p.OlP("angularfire2.app.options"),ce=new p.OlP("angularfire2.app.name");function H(be,rt,Ze){const _e="object"==typeof Ze&&Ze||{};_e.name=_e.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ge=Y.Z.apps.filter(je=>je&&je.name===_e.name)[0]||rt.runOutsideAngular(()=>Y.Z.initializeApp(be,_e));try{JSON.stringify(be)!==JSON.stringify(Ge.options)&&$("error",`${Ge.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new re(Ge)}const $=(be,...rt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...rt)},J={provide:re,useFactory:H,deps:[he,p.R0b,[new p.FiY,ce]]};let qe=(()=>{class be{constructor(Ze){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",p.q4F.full,Ze.toString())}static initializeApp(Ze,Ce){return{ngModule:be,providers:[{provide:he,useValue:Ze},{provide:ce,useValue:Ce}]}}}return be.\u0275fac=function(Ze){return new(Ze||be)(p.LFG(p.Lbi))},be.\u0275mod=p.oAB({type:be}),be.\u0275inj=p.cJS({providers:[J]}),be})();function Se(be,rt,Ze,Ce,_e){const[,Ee,Ge]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===be)||[];if(Ee)return function Oe(be,rt){try{return be.toString()===rt.toString()}catch(Ze){return be===rt}}(_e,Ge)||(fe("error",`${rt} was already initialized on the ${Ze} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:Ge})),Ee;{const je=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,je,_e]),je}}const Le=!!ut.hot,fe=(be,...rt)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[be](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,Ae,k)=>{k.d(Ae,{q4:()=>Sl,iC:()=>Ol,HU:()=>Mu,vb:()=>Kc,JM:()=>eo});var p=k(5e3),Y=k(5867),O=k(5861),le=k(9681),X=k(2090),ge=k(4859),re=k(1877);const he="@firebase/installations",$="w:0.5.8",J="FIS_v2",be=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(I){return I instanceof X.ZR&&I.code.includes("request-failed")}function Ze({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ce(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function _e(I,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(I,C){const L=(yield C.json()).error;return be.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function je(I,{refreshToken:C}){const R=Ge(I);return R.append("Authorization",function me(I){return`${J} ${I}`}(C)),R}function ne(I){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function se(I,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:R}){const L=Ze(I),K=Ge(I),ee=C.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&K.append("x-firebase-client",It)}const Re={method:"POST",headers:K,body:JSON.stringify({fid:R,authVersion:J,appId:I.appId,sdkVersion:$})},Xe=yield ne(()=>fetch(L,Re));if(Xe.ok){const It=yield Xe.json();return{fid:It.fid||R,registrationStatus:2,refreshToken:It.refreshToken,authToken:Ce(It.authToken)}}throw yield _e("Create Installation",Xe)})).apply(this,arguments)}function ue(I){return new Promise(C=>{setTimeout(C,I)})}const Xt=/^[cdef][\w-]{21}$/;function lt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function _t(I){return function Tt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(R)?R:""}catch(I){return""}}function cn(I){return`${I.appName}!${I.appId}`}const dn=new Map;function xi(I,C){const R=cn(I);en(R,C),function qt(I,C){const R=function oi(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=I=>{en(I.data.key,I.data.fid)}),ur}();R&&R.postMessage({key:I,fid:C}),function Ns(){0===dn.size&&ur&&(ur.close(),ur=null)}()}(R,C)}function en(I,C){const R=dn.get(I);if(R)for(const L of R)L(C)}let ur=null;const Pr="firebase-installations-store";let os=null;function as(){return os||(os=(0,X.X3)("firebase-installations-database",1,(I,C)=>{0===C&&I.createObjectStore(Pr)})),os}function ct(I,C){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*(I,C){const R=cn(I),K=(yield as()).transaction(Pr,"readwrite"),ee=K.objectStore(Pr),xe=yield ee.get(R);return yield ee.put(C,R),yield K.complete,(!xe||xe.fid!==C.fid)&&xi(I,C.fid),C})).apply(this,arguments)}function er(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(I){const C=cn(I),L=(yield as()).transaction(Pr,"readwrite");yield L.objectStore(Pr).delete(C),yield L.complete})).apply(this,arguments)}function ai(I,C){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(I,C){const R=cn(I),K=(yield as()).transaction(Pr,"readwrite"),ee=K.objectStore(Pr),xe=yield ee.get(R),Re=C(xe);return void 0===Re?yield ee.delete(R):yield ee.put(Re,R),yield K.complete,Re&&(!xe||xe.fid!==Re.fid)&&xi(I,Re.fid),Re})).apply(this,arguments)}function En(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(I){let C;const R=yield ai(I.appConfig,L=>{const K=Os(L),ee=Ia(I,K);return C=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield C}:{installationEntry:R,registrationPromise:C}})).apply(this,arguments)}function Os(I){return Gt(I||{fid:lt(),registrationStatus:0})}function Ia(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(be.create("app-offline"))};const R={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function zt(I,C){return ot.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:bt(I)}:{installationEntry:C}}function ot(){return(ot=(0,O.Z)(function*(I,C){try{const R=yield se(I,C);return ct(I.appConfig,R)}catch(R){throw rt(R)&&409===R.customData.serverCode?yield er(I.appConfig):yield ct(I.appConfig,{fid:C.fid,registrationStatus:0}),R}})).apply(this,arguments)}function bt(I){return lr.apply(this,arguments)}function lr(){return(lr=(0,O.Z)(function*(I){let C=yield Ki(I.appConfig);for(;1===C.registrationStatus;)yield ue(100),C=yield Ki(I.appConfig);if(0===C.registrationStatus){const{installationEntry:R,registrationPromise:L}=yield En(I);return L||R}return C})).apply(this,arguments)}function Ki(I){return ai(I,C=>{if(!C)throw be.create("installation-not-found");return Gt(C)})}function Gt(I){return function ho(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function yr(I,C){return cr.apply(this,arguments)}function cr(){return(cr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:C},R){const L=dt(I,R),K=je(I,R),ee=C.getImmediate({optional:!0});if(ee){const It=yield ee.getHeartbeatsHeader();It&&K.append("x-firebase-client",It)}const Re={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:$,appId:I.appId}})},Xe=yield ne(()=>fetch(L,Re));if(Xe.ok)return Ce(yield Xe.json());throw yield _e("Generate Auth Token",Xe)})).apply(this,arguments)}function dt(I,{fid:C}){return`${Ze(I)}/${C}/authTokens:generate`}function _r(I){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I,C=!1){let R;const L=yield ai(I.appConfig,ee=>{if(!Bt(ee))throw be.create("not-registered");const xe=ee.authToken;if(!C&&j(xe))return ee;if(1===xe.requestStatus)return R=Ye(I,C),ee;{if(!navigator.onLine)throw be.create("app-offline");const Re=q(ee);return R=ht(I,Re),Re}});return R?yield R:L.authToken})).apply(this,arguments)}function Ye(I,C){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(I,C){let R=yield et(I.appConfig);for(;1===R.authToken.requestStatus;)yield ue(100),R=yield et(I.appConfig);const L=R.authToken;return 0===L.requestStatus?_r(I,C):L})).apply(this,arguments)}function et(I){return ai(I,C=>{if(!Bt(C))throw be.create("not-registered");return function de(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function ht(I,C){return $t.apply(this,arguments)}function $t(){return($t=(0,O.Z)(function*(I,C){try{const R=yield yr(I,C),L=Object.assign(Object.assign({},C),{authToken:R});return yield ct(I.appConfig,L),R}catch(R){if(!rt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ct(I.appConfig,L)}else yield er(I.appConfig);throw R}})).apply(this,arguments)}function Bt(I){return void 0!==I&&2===I.registrationStatus}function j(I){return 2===I.requestStatus&&!function V(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function q(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function Ve(){return(Ve=(0,O.Z)(function*(I){const C=I,{installationEntry:R,registrationPromise:L}=yield En(C);return L?L.catch(console.error):_r(C).catch(console.error),R.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*(I,C=!1){const R=I;return yield vr(R),(yield _r(R,C)).token})).apply(this,arguments)}function vr(I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,O.Z)(function*(I){const{registrationPromise:C}=yield En(I);C&&(yield C)})).apply(this,arguments)}function Kn(I){return be.create("missing-app-config-values",{valueName:I})}const Ta="installations",ke=I=>{const C=I.getProvider("app").getImmediate(),R=function us(I){if(!I||!I.options)throw Kn("App Configuration");if(!I.name)throw Kn("App Name");const C=["projectId","apiKey","appId"];for(const R of C)if(!I.options[R])throw Kn(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:R,heartbeatServiceProvider:(0,le._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=I=>{const C=I.getProvider("app").getImmediate(),R=(0,le._getProvider)(C,Ta).getImmediate();return{getId:()=>function Q(I){return Ve.apply(this,arguments)}(R),getToken:K=>function vt(I){return Yt.apply(this,arguments)}(R,K)}};(function pn(){(0,le._registerComponent)(new ge.wA(Ta,ke,"PUBLIC")),(0,le._registerComponent)(new ge.wA("installations-internal",Ft,"PRIVATE"))})(),(0,le.registerVersion)(he,"0.5.8"),(0,le.registerVersion)(he,"0.5.8","esm2017");const dr="@firebase/remote-config",Nn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bh{constructor(C,R,L,K){this.client=C,this.storage=R,this.storageCache=L,this.logger=K}isCachedDataFresh(C,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-R,K=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var R=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(K&&R.isCachedDataFresh(C.cacheMaxAgeMillis,L))return K;C.eTag=K&&K.eTag;const ee=yield R.client.fetch(C),xe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&xe.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(xe),ee})()}}function Sc(I=navigator){return I.languages&&I.languages[0]||I.language}class lu{constructor(C,R,L,K,ee,xe){this.firebaseInstallations=C,this.sdkVersion=R,this.namespace=L,this.projectId=K,this.apiKey=ee,this.appId=xe}fetch(C){var R=this;return(0,O.Z)(function*(){const[L,K]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Re={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Xe={sdk_version:R.sdkVersion,app_instance_id:L,app_instance_id_token:K,app_id:R.appId,language_code:Sc()},It={method:"POST",headers:Re,body:JSON.stringify(Xe)},kt=fetch(xe,It),St=new Promise((yi,ji)=>{C.signal.addEventListener(()=>{const Mo=new Error("The operation was aborted.");Mo.name="AbortError",ji(Mo)})});let $n;try{yield Promise.race([kt,St]),$n=yield kt}catch(yi){let ji="fetch-client-network";throw"AbortError"===yi.name&&(ji="fetch-timeout"),Nn.create(ji,{originalErrorMessage:yi.message})}let Sn=$n.status;const ia=$n.headers.get("ETag")||void 0;let So,Vr;if(200===$n.status){let yi;try{yi=yield $n.json()}catch(ji){throw Nn.create("fetch-client-parse",{originalErrorMessage:ji.message})}So=yi.entries,Vr=yi.state}if("INSTANCE_STATE_UNSPECIFIED"===Vr?Sn=500:"NO_CHANGE"===Vr?Sn=304:("NO_TEMPLATE"===Vr||"EMPTY_CONFIG"===Vr)&&(So={}),304!==Sn&&200!==Sn)throw Nn.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:ia,config:So}})()}}class Pp{constructor(C,R){this.client=C,this.storage=R}fetch(C){var R=this;return(0,O.Z)(function*(){const L=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:R,backoffCount:L}){var K=this;return(0,O.Z)(function*(){yield function Un(I,C){return new Promise((R,L)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(R,K);I.addEventListener(()=>{clearTimeout(ee),L(Nn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,R);try{const ee=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Mc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ee))throw ee;const xe={throttleEndTimeMillis:Date.now()+(0,X.$s)(L),backoffCount:L+1};return yield K.storage.setThrottleMetadata(xe),K.attemptFetch(C,xe)}})()}}class rl{constructor(C,R,L,K,ee){this.app=C,this._client=R,this._storageCache=L,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function il(I,C){const R=I.target.error||void 0;return Nn.create(C,{originalErrorMessage:R&&R.message})}const Vs="app_namespace_store";class Bp{constructor(C,R,L,K=function Vp(){return new Promise((I,C)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=L=>{C(il(L,"storage-open"))},R.onsuccess=L=>{I(L.target.result)},R.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Vs,{keyPath:"compositeKey"})}}catch(R){C(Nn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=C,this.appName=R,this.namespace=L,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const Re=L.transaction([Vs],"readonly").objectStore(Vs),Xe=R.createCompositeKey(C);try{const It=Re.get(Xe);It.onerror=kt=>{ee(il(kt,"storage-get"))},It.onsuccess=kt=>{const St=kt.target.result;K(St?St.value:void 0)}}catch(It){ee(Nn.create("storage-get",{originalErrorMessage:It&&It.message}))}})})()}set(C,R){var L=this;return(0,O.Z)(function*(){const K=yield L.openDbPromise;return new Promise((ee,xe)=>{const Xe=K.transaction([Vs],"readwrite").objectStore(Vs),It=L.createCompositeKey(C);try{const kt=Xe.put({compositeKey:It,value:R});kt.onerror=St=>{xe(il(St,"storage-set"))},kt.onsuccess=()=>{ee()}}catch(kt){xe(Nn.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(C){var R=this;return(0,O.Z)(function*(){const L=yield R.openDbPromise;return new Promise((K,ee)=>{const Re=L.transaction([Vs],"readwrite").objectStore(Vs),Xe=R.createCompositeKey(C);try{const It=Re.delete(Xe);It.onerror=kt=>{ee(il(kt,"storage-delete"))},It.onsuccess=()=>{K()}}catch(It){ee(Nn.create("storage-delete",{originalErrorMessage:It&&It.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Rc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const R=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),ee=yield R;ee&&(C.lastFetchStatus=ee);const xe=yield L;xe&&(C.lastSuccessfulFetchTimestampMillis=xe);const Re=yield K;Re&&(C.activeConfig=Re)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function go(){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Go(){(0,le._registerComponent)(new ge.wA("remote-config",function I(C,{instanceIdentifier:R}){const L=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Nn.create("registration-window");if(!(0,X.hl)())throw Nn.create("indexed-db-unavailable");const{projectId:ee,apiKey:xe,appId:Re}=L.options;if(!ee)throw Nn.create("registration-project-id");if(!xe)throw Nn.create("registration-api-key");if(!Re)throw Nn.create("registration-app-id");const Xe=new Bp(Re,L.name,R=R||"firebase"),It=new Rc(Xe),kt=new re.Yd(dr);kt.logLevel=re.in.ERROR;const St=new lu(K,le.SDK_VERSION,R,ee,xe,Re),$n=new Pp(St,Xe),Sn=new bh($n,Xe,It,kt),ia=new rl(L,Sn,It,Xe,kt);return function Ri(I){const C=(0,X.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ia),ia},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(dr,"0.3.7"),(0,le.registerVersion)(dr,"0.3.7","esm2017")}();const sl="/firebase-messaging-sw.js",Bs="/firebase-cloud-messaging-push-scope",Kr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mo="google.c.a.c_id",Sa="google.c.a.c_l",Nc="google.c.a.ts",Up="google.c.a.e";var Us=(()=>{return(I=Us||(Us={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Us;var I})();function ci(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function du(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(R),K=new Uint8Array(L.length);for(let ee=0;ee<L.length;++ee)K[ee]=L.charCodeAt(ee);return K}const hu="fcm_token_details_db",fr="fcm_token_object_Store";function Ih(I){return fu.apply(this,arguments)}function fu(){return fu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(hu))return null;let C=null;return(yield(0,X.X3)(hu,5,function(){var L=(0,O.Z)(function*(K,ee,xe,Re){var Xe;if(ee<2||!K.objectStoreNames.contains(fr))return;const It=Re.objectStore(fr),kt=yield It.index("fcmSenderId").get(I);if(yield It.clear(),kt)if(2===ee){const St=kt;if(!St.auth||!St.p256dh||!St.endpoint)return;C={token:St.fcmToken,createTime:null!==(Xe=St.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:ci(St.vapidKey)}}}else if(3===ee){const St=kt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ci(St.auth),p256dh:ci(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ci(St.vapidKey)}}}else if(4===ee){const St=kt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ci(St.auth),p256dh:ci(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ci(St.vapidKey)}}}});return function(K,ee,xe,Re){return L.apply(this,arguments)}}())).close(),yield(0,X.Lj)(hu),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Oc(C)?C:null}),fu.apply(this,arguments)}function Oc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const hs="firebase-messaging-store";let Ma=null;function ol(){return Ma||(Ma=(0,X.X3)("firebase-messaging-database",1,(I,C)=>{0===C&&I.createObjectStore(hs)})),Ma}function _n(I){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(I){const C=_o(I),L=yield(yield ol()).transaction(hs).objectStore(hs).get(C);if(L)return L;{const K=yield Ih(I.appConfig.senderId);if(K)return yield js(I,K),K}})).apply(this,arguments)}function js(I,C){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(I,C){const R=_o(I),K=(yield ol()).transaction(hs,"readwrite");return yield K.objectStore(hs).put(C,R),yield K.complete,C})).apply(this,arguments)}function kc(I){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(I){const C=_o(I),L=(yield ol()).transaction(hs,"readwrite");yield L.objectStore(hs).delete(C),yield L.complete})).apply(this,arguments)}function _o({appConfig:I}){return I.appId}const On=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function xa(I,C){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(I,C){const R=yield $s(I),L=ft(C),K={method:"POST",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(Zr(I.appConfig),K)).json()}catch(xe){throw On.create("token-subscribe-failed",{errorInfo:xe})}if(ee.error)throw On.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw On.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function br(I,C){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*(I,C){const R=yield $s(I),L=ft(C.subscriptionOptions),K={method:"PATCH",headers:R,body:JSON.stringify(L)};let ee;try{ee=yield(yield fetch(`${Zr(I.appConfig)}/${C.token}`,K)).json()}catch(xe){throw On.create("token-update-failed",{errorInfo:xe})}if(ee.error)throw On.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw On.create("token-update-no-token");return ee.token})).apply(this,arguments)}function fs(I,C){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(I,C){const L={method:"DELETE",headers:yield $s(I)};try{const ee=yield(yield fetch(`${Zr(I.appConfig)}/${C}`,L)).json();if(ee.error)throw On.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw On.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Zr({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function $s(I){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*({appConfig:I,installations:C}){const R=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ft({p256dh:I,auth:C,endpoint:R,vapidKey:L}){const K={web:{endpoint:R,auth:C,p256dh:I}};return L!==Kr&&(K.web.applicationPubKey=L),K}const yu=6048e5;function Ra(I){return _u.apply(this,arguments)}function _u(){return(_u=(0,O.Z)(function*(I){const C=yield ll(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:ci(C.getKey("auth")),p256dh:ci(C.getKey("p256dh"))},L=yield _n(I.firebaseDependencies);if(L){if(Wo(L.subscriptionOptions,R))return Date.now()>=L.createTime+yu?al(I,{token:L.token,createTime:Date.now(),subscriptionOptions:R}):L.token;try{yield fs(I.firebaseDependencies,L.token)}catch(K){console.warn(K)}return De(I.firebaseDependencies,R)}return De(I.firebaseDependencies,R)})).apply(this,arguments)}function vu(I){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(I){const C=yield _n(I.firebaseDependencies);C&&(yield fs(I.firebaseDependencies,C.token),yield kc(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function al(I,C){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(I,C){try{const R=yield br(I.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:R,createTime:Date.now()});return yield js(I.firebaseDependencies,L),R}catch(R){throw yield vu(I),R}})).apply(this,arguments)}function De(I,C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(I,C){const L={token:yield xa(I,C),createTime:Date.now(),subscriptionOptions:C};return yield js(I,L),L.token})).apply(this,arguments)}function ll(I,C){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:du(C)})})).apply(this,arguments)}function Wo(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function Ko(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Yr(I,C){if(!C.notification)return;I.notification={};const R=C.notification.title;R&&(I.notification.title=R);const L=C.notification.body;L&&(I.notification.body=L);const K=C.notification.image;K&&(I.notification.image=K)}(C,I),function cl(I,C){!C.data||(I.data=C.data)}(C,I),function dl(I,C){if(!C.fcmOptions)return;I.fcmOptions={};const R=C.fcmOptions.link;R&&(I.fcmOptions.link=R);const L=C.fcmOptions.analytics_label;L&&(I.fcmOptions.analyticsLabel=L)}(C,I),C}function Pc(I){return"object"==typeof I&&!!I&&mo in I}function hl(I,C){const R=[];for(let L=0;L<I.length;L++)R.push(I.charAt(L)),L<C.length&&R.push(C.charAt(L));return R.join("")}function qs(I){return On.create("missing-app-config-values",{valueName:I})}hl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pr{constructor(C,R,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function wu(I){if(!I||!I.options)throw qs("App Configuration Object");if(!I.name)throw qs("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const L of C)if(!R[L])throw qs(L);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:R,analyticsProvider:L}}_delete(){return Promise.resolve()}}function di(I){return bu.apply(this,arguments)}function bu(){return(bu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(sl,{scope:Bs}),I.swRegistration.update().catch(()=>{})}catch(C){throw On.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function zs(I,C){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield di(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function fl(I,C){return Du.apply(this,arguments)}function Du(){return(Du=(0,O.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=Kr)})).apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(I,C){if(!navigator)throw On.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw On.create("permission-blocked");return yield fl(I,null==C?void 0:C.vapidKey),yield zs(I,null==C?void 0:C.serviceWorkerRegistration),Ra(I)})).apply(this,arguments)}function Na(I,C,R){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(I,C,R){const L=gl(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:R[mo],message_name:R[Sa],message_time:R[Nc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gl(I){switch(I){case Us.NOTIFICATION_CLICKED:return"notification_open";case Us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fc(){return(Fc=(0,O.Z)(function*(I,C){const R=C.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Us.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ko(R)):I.onMessageHandler.next(Ko(R)));const L=R.data;Pc(L)&&"1"===L[Up]&&(yield Na(I,R.messageType,L))})).apply(this,arguments)}const yl="@firebase/messaging",Lc=I=>{const C=new pr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function ml(I,C){return Fc.apply(this,arguments)}(C,R)),C},Eo=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:L=>function Iu(I,C){return pl.apply(this,arguments)}(C,L)}};function Bc(){return wo.apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vc(){(0,le._registerComponent)(new ge.wA("messaging",Lc,"PUBLIC")),(0,le._registerComponent)(new ge.wA("messaging-internal",Eo,"PRIVATE")),(0,le.registerVersion)(yl,"0.9.12"),(0,le.registerVersion)(yl,"0.9.12","esm2017")}();const vl="analytics",sy="firebase_id",Oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cu="https://www.googletagmanager.com/gtag/js",jn=new re.Yd("@firebase/analytics");function Uc(I){return Promise.all(I.map(C=>C.catch(R=>R)))}function jp(I,C){const R=document.createElement("script");R.src=`${Cu}?l=${I}&id=${C}`,R.async=!0,document.head.appendChild(R)}function Yo(I,C,R,L,K,ee){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(I,C,R,L,K,ee){const xe=L[K];try{if(xe)yield C[xe];else{const Xe=(yield Uc(R)).find(It=>It.measurementId===K);Xe&&(yield C[Xe.appId])}}catch(Re){jn.error(Re)}I("config",K,ee)})).apply(this,arguments)}function wl(I,C,R,L,K){return bo.apply(this,arguments)}function bo(){return(bo=(0,O.Z)(function*(I,C,R,L,K){try{let ee=[];if(K&&K.send_to){let xe=K.send_to;Array.isArray(xe)||(xe=[xe]);const Re=yield Uc(R);for(const Xe of xe){const It=Re.find(St=>St.measurementId===Xe),kt=It&&C[It.appId];if(!kt){ee=[];break}ee.push(kt)}}0===ee.length&&(ee=Object.values(C)),yield Promise.all(ee),I("event",L,K||{})}catch(ee){jn.error(ee)}})).apply(this,arguments)}function Hp(){const I=window.document.getElementsByTagName("script");for(const C of Object.values(I))if(C.src&&C.src.includes(Cu))return C;return null}const Pn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fr=new class Qr{constructor(C={},R=1e3){this.throttleMetadata=C,this.intervalMillis=R}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,R){this.throttleMetadata[C]=R}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Qo(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function $c(I){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(I){var C;const{appId:R,apiKey:L}=I,K={method:"GET",headers:Qo(L)},ee=Oa.replace("{app-id}",R),xe=yield fetch(ee,K);if(200!==xe.status&&304!==xe.status){let Re="";try{const Xe=yield xe.json();(null===(C=Xe.error)||void 0===C?void 0:C.message)&&(Re=Xe.error.message)}catch(Xe){}throw Pn.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Re})}return xe.json()})).apply(this,arguments)}function Ah(I){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,O.Z)(function*(I,C=Fr,R){const{appId:L,apiKey:K,measurementId:ee}=I.options;if(!L)throw Pn.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:L};throw Pn.create("no-api-key")}const xe=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Re=new bl;return setTimeout((0,O.Z)(function*(){Re.abort()}),void 0!==R?R:6e4),Tu({appId:L,apiKey:K,measurementId:ee},xe,Re,C)})).apply(this,arguments)}function Tu(I,C,R){return hi.apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:R},L,K=Fr){const{appId:ee,measurementId:xe}=I;try{yield Lt(L,C)}catch(Re){if(xe)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Re.message}]`),{appId:ee,measurementId:xe};throw Re}try{const Re=yield $c(I);return K.deleteThrottleMetadata(ee),Re}catch(Re){if(!Gc(Re)){if(K.deleteThrottleMetadata(ee),xe)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Re.message}]`),{appId:ee,measurementId:xe};throw Re}const Xe=503===Number(Re.customData.httpStatus)?(0,X.$s)(R,K.intervalMillis,30):(0,X.$s)(R,K.intervalMillis),It={throttleEndTimeMillis:Date.now()+Xe,backoffCount:R+1};return K.setThrottleMetadata(ee,It),jn.debug(`Calling attemptFetch again in ${Xe} millis`),Tu(I,It,L,K)}})).apply(this,arguments)}function Lt(I,C){return new Promise((R,L)=>{const K=Math.max(C-Date.now(),0),ee=setTimeout(R,K);I.addEventListener(()=>{clearTimeout(ee),L(Pn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Gc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class bl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Dl(){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(){if(!(0,X.hl)())return jn.warn(Pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(I){return jn.warn(Pn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ms(){return(ms=(0,O.Z)(function*(I,C,R,L,K,ee,xe){var Re;const Xe=Ah(I);Xe.then(Sn=>{R[Sn.measurementId]=Sn.appId,I.options.measurementId&&Sn.measurementId!==I.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>jn.error(Sn)),C.push(Xe);const It=Dl().then(Sn=>{if(Sn)return L.getId()}),[kt,St]=yield Promise.all([Xe,It]);Hp()||jp(ee,kt.measurementId),K("js",new Date);const $n=null!==(Re=null==xe?void 0:xe.config)&&void 0!==Re?Re:{};return $n.origin="firebase",$n.update=!0,null!=St&&($n[sy]=St),K("config",kt.measurementId,$n),kt.measurementId})).apply(this,arguments)}class Jo{constructor(C){this.app=C}_delete(){return delete fi[this.app.options.appId],Promise.resolve()}}let fi={},Zs=[];const pi={};let Ys,Qi,Yi="dataLayer",Cl=!1;function Li(I,C,R){!function Io(){const I=[];if((0,X.ru)()&&I.push("This is a browser extension environment."),(0,X.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((L,K)=>`(${K+1}) ${L}`).join(" "),R=Pn.create("invalid-analytics-context",{errorInfo:C});jn.warn(R.message)}}();const L=I.options.appId;if(!L)throw Pn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Pn.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fi[L])throw Pn.create("already-exists",{id:L});if(!Cl){!function gs(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(Yi);const{wrappedGtag:ee,gtagCore:xe}=function Th(I,C,R,L,K){let ee=function(...xe){window[L].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function Hc(I,C,R,L){function ee(){return(ee=(0,O.Z)(function*(xe,Re,Xe){try{"event"===xe?yield wl(I,C,R,Re,Xe):"config"===xe?yield Yo(I,C,R,L,Re,Xe):I("set",Re)}catch(It){jn.error(It)}})).apply(this,arguments)}return function K(xe,Re,Xe){return ee.apply(this,arguments)}}(ee,I,C,R),{gtagCore:ee,wrappedGtag:window[K]}}(fi,Zs,pi,Yi,"gtag");Qi=ee,Ys=xe,Cl=!0}return fi[L]=function Hn(I,C,R,L,K,ee,xe){return ms.apply(this,arguments)}(I,Zs,pi,C,Ys,Yi,R),new Jo(I)}function ea(){return(ea=(0,O.Z)(function*(I,C,R,L,K){if(K&&K.global)I("event",R,L);else{const ee=yield C;I("event",R,Object.assign(Object.assign({},L),{send_to:ee}))}})).apply(this,arguments)}function Dn(){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}const Js="@firebase/analytics";!function zp(){(0,le._registerComponent)(new ge.wA(vl,(C,{options:R})=>Li(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,le._registerComponent)(new ge.wA("analytics-internal",function I(C){try{const R=C.getProvider(vl).getImmediate();return{logEvent:(L,K,ee)=>function qp(I,C,R,L){I=(0,X.m9)(I),function Xo(I,C,R,L,K){return ea.apply(this,arguments)}(Qi,fi[I.app.options.appId],C,R,L).catch(K=>jn.error(K))}(R,L,K,ee)}}catch(R){throw Pn.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,le.registerVersion)(Js,"0.7.8"),(0,le.registerVersion)(Js,"0.7.8","esm2017")}();var Xs=k(4408),Au=k(7565);const Tl=new class In extends Au.v{}(class _s extends Xs.o{constructor(C,R){super(C,R),this.scheduler=C,this.work=R}schedule(C,R=0){return R>0?super.schedule(C,R):(this.delay=R,this.state=C,this.scheduler.flush(this),this)}execute(C,R){return R>0||this.closed?super.execute(C,R):this._execute(C,R)}requestAsyncId(C,R,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,R,L):C.flush(this)}});var Wp=k(4986),Al=k(8505),Cr=k(9468),gi=k(5363);const Sl=new p.GfV("7.3.0"),vs="__angularfire_symbol__analyticsIsSupportedValue",Ui="__angularfire_symbol__analyticsIsSupported",Xi="__angularfire_symbol__remoteConfigIsSupportedValue",ka="__angularfire_symbol__remoteConfigIsSupported",Ml="__angularfire_symbol__messagingIsSupportedValue",xl="__angularfire_symbol__messagingIsSupported";function eo(I,C,R){if(C){if(1===C.length)return C[0];const ee=C.filter(xe=>xe.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ui]||(globalThis[Ui]=Dn().then(I=>globalThis[vs]=I).catch(()=>globalThis[vs]=!1)),globalThis[xl]||(globalThis[xl]=Bc().then(I=>globalThis[Ml]=I).catch(()=>globalThis[Ml]=!1)),globalThis[ka]||(globalThis[ka]=go().then(I=>globalThis[Xi]=I).catch(()=>globalThis[Xi]=!1));const Kc=(I,C)=>{const R=C?[C]:(0,Y.C6)(),L=[];return R.forEach(K=>{K.container.getProvider(I).instances.forEach(xe=>{L.includes(xe)||L.push(xe)})}),L};function To(){}class Su{constructor(C,R=Tl){this.zone=C,this.delegate=R}now(){return this.delegate.now()}schedule(C,R,L){const K=this.zone;return this.delegate.schedule(function(xe){K.runGuarded(()=>{C.apply(this,[xe])})},R,L)}}class es{constructor(C){this.zone=C,this.task=null}call(C,R){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",To,{},To,To)),R.pipe((0,Al.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mu=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Su(Zone.current)),this.insideAngular=R.run(()=>new Su(Zone.current,Wp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ts(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Ol(I){return ts(),function Ao(I){return function(R){return(R=R.lift(new es(I.ngZone))).pipe((0,Cr.R)(I.outsideAngular),(0,gi.Q)(I.insideAngular))}}(ts())(I)}},2090:(ut,Ae,k)=>{k.d(Ae,{BH:()=>Se,LL:()=>Tt,ZR:()=>ue,zI:()=>me,US:()=>re,tV:()=>H,L:()=>ce,$s:()=>ho,r3:()=>en,Sg:()=>Oe,ne:()=>ct,vZ:()=>Ns,ZB:()=>J,Lj:()=>$t,pd:()=>os,m9:()=>dt,z$:()=>Le,jU:()=>rt,ru:()=>Ze,d:()=>_e,xb:()=>ur,w1:()=>Ee,hl:()=>W,uI:()=>fe,UG:()=>be,b$:()=>Ce,G6:()=>ne,Mn:()=>Ge,X3:()=>ht,xO:()=>Wi,zd:()=>Pr,eu:()=>ie});var p=k(5861);const X=function(j){const V=[];let q=0;for(let de=0;de<j.length;de++){let Q=j.charCodeAt(de);Q<128?V[q++]=Q:Q<2048?(V[q++]=Q>>6|192,V[q++]=63&Q|128):55296==(64512&Q)&&de+1<j.length&&56320==(64512&j.charCodeAt(de+1))?(Q=65536+((1023&Q)<<10)+(1023&j.charCodeAt(++de)),V[q++]=Q>>18|240,V[q++]=Q>>12&63|128,V[q++]=Q>>6&63|128,V[q++]=63&Q|128):(V[q++]=Q>>12|224,V[q++]=Q>>6&63|128,V[q++]=63&Q|128)}return V},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Q=0;Q<j.length;Q+=3){const Ve=j[Q],vt=Q+1<j.length,Yt=vt?j[Q+1]:0,vr=Q+2<j.length,Wt=vr?j[Q+2]:0;let fn=(15&Yt)<<2|Wt>>6,nr=63&Wt;vr||(nr=64,vt||(fn=64)),de.push(q[Ve>>2],q[(3&Ve)<<4|Yt>>4],q[fn],q[nr])}return de.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(X(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,de=0;for(;q<j.length;){const Q=j[q++];if(Q<128)V[de++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ve=j[q++];V[de++]=String.fromCharCode((31&Q)<<6|63&Ve)}else if(Q>239&&Q<365){const vr=((7&Q)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[de++]=String.fromCharCode(55296+(vr>>10)),V[de++]=String.fromCharCode(56320+(1023&vr))}else{const Ve=j[q++],vt=j[q++];V[de++]=String.fromCharCode((15&Q)<<12|(63&Ve)<<6|63&vt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Q=0;Q<j.length;){const Ve=q[j.charAt(Q++)],Yt=Q<j.length?q[j.charAt(Q)]:0;++Q;const Wt=Q<j.length?q[j.charAt(Q)]:64;++Q;const Ot=Q<j.length?q[j.charAt(Q)]:64;if(++Q,null==Ve||null==Yt||null==Wt||null==Ot)throw Error();de.push(Ve<<2|Yt>>4),64!==Wt&&(de.push(Yt<<4&240|Wt>>2),64!==Ot&&de.push(Wt<<6&192|Ot))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ce=function(j){return function(j){const V=X(j);return re.encodeByteArray(V,!0)}(j).replace(/\./g,"")},H=function(j){try{return re.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function J(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!qe(q)||(j[q]=J(j[q],V[q]));return j}function qe(j){return"__proto__"!==j}class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,de)=>{q?this.reject(q):this.resolve(de),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,de))}}}function Oe(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=V||"demo-project",Q=j.iat||0,Ve=j.sub||j.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Q,exp:Q+3600,auth_time:Q,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(vt)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function rt(){return"object"==typeof self&&self.self===self}function Ze(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Le().indexOf("Electron/")>=0}function Ee(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ge(){return Le().indexOf("MSAppHost/")>=0}function ne(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function ie(){return new Promise((j,V)=>{try{let q=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(de);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(de),j(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Ve;V((null===(Ve=Q.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(q){V(q)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(V,q,de){super(q),this.code=V,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(V,q,de){this.service=V,this.serviceName=q,this.errors=de}create(V,...q){const de=q[0]||{},Q=`${this.service}/${V}`,Ve=this.errors[V],vt=Ve?function Xt(j,V){return j.replace(Rn,(q,de)=>{const Q=V[de];return null!=Q?String(Q):`<${de}?>`})}(Ve,de):"Error";return new ue(Q,`${this.serviceName}: ${vt} (${Q}).`,de)}}const Rn=/\{\$([^}]+)}/g;function en(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function ur(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Ns(j,V){if(j===V)return!0;const q=Object.keys(j),de=Object.keys(V);for(const Q of q){if(!de.includes(Q))return!1;const Ve=j[Q],vt=V[Q];if(kr(Ve)&&kr(vt)){if(!Ns(Ve,vt))return!1}else if(Ve!==vt)return!1}for(const Q of de)if(!q.includes(Q))return!1;return!0}function kr(j){return null!==j&&"object"==typeof j}function Wi(j){const V=[];for(const[q,de]of Object.entries(j))Array.isArray(de)?de.forEach(Q=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(de));return V.length?"&"+V.join("&"):""}function Pr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Q,Ve]=de.split("=");V[decodeURIComponent(Q)]=decodeURIComponent(Ve)}}),V}function os(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function ct(j,V){const q=new zr(j,V);return q.subscribe.bind(q)}class zr{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(de=>{this.error(de)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,de){let Q;if(void 0===V&&void 0===q&&void 0===de)throw new Error("Missing Observer.");Q=function Wn(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:de},void 0===Q.next&&(Q.next=ai),void 0===Q.error&&(Q.error=ai),void 0===Q.complete&&(Q.complete=ai);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(vt){}}),this.observers.push(Q),Ve}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ai(){}function ho(j,V=1e3,q=2){const de=V*Math.pow(q,j),Q=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Q)}function dt(j){return j&&j._delegate?j._delegate:j}function _r(j,V){return new Promise((q,de)=>{j.onsuccess=Q=>{q(Q.target.result)},j.onerror=Q=>{var Ve;de(`${V}: ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class jt{constructor(V){this._db=V,this.objectStoreNames=this._db.objectStoreNames}transaction(V,q="readonly"){return new Ye(this._db.transaction.call(this._db,V,q))}createObjectStore(V,q){return new Te(this._db.createObjectStore(V,q))}close(){this._db.close()}}class Ye{constructor(V){this._transaction=V,this.complete=new Promise((q,de)=>{this._transaction.oncomplete=function(){q()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(V){return new Te(this._transaction.objectStore(V))}}class Te{constructor(V){this._store=V}index(V){return new et(this._store.index(V))}createIndex(V,q,de){return new et(this._store.createIndex(V,q,de))}get(V){return _r(this._store.get(V),"Error reading from IndexedDB")}put(V,q){return _r(this._store.put(V,q),"Error writing to IndexedDB")}delete(V){return _r(this._store.delete(V),"Error deleting from IndexedDB")}clear(){return _r(this._store.clear(),"Error clearing IndexedDB object store")}}class et{constructor(V){this._index=V}get(V){return _r(this._index.get(V),"Error reading from IndexedDB")}}function ht(j,V,q){return new Promise((de,Q)=>{try{const Ve=indexedDB.open(j,V);Ve.onsuccess=vt=>{de(new jt(vt.target.result))},Ve.onerror=vt=>{var Yt;Q(`Error opening indexedDB: ${null===(Yt=vt.target.error)||void 0===Yt?void 0:Yt.message}`)},Ve.onupgradeneeded=vt=>{q(new jt(Ve.result),vt.oldVersion,vt.newVersion,new Ye(Ve.transaction))}}catch(Ve){Q(`Error opening indexedDB: ${Ve.message}`)}})}function $t(j){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,p.Z)(function*(j){return new Promise((V,q)=>{try{const de=indexedDB.deleteDatabase(j);de.onsuccess=()=>{V()},de.onerror=Q=>{var Ve;q(`Error deleting indexedDB database "${j}": ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(de){q(`Error deleting indexedDB database "${j}": ${de.message}`)}})})).apply(this,arguments)}},3488:(ut,Ae,k)=>{var p=k(5e3);let Y=null;function O(){return Y}const re=new p.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ce(){return(0,p.LFG)($)}()},providedIn:"platform"}),n})();const H=new p.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function qe(){return new $((0,p.LFG)(re))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function be(n){const e=(0,p.LFG)(re).location;return new Ze((0,p.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const rt=new p.OlP("appBaseHref");let Ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(rt,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(rt,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(je(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Se,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(he))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,p.LFG)(fe),(0,p.LFG)(he))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class Fs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let hr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fs(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),ls(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ls(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ls(n,e){n.context.$implicit=e.item}class Mc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Pp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const ds=new Pp,Fp=new Mc;let rl=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return ds;if((0,p.F4k)(t))return Fp;throw function Un(n,e){return new p.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1}),n})(),Oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const Us="browser";function Er(n){return n===Us}function fr(n){return"server"===n}let pu=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new gu((0,p.LFG)(re),window)}),n})();class gu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ma(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hs(this.window.history)||hs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function hs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class js extends class zo extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){Y||(Y=n)}(new js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kc(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function _o(n){yo=yo||document.createElement("a"),yo.setAttribute("href",n);const e=yo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function $o(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yo,ln=null;const wr=new p.OlP("TRANSITION_ID"),xa=[{provide:p.ip1,useFactory:function On(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[wr,re,p.zs3],multi:!0}];class ki{static init(){(0,p.VLi)(new ki)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let br=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Hs=new p.OlP("EventManagerPlugins");let fs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Hs),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class mu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),$s=(()=>{class n extends Zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Gs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Gs))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Gs(n){O().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yu=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(yu,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new dl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fs),p.LFG($s),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=ft[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ft[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class cl extends Wo{constructor(e,t,r,i){super(e),this.component=r;const u=De(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function al(n){return"_ngcontent-%COMP%".replace(yu,n)}(i+"-"+r.id),this.hostAttr=function ul(n){return"_nghost-%COMP%".replace(yu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dl extends Wo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Pc=(()=>{class n extends mu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const hl=["alt","control","meta","shift"],qs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},di={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bu=(()=>{class n extends mu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(hl.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function zs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&pr.hasOwnProperty(e)&&(e=pr[e]))}return qs[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),hl.forEach(u=>{u!=i&&di[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:Us},{provide:p.g9A,useValue:function Pi(){js.makeCurrent(),ki.init()},multi:!0},{provide:re,useFactory:function Du(){return(0,p.RDi)(document),document},deps:[]}]),Na=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function fl(){return new p.qLn},deps:[]},{provide:Hs,useClass:Pc,multi:!0,deps:[re,p.R0b,p.Lbi]},{provide:Hs,useClass:bu,multi:!0,deps:[re]},{provide:wn,useClass:wn,deps:[fs,$s,p.AFp]},{provide:p.FYo,useExisting:wn},{provide:Zr,useExisting:$s},{provide:$s,useClass:$s,deps:[re]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:fs,useClass:fs,deps:[Hs,p.R0b]},{provide:class _n{},useClass:br,deps:[]}];let Zo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:wr,useExisting:p.AFp},xa]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Na,imports:[Oi,p.hGG]}),n})();"undefined"!=typeof window&&window;var kn=k(8996),Pn=k(7669);function mt(...n){const e=(0,Pn.yG)(n);return(0,kn.D)(n,e)}var rr=k(7579);class Qr extends rr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Fr=k(8306);const{isArray:Qo}=Array,{getPrototypeOf:$c,prototype:gn,keys:Ah}=Object;function Fi(n){if(1===n.length){const e=n[0];if(Qo(e))return{args:e,keys:null};if(function Tu(n){return n&&"object"==typeof n&&$c(n)===gn}(e)){const t=Ah(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var hi=k(4671),Lt=k(4004);const{isArray:Gc}=Array;function Dl(n){return(0,Lt.U)(e=>function bl(n,e){return Gc(e)?n(...e):n(e)}(n,e))}function Do(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Hn=k(5403),ms=k(9672);function Zs(n,e,t){n?(0,ms.f)(t,n,e):e()}var pi=k(576);function Yi(n,e){const t=(0,pi.m)(n)?n:()=>n,r=i=>i.error(t());return new Fr.y(e?i=>e.schedule(r,0,i):r)}const Ys=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qi=k(8189);function qc(...n){return function Cl(){return(0,Qi.J)(1)}()((0,kn.D)(n,(0,Pn.yG)(n)))}var Io=k(8421);function Li(n){return new Fr.y(e=>{(0,Io.Xf)(n()).subscribe(e)})}var Xo=k(515),ea=k(727),Lr=k(4482);function Vi(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zc extends Fr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ea.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ea.w0.EMPTY)}return e}refCount(){return Vi()(this)}}function Fn(n,e){return(0,Lr.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Hn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const S=u++;(0,Io.Xf)(n(y,S)).subscribe(i=(0,Hn.x)(r,M=>r.next(e?e(y,M,S,b++):M),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var Co=k(5698);function Bi(...n){const e=(0,Pn.yG)(n);return(0,Lr.e)((t,r)=>{(e?qc(n,t,e):qc(n,t)).subscribe(r)})}function ta(n,e,t,r,i){return(u,c)=>{let f=t,y=e,b=0;u.subscribe((0,Hn.x)(c,S=>{const M=b++;y=f?n(y,S,M):(f=!0,S),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function Ir(n,e){return(0,Lr.e)(ta(n,e,arguments.length>=2,!0))}function ys(n,e){return(0,Lr.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Ji(n){return(0,Lr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,c=>{u=(0,Io.Xf)(n(c,Ji(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Dn=k(5577);function Qs(n,e){return(0,pi.m)(e)?(0,Dn.z)(n,e,1):(0,Dn.z)(n,1)}function Wc(n){return n<=0?()=>Xo.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function An(n=$p){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $p(){return new Ys}function Gp(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Js(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ys((i,u)=>n(i,u,r)):hi.y,(0,Co.q)(1),t?Gp(e):An(()=>new Ys))}var Jr=k(8505);class Xs{constructor(e,t){this.id=e,this.url=t}}class _s extends Xs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Au extends Xs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class In extends Xs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tl extends Xs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class na extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wp extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Al extends Xs{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cr extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gi extends Xs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ui{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ka{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ml{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Rl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zn(n){return new Rl(n)}const Nl="ngNavigationCancelingError";function eo(n){const e=Error("NavigationCancelingError: "+n);return e[Nl]=!0,e}function To(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Mu(n[i],e[i]))return!1;return!0}function Mu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function ts(n){return Array.prototype.concat.apply([],n)}function Zc(n){return n.length>0?n[n.length-1]:null}function Yn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function mi(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,kn.D)(Promise.resolve(n)):mt(n)}const Ao={exact:function C(n,e,t){if(!kt(n.segments,e.segments)||!ee(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:L},ra={exact:function I(n,e){return es(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Mu(n[t],e[t]))},ignored:()=>!0};function xu(n,e,t){return Ao[t.paths](n.root,e.root,t.matrixParams)&&ra[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function L(n,e,t){return K(n,e,e.segments,t)}function K(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!kt(i,t)||e.hasChildren()||!ee(i,t,r))}if(n.segments.length===t.length){if(!kt(n.segments,t)||!ee(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!L(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(kt(n.segments,i)&&ee(n.segments,i,r)&&n.children[Vt])&&K(n.children[Vt],e,u,r)}}function ee(n,e,t){return e.every((r,i)=>ra[t](n[i].parameters,r.parameters))}class xe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return ia.serialize(this)}}class Re{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return So(this)}}class Xe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap}toString(){return Pa(this)}}function kt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class $n{}class Sn{parse(e){const t=new Qc(e);return new xe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vr(e.root,!0)}`,r=function oy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ji(t)}=${ji(i)}`).join("&"):`${ji(t)}=${ji(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ia=new Sn;function So(n){return n.segments.map(e=>Pa(e)).join("/")}function Vr(n,e){if(!n.hasChildren())return So(n);if(e){const t=n.children[Vt]?Vr(n.children[Vt],!1):"",r=[];return Yn(n.children,(i,u)=>{u!==Vt&&r.push(`${u}:${Vr(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function St(n,e){let t=[];return Yn(n.children,(r,i)=>{i===Vt&&(t=t.concat(e(r,i)))}),Yn(n.children,(r,i)=>{i!==Vt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vt?[Vr(n.children[Vt],!1)]:[`${i}:${Vr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${So(n)}/${t[0]}`:`${So(n)}/(${t.join("//")})`}}function yi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ji(n){return yi(n).replace(/%3B/gi,";")}function Yc(n){return yi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kl(n){return decodeURIComponent(n)}function Pl(n){return kl(n.replace(/\+/g,"%20"))}function Pa(n){return`${Yc(n.path)}${function Kp(n){return Object.keys(n).map(e=>`;${Yc(e)}=${Yc(n[e])}`).join("")}(n.parameters)}`}const ay=/^[^\/()?;=#]+/;function Es(n){const e=n.match(ay);return e?e[0]:""}const Fl=/^[^=?&#]+/,ly=/^[^&#]+/;class Qc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new Re(e,t)),r}parseSegment(){const e=Es(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Xe(kl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Es(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Es(this.remaining);i&&(r=i,this.capture(r))}e[kl(t)]=kl(r)}parseQueryParam(e){const t=function uy(n){const e=n.match(Fl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Zp(n){const e=n.match(ly);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Pl(t),u=Pl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Es(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Vt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Vt]:new Re([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class cy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mh(e,this._root).map(t=>t.value)}}function Sh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sh(n,t);if(r)return r}return null}function Mh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mh(n,t);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ro(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Jc extends cy{constructor(e,t){super(e),this.snapshot=t,ed(this,e)}toString(){return this.snapshot.toString()}}function Fa(n,e){const t=function dy(n,e){const c=new Ru([],{},{},"",{},Vt,e,null,n.root,-1,{});return new xh("",new xo(c,[]))}(n,e),r=new Qr([new Xe("",{})]),i=new Qr({}),u=new Qr({}),c=new Qr({}),f=new Qr(""),y=new No(r,i,c,f,u,Vt,e,t.root);return y.snapshot=t.root,new Jc(new xo(y,[]),t)}class No{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Lt.U)(e=>Zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Lt.U)(e=>Zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Xc(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ru{constructor(e,t,r,i,u,c,f,y,b,S,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xh extends cy{constructor(e,t){super(t),this.url=e,ed(this,t)}toString(){return td(this._root)}}function ed(n,e){e.value._routerState=n,e.children.forEach(t=>ed(n,t))}function td(n){const e=n.children.length>0?` { ${n.children.map(td).join(", ")} } `:"";return`${n.value}${e}`}function nd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function Su(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Rh(n,e){const t=es(n.params,e.params)&&function It(n,e){return kt(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Rh(n.parent,e.parent))}function Ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Nh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ll(n,r,i);return Ll(n,r)})}(n,e,t);return new xo(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Ll(n,f)),c}}const r=function py(n){return new No(new Qr(n.url),new Qr(n.params),new Qr(n.queryParams),new Qr(n.fragment),new Qr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ll(n,u));return new xo(r,i)}}function sa(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nu(n){return"object"==typeof n&&null!=n&&n.outlets}function Yp(n,e,t,r,i){let u={};if(r&&Yn(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new xe(t,u,i);const c=Oh(n,e,t);return new xe(c,u,i)}function Oh(n,e,t){const r={};return Yn(n.children,(i,u)=>{r[u]=i===e?t:Oh(i,e,t)}),new Re(n.segments,r)}class gy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sa(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Nu);if(i&&i!==Zc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vy(n,e,t){if(n||(n=new Re([],{})),0===n.segments.length&&n.hasChildren())return no(n,e,t);const r=function _E(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(Nu(f))break;const y=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Hi(y,b,c))return u;r+=2}else{if(!Hi(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Re(n.segments.slice(0,r.pathIndex),{});return u.children[Vt]=new Re(n.segments.slice(r.pathIndex),n.children),no(u,0,i)}return r.match&&0===i.length?new Re(n.segments,{}):r.match&&!n.hasChildren()?Ph(n,e,t):r.match?no(n,0,i):Ph(n,e,t)}function no(n,e,t){if(0===t.length)return new Re(n.segments,{});{const r=function _y(n){return Nu(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};return Yn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=vy(n.children[c],e,u))}),Yn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Re(n.segments,i)}}function Ph(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Nu(u)){const y=Ou(u.outlets);return new Re(r,y)}if(0===i&&sa(t[0])){r.push(new Xe(n.segments[e].path,Fh(t[0]))),i++;continue}const c=Nu(u)?u.outlets[Vt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&sa(f)?(r.push(new Xe(c,Fh(f))),i+=2):(r.push(new Xe(c,{})),i++)}return new Re(r,{})}function Ou(n){const e={};return Yn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ph(new Re([],{}),0,t))}),e}function Fh(n){const e={};return Yn(n,(t,r)=>e[r]=`${t}`),e}function Hi(n,e,t){return n==t.path&&es(e,t.parameters)}class Jp{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ro(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Yn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ro(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Ro(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ro(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ml(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Xi(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(nd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),nd(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function rd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class id{constructor(e,t){this.routes=e,this.module=t}}function La(n){return"function"==typeof n}function ku(n){return n instanceof xe}const Bl=Symbol("INITIAL_VALUE");function oa(){return Fn(n=>function Jo(...n){const e=(0,Pn.yG)(n),t=(0,Pn.jO)(n),{args:r,keys:i}=Fi(n);if(0===r.length)return(0,kn.D)([],e);const u=new Fr.y(function fi(n,e,t=hi.y){return r=>{Zs(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)Zs(e,()=>{const b=(0,kn.D)(n[y],e);let S=!1;b.subscribe((0,Hn.x)(r,M=>{u[y]=M,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Do(i,c):hi.y));return t?u.pipe(Dl(t)):u}(n.map(e=>e.pipe((0,Co.q)(1),Bi(Bl)))).pipe(Ir((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Bl?i:(u===Bl&&(r=!0),r||!1!==u&&c!==t.length-1&&!ku(u)?i:u),e)},Bl),ys(e=>e!==Bl),(0,Lt.U)(e=>ku(e)?e:!0===e),(0,Co.q)(1)))}class Ey{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ul,this.attachRef=null}}class Ul{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ey,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let jl=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=u||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new Uh(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ul),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Uh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===No?this.route:e===Ul?this.childContexts:this.parent.get(e,t)}}let jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[jl],encapsulation:2}),n})();function Hl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];sd(r,Hh(e,r))}}function sd(n,e){n.children&&Hl(n.children,e)}function Hh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function $h(n){const e=n.children&&n.children.map($h),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=jh),t}function rn(n){return n.outlet||Vt}function Gh(n,e){const t=n.filter(r=>rn(r)===e);return t.push(...n.filter(r=>rn(r)!==e)),t}const eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},eg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||To)(t,n,e);if(!u)return Object.assign({},eg);const c={};Yn(u.posParams,(y,b)=>{c[b]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function $l(n,e,t,r,i="corrected"){if(t.length>0&&function by(n,e,t){return t.some(r=>ad(n,e,r)&&rn(r)!==Vt)}(n,t,r)){const c=new Re(e,function od(n,e,t,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rn(u)!==Vt){const c=new Re([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[rn(u)]=c}return i}(n,e,r,new Re(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function tg(n,e,t){return t.some(r=>ad(n,e,r))}(n,t,r)){const c=new Re(n.segments,function wy(n,e,t,r,i,u){const c={};for(const f of r)if(ad(n,t,f)&&!i[rn(f)]){const y=new Re([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[rn(f)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Re(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function ad(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Dy(n,e,t,r){return!!(rn(n)===r||r!==Vt&&ad(e,t,n))&&("**"===n.path||Pu(e,n,t).matched)}function Iy(n,e,t){return 0===e.length&&!n.children[t]}class aa{constructor(e){this.segmentGroup=e||null}}class Tr{constructor(e){this.urlTree=e}}function Oo(n){return Yi(new aa(n))}function Gl(n){return Yi(new Tr(n))}class zh{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=$l(this.urlTree.root,[],[],this.config).segmentGroup,t=new Re(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Vt).pipe((0,Lt.U)(u=>this.createUrlTree(Ba(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ji(u=>{if(u instanceof Tr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof aa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Vt).pipe((0,Lt.U)(i=>this.createUrlTree(Ba(i),e.queryParams,e.fragment))).pipe(Ji(i=>{throw i instanceof aa?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Re([],{[Vt]:e}):e;return new xe(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Lt.U)(u=>new Re([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,kn.D)(i).pipe(Qs(u=>{const c=r.children[u],f=Gh(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Lt.U)(y=>({segment:y,outlet:u})))}),Ir((u,c)=>(u[c.outlet]=c.segment,u),{}),function qp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ys((i,u)=>n(i,u,r)):hi.y,Wc(1),t?Gp(e):An(()=>new Ys))}())}expandSegment(e,t,r,i,u,c){return(0,kn.D)(r).pipe(Qs(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Ji(b=>{if(b instanceof aa)return mt(null);throw b}))),Js(f=>!!f),Ji((f,y)=>{if(f instanceof Ys||"EmptyError"===f.name)return Iy(t,i,u)?mt(new Re([],{})):Oo(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return Dy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Oo(t):Oo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gl(u):this.lineralizeSegments(r,u).pipe((0,Dn.z)(c=>{const f=new Re(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:b,positionalParamSegments:S}=Pu(t,i,u);if(!f)return Oo(t);const M=this.applyRedirectCommands(y,i.redirectTo,S);return i.redirectTo.startsWith("/")?Gl(M):this.lineralizeSegments(i,M).pipe((0,Dn.z)(F=>this.expandSegment(e,t,r,F.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Lt.U)(M=>(r._loadedConfig=M,new Re(i,{})))):mt(new Re(i,{}));const{matched:c,consumedSegments:f,remainingSegments:y}=Pu(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Dn.z)(S=>{const M=S.module,F=S.routes,{segmentGroup:B,slicedSegments:G}=$l(t,f,y,F),te=new Re(B.segments,B.children);if(0===G.length&&te.hasChildren())return this.expandChildren(M,F,te).pipe((0,Lt.U)(Ue=>new Re(f,Ue)));if(0===F.length&&0===G.length)return mt(new Re(f,{}));const we=rn(r)===u;return this.expandSegment(M,te,F,G,we?Vt:u,!0).pipe((0,Lt.U)(Ke=>new Re(f.concat(Ke.segments),Ke.children)))})):Oo(t)}getChildConfig(e,t,r){return t.children?mt(new id(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Dn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Lt.U)(u=>(t._loadedConfig=u,u))):function Br(n){return Yi(eo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new id([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?mt(i.map(c=>{const f=e.get(c);let y;if(function Lh(n){return n&&La(n.canLoad)}(f))y=f.canLoad(t,r);else{if(!La(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}return mi(y)})).pipe(oa(),(0,Jr.b)(c=>{if(!ku(c))return;const f=eo(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Lt.U)(c=>!0===c)):mt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Vt])return Yi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new xe(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Yn(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new Re(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Ba(n){const e={};for(const r of Object.keys(n.children)){const u=Ba(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function $i(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new Re(n.segments.concat(e.segments),e.children)}return n}(new Re(n.segments,e))}class ng{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ua{constructor(e,t){this.component=e,this.route=t}}function Kh(n,e,t){const r=n._root;return _i(r,e?e._root:null,t,[r.value])}function ql(n,e,t){const r=function Cy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function _i(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ro(e);return n.children.forEach(c=>{(function ig(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function Ty(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!kt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!kt(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rh(n,e)||!es(n.queryParams,e.queryParams);default:return!Rh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new ng(r)):(u.data=c.data,u._resolvedData=c._resolvedData),_i(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Ua(f.outlet.component,c))}else c&&ja(e,f,i),i.canActivateChecks.push(new ng(r)),_i(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Yn(u,(c,f)=>ja(c,t.getContext(f),i)),i}function ja(n,e,t){const r=Ro(n),i=n.value;Yn(r,(u,c)=>{ja(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ua(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Qh{}function Jh(n){return new Fr.y(e=>e.error(n))}class Xh{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=$l(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vt);if(null===t)return null;const r=new Ru([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xo(r,t),u=new xh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=hy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=Gh(e,u),y=this.processSegmentGroup(f,c,u);if(null===y)return null;r.push(...y)}const i=ag(r);return function xy(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return Iy(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Dy(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const B=r.length>0?Zc(r).parameters:{};u=new Ru(r,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,h(t),m(t)+r.length,T(e))}else{const B=Pu(t,e,r);if(!B.matched)return null;c=B.consumedSegments,f=B.remainingSegments,u=new Ru(c,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,E(e),rn(e),e.component,e,h(t),m(t)+c.length,T(e))}const y=function Ry(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=$l(t,c,f,y.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const B=this.processChildren(y,b);return null===B?null:[new xo(u,B)]}if(0===y.length&&0===S.length)return[new xo(u,[])];const M=rn(e)===i,F=this.processSegment(y,b,S,M?Vt:i);return null===F?null:[new xo(u,F)]}}function og(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ag(n){const e=[],t=new Set;for(const r of n){if(!og(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ag(r.children);e.push(new xo(r.value,i))}return e.filter(r=>!t.has(r))}function h(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function m(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function E(n){return n.data||{}}function T(n){return n.resolve||{}}function tt(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function at(n){return Fn(e=>{const t=n(e);return t?(0,kn.D)(t).pipe((0,Lt.U)(()=>e)):mt(e)})}class Wl extends class rs{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Fu=new p.OlP("ROUTES");class Lu{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Lt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new id(ts(c.injector.get(Fu,void 0,p.XFs.Self|p.XFs.Optional)).map($h),c)}),Ji(u=>{throw t._loader$=void 0,u}));return t._loader$=new zc(i,()=>new rr.x).pipe(Vi()),t._loader$}loadModuleFactory(e){return mi(e()).pipe((0,Dn.z)(t=>t instanceof p.YKP?mt(t):(0,kn.D)(this.compiler.compileModuleAsync(t))))}}class Ny{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ua(n){throw n}function ud(n,e,t){return e.parse("/")}function ld(n,e){return mt(null)}const tf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xr=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new rr.x,this.errorHandler=ua,this.malformedUriErrorHandler=ud,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ld,afterPreactivation:ld},this.urlHandlingStrategy=new Ny,this.routeReuseStrategy=new Wl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(p.h0i),this.console=c.get(p.c2e);const M=c.get(p.R0b);this.isNgZoneEnabled=M instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Ol(){return new xe(new Re([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Lu(c,f,F=>this.triggerEvent(new Sl(F)),F=>this.triggerEvent(new vs(F))),this.routerState=Fa(this.currentUrlTree,this.rootComponentType),this.transitions=new Qr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ys(i=>0!==i.id),(0,Lt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Fn(i=>{let u=!1,c=!1;return mt(i).pipe((0,Jr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(f=>{const y=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return ug(f.source)&&(this.browserUrlTree=f.extractedUrl),mt(f).pipe(Fn(M=>{const F=this.transitions.getValue();return r.next(new _s(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?Xo.E:Promise.resolve(M)}),function Wh(n,e,t,r){return Fn(i=>function Va(n,e,t,r,i){return new zh(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Lt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jr.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function N(n,e,t,r,i){return(0,Dn.z)(u=>function My(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new Xh(n,e,t,r,i,u).recognize();return null===c?Jh(new Qh):mt(c)}catch(c){return Jh(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Lt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jr.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(B,M)}this.browserUrlTree=M.urlAfterRedirects}const F=new na(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:B,source:G,restoredState:te,extras:we}=f,We=new _s(F,this.serializeUrl(B),G,te);r.next(We);const Ke=Fa(B,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},f),{targetSnapshot:Ke,urlAfterRedirects:B,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Xo.E}),at(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=f;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Jr.b)(f=>{const y=new Wp(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,Lt.U)(f=>Object.assign(Object.assign({},f),{guards:Kh(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function Ay(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function sg(n,e,t,r){return(0,kn.D)(n).pipe((0,Dn.z)(i=>function zl(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(f=>{const y=ql(f,e,i);let b;if(function vE(n){return n&&La(n.canDeactivate)}(y))b=mi(y.canDeactivate(n,e,t,r));else{if(!La(y))throw new Error("Invalid CanDeactivate guard");b=mi(y(n,e,t,r))}return b.pipe(Js())})).pipe(oa()):mt(!0)}(i.component,i.route,t,e,r)),Js(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Dn.z)(f=>f&&function Xp(n){return"boolean"==typeof n}(f)?function Ar(n,e,t,r){return(0,kn.D)(e).pipe(Qs(i=>qc(function Yh(n,e){return null!==n&&e&&e(new Ui(n)),mt(!0)}(i.route.parent,r),function Zh(n,e){return null!==n&&e&&e(new ka(n)),mt(!0)}(i.route,r),function ko(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function rg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Li(()=>mt(c.guards.map(y=>{const b=ql(y,c.node,t);let S;if(function Bh(n){return n&&La(n.canActivateChild)}(b))S=mi(b.canActivateChild(r,n));else{if(!La(b))throw new Error("Invalid CanActivateChild guard");S=mi(b(r,n))}return S.pipe(Js())})).pipe(oa())));return mt(u).pipe(oa())}(n,i.path,t),function Sy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(u=>Li(()=>{const c=ql(u,e,t);let f;if(function Vh(n){return n&&La(n.canActivate)}(c))f=mi(c.canActivate(e,n));else{if(!La(c))throw new Error("Invalid CanActivate guard");f=mi(c(e,n))}return f.pipe(Js())}));return mt(i).pipe(oa())}(n,i.route,t))),Js(i=>!0!==i,!0))}(r,u,n,e):mt(f)),(0,Lt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Jr.b)(f=>{if(ku(f.guardsResult)){const b=eo(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const y=new Al(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),ys(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),at(f=>{if(f.guards.canActivateChecks.length)return mt(f).pipe((0,Jr.b)(y=>{const b=new Cr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Fn(y=>{let b=!1;return mt(y).pipe(function z(n,e){return(0,Dn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let u=0;return(0,kn.D)(i).pipe(Qs(c=>function oe(n,e,t,r){return function Be(n,e,t,r){const i=tt(n);if(0===i.length)return mt({});const u={};return(0,kn.D)(i).pipe((0,Dn.z)(c=>function Et(n,e,t,r){const i=ql(n,e,r);return mi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Jr.b)(f=>{u[c]=f}))),Wc(1),(0,Dn.z)(()=>tt(u).length===i.length?mt(u):Xo.E))}(n._resolve,n,e,r).pipe((0,Lt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),hy(n,t).resolve),null)))}(c.route,r,n,e)),(0,Jr.b)(()=>u++),Wc(1),(0,Dn.z)(c=>u===i.length?mt(t):Xo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Jr.b)(y=>{const b=new gi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),at(f=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:B}}=f;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!B})}),(0,Lt.U)(f=>{const y=function fy(n,e,t){const r=Ll(n,e._root,t?t._root:void 0);return new Jc(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,Jr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Lt.U)(r=>(new Jp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Jr.b)({next(){u=!0},complete(){u=!0}}),function zp(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Ji(f=>{if(c=!0,function Kc(n){return n&&n[Nl]}(f)){const y=ku(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new In(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ug(i.source)};this.scheduleNavigation(S,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Tl(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return Xo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hl(t),this.config=t.map($h),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,b=i||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let M=null;switch(f){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function to(n,e,t,r,i){if(0===t.length)return Yp(e.root,e.root,e.root,r,i);const u=function my(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Yn(u.outlets,(y,b)=>{f[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new gy(t,e,r)}(t);if(u.toRoot())return Yp(e.root,e.root,new Re([],{}),r,i);const c=function Qp(n,e,t){if(n.isAbsolute)return new kh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new kh(u,u===e.root,0)}const r=sa(n.commands[0])?0:1;return function yy(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new kh(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?no(c.segmentGroup,c.index,u.commands):vy(c.segmentGroup,c.index,u.commands);return Yp(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,M,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ku(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function nf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},tf):!1===r?Object.assign({},cd):r,ku(t))return xu(this.currentUrlTree,t,i);const u=this.parseUrl(t);return xu(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Au(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,y;if(this.disposed)return Promise.resolve(!1);let b,S,M;c?(b=c.resolve,S=c.reject,M=c.promise):M=new Promise((G,te)=>{b=G,S=te});const F=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),B=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):B=0,this.setTransition({id:F,targetPageId:B,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new In(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ug(n){return"imperative"!==n}class Fy{}class wE{preload(e,t){return mt(null)}}let bE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Lu(i,r,y=>t.triggerEvent(new Sl(y)),y=>t.triggerEvent(new vs(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(ys(t=>t instanceof Au),Qs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,kn.D)(i).pipe((0,Qi.J)(),(0,Lt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Dn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Xr),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Fy))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),lg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _s?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Au&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ws=new p.OlP("ROUTER_CONFIGURATION"),Vy=new p.OlP("ROUTER_FORROOT_GUARD"),DE=[_e,{provide:$n,useClass:Sn},{provide:Xr,useFactory:function Uy(n,e,t,r,i,u,c={},f,y){const b=new Xr(null,n,e,t,r,i,ts(u));return f&&(b.urlHandlingStrategy=f),y&&(b.routeReuseStrategy=y),function TE(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var M,F;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),b},deps:[$n,Ul,_e,p.zs3,p.Sil,Fu,ws,[class ef{},new p.FiY],[class Mn{},new p.FiY]]},Ul,{provide:No,useFactory:function cg(n){return n.routerState.root},deps:[Xr]},bE,wE,class Ly{preload(e,t){return t().pipe(Ji(()=>mt(null)))}},{provide:ws,useValue:{enableTracing:!1}}];function FI(){return new p.PXZ("Router",Xr)}let Vu=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[DE,By(t),{provide:Vy,useFactory:CE,deps:[[Xr,new p.FiY,new p.tp0]]},{provide:ws,useValue:r||{}},{provide:fe,useFactory:IE,deps:[he,[new p.tBr(rt),new p.FiY],ws]},{provide:lg,useFactory:LI,deps:[Xr,pu,ws]},{provide:Fy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:wE},{provide:p.PXZ,multi:!0,useFactory:FI},[hd,{provide:p.ip1,multi:!0,useFactory:AE,deps:[hd]},{provide:Hy,useFactory:jy,deps:[hd]},{provide:p.tb,multi:!0,useExisting:Hy}]]}}static forChild(t){return{ngModule:n,providers:[By(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vy,8),p.LFG(Xr,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function LI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new lg(n,e,t)}function IE(n,e,t={}){return t.useHash?new Ce(n,e):new Ze(n,e)}function CE(n){return"guarded"}function By(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Fu,multi:!0,useValue:n}]}let hd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new rr.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(Xr),c=this.injector.get(ws);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ws),i=this.injector.get(bE),u=this.injector.get(lg),c=this.injector.get(Xr),f=this.injector.get(p.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function AE(n){return n.appInitializer.bind(n)}function jy(n){return n.bootstrapListener.bind(n)}const Hy=new p.OlP("Router Initializer");let Gy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Kl=(()=>{class n extends Gy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const la=new p.OlP("NgValueAccessor"),ME={provide:la,useExisting:(0,p.Gpc)(()=>rf),multi:!0},xE=new p.OlP("CompositionEventMode");let rf=(()=>{class n extends Gy{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OM(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(xE,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[p._Bn([ME]),p.qOj]}),n})();const vi=new p.OlP("NgValidators"),Ur=new p.OlP("NgAsyncValidators");function zy(n){return null!=n}function Wy(n){const e=(0,p.QGY)(n)?(0,kn.D)(n):n;return(0,p.CqO)(e),e}function Ky(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function sf(n,e){return e.map(t=>t(n))}function Zy(n){return n.map(e=>function Po(n){return!n.validate}(e)?e:t=>e.validate(t))}function of(n){return null!=n?function BE(n){if(!n)return null;const e=n.filter(zy);return 0==e.length?null:function(t){return Ky(sf(t,e))}}(Zy(n)):null}function af(n){return null!=n?function ca(n){if(!n)return null;const e=n.filter(zy);return 0==e.length?null:function(t){return function VI(...n){const e=(0,Pn.jO)(n),{args:t,keys:r}=Fi(n),i=new Fr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,b=c;for(let S=0;S<c;S++){let M=!1;(0,Io.Xf)(t[S]).subscribe((0,Hn.x)(u,F=>{M||(M=!0,b--),f[S]=F},()=>y--,void 0,()=>{(!y||!M)&&(b||u.next(r?Do(r,f):f),u.complete())}))}});return e?i.pipe(Dl(e)):i}(sf(t,e).map(Wy)).pipe((0,Lt.U)(Ky))}}(Zy(n)):null}function Yy(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fg(n){return n._rawValidators}function jI(n){return n._rawAsyncValidators}function pg(n){return n?Array.isArray(n)?n:[n]:[]}function Qy(n,e){return Array.isArray(n)?n.includes(e):n===e}function uf(n,e){const t=pg(e);return pg(n).forEach(i=>{Qy(t,i)||t.push(i)}),t}function lf(n,e){return pg(e).filter(t=>!Qy(n,t))}class gg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=of(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=af(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class da extends gg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ei extends gg{get formDirective(){return null}get path(){return null}}class HI{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Jy=(()=>{class n extends HI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(da,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),Xy=(()=>{class n extends HI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ei,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function yg(n,e){_g(n,e),e.valueAccessor.writeValue(n.value),function $E(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GE(n,e)})}(n,e),function Bu(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function n_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zI(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fo(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fd(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _g(n,e){const t=fg(n);null!==e.validator?n.setValidators(Yy(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=jI(n);null!==e.asyncValidator?n.setAsyncValidators(Yy(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();fd(e._rawValidators,i),fd(e._rawAsyncValidators,i)}function pd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=fg(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=jI(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return fd(e._rawValidators,r),fd(e._rawAsyncValidators,r),t}function GE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Uu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const hf="VALID",ff="INVALID",Yl="PENDING",Ql="DISABLED";function Eg(n){return(l_(n)?n.validators:n)||null}function pf(n){return Array.isArray(n)?of(n):n||null}function a_(n,e){return(l_(e)?e.asyncValidators:n)||null}function u_(n){return Array.isArray(n)?af(n):n||null}function l_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const c_=n=>n instanceof bg,wg=n=>n instanceof gf;function d_(n){return c_(n)?n.value:n.getRawValue()}function zE(n,e){const t=wg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[e])throw new p.vHH(1001,"")}function WE(n,e){wg(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new p.vHH(1002,"")})}class Gi{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=pf(this._rawValidators),this._composedAsyncValidatorFn=u_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hf}get invalid(){return this.status===ff}get pending(){return this.status==Yl}get disabled(){return this.status===Ql}get enabled(){return this.status!==Ql}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=pf(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=u_(e)}addValidators(e){this.setValidators(uf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lf(e,this._rawAsyncValidators))}hasValidator(e){return Qy(this._rawValidators,e)}hasAsyncValidator(e){return Qy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hf,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hf||this.status===Yl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ql:hf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yl,this._hasOwnPendingAsyncValidator=!0;const t=Wy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function o_(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=wg(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof HM)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Ql:this.errors?ff:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yl)?Yl:this._anyControlsHaveStatus(ff)?ff:hf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){l_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bg extends Gi{constructor(e=null,t,r){super(Eg(t),a_(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),l_(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Uu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Uu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class gf extends Gi{constructor(e,t,r){super(Eg(t),a_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){WE(this,e),Object.keys(e).forEach(r=>{zE(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=d_(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class HM extends Gi{constructor(e,t,r){super(Eg(t),a_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){WE(this,e),e.forEach((r,i)=>{zE(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>d_(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let p_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Dg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const y_=new p.OlP("NgModelWithFormControlWarning"),__={provide:ei,useExisting:(0,p.Gpc)(()=>mf)};let mf=(()=>{class n extends ei{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return yg(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Fo(t.control||null,t,!1),Uu(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Zl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Fo(r||null,t),c_(i)&&(yg(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function r_(n,e){_g(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function WI(n,e){return pd(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_g(this.form,this),this._oldForm&&pd(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(vi,10),p.Y36(Ur,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([__]),p.qOj,p.TTD]}),n})();const w_={provide:da,useExisting:(0,p.Gpc)(()=>yf)};let yf=(()=>{class n extends da{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function df(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===rf?t=u:function cf(n){return Object.getPrototypeOf(n.constructor)===Kl}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function s_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function t_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(ei,13),p.Y36(vi,10),p.Y36(Ur,10),p.Y36(la,10),p.Y36(y_,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([w_]),p.qOj,p.TTD]}),n})(),lC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Dg]]}),n})(),lw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:y_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[lC]}),n})();const Ag=new p.OlP("ADDS_LIST_DTO"),Sg=new p.OlP("GETS_ALL_LIST_DTO");let dw=(()=>{class n{constructor(t,r,i,u){this._addsListDto=t,this._getsAllListDto=r,this._router=i,this.route=u,this.homeForm=new gf({name:new bg}),this.list$=this._getsAllListDto.getAll()}firstTask(){var t=document.getElementById("box");document.getElementById("homeTask").style.display="block",t.style.display="none"}TodoListHref(){window.location.href="m"==this._router.url[3]?"/todo-list":"todo-app/todo-list"}HomeHref(){window.location.reload()}ngOnInit(){function r(){document.getElementById("change").innerHTML='<button type="submit" id="HomeButton" class="myButton">Add Task</button>'}(function t(){var u,c,f=new Date;const y=document.getElementById("current-date");var M=f.getDay();null!==y&&(0==M&&(M=7),y.innerHTML=(null===(u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][M-1])||void 0===u?void 0:u.substring(0,3))+" "+f.getDate()+" "+(null===(c=["January","February","March","April","May","June","July","August","September","October","November","December"][f.getMonth()])||void 0===c?void 0:c.substring(0,3)).toUpperCase())})(),function i(){document.getElementById("TextFromTextarea").addEventListener("click",r,!1)}()}onHomeAddTaskHomesubmited(t){var r,i;null!=(null===(r=t.get("name"))||void 0===r?void 0:r.value)&&(this._addsListDto.add({name:null===(i=t.get("name"))||void 0===i?void 0:i.value,class:"unchecked",attribute:"",order:0}),this.homeForm.reset(),window.location.href="m"==this._router.url[3]?"/todo-list":"todo-app/todo-list")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ag),p.Y36(Sg),p.Y36(Xr),p.Y36(No))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-home"]],decls:38,vars:2,consts:[[1,"row"],[1,"pasek","col-md-12"],[1,"offset-md-1",2,"text-decoration","none","cursor","pointer",3,"click"],[1,"name-of-app","mt-2","ml-1"],[1,"container"],[1,"today","col-md-3"],["id","current-date",1,"ml-2","col-sm-2","current-date","fs-4","col-md-2","align-self-center"],["id","box",1,"box"],[1,"main","mt-3"],[1,"submain"],[1,"myButton","add-task-button","mb-3",3,"click"],["id","homeTask",1,"box","row","mt-3",2,"display","none"],[3,"formGroup","ngSubmit"],["id","TextFromTextarea","type","text","formControlName","name","placeholder","Write your message here",1,"textarea","col-sm-8","offset-md-1","mt-3"],[1,"row","offset-md-1","mt-2"],["type","submit","id","change",1,"myButton","col-md-3","mr-2","mb-3","ml-3",3,"disabled"],["id","CancelButton",1,"col-md-3","ml-3","mb-3",3,"click"],["id","CancelButton",1,"col-md-3","offset-sm-2","offset-md-0","ml-3",3,"click"],[1,"row","chills"],[1,"col-sm-6","col-md-4","mt-2","mb-2"],["src","https://simplified.co/blog/wp-content/uploads/2021/05/portfolio-websites-free-scaled.jpg",1,"img"],["src","https://images.direct.money.pl/articles/thumb/606x287_fit_in_4f1eaf61cbeea6086a8c0bbff788a1ab.jpeg",1,"img"],[1,"col-sm-6","col-md-4","mt-2","mb-2","offset-sm-3","offset-md-0"],["src","https://assets.entrepreneur.com/content/3x2/2000/1643009401-kelly-sikkema-LM17xCofKA0-unsplash.jpg?auto=webp&quality=95&crop=16:9&width=675",1,"img"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"a",2),p.NdJ("click",function(){return r.HomeHref()}),p.TgZ(3,"div",3),p._uU(4,"AWESOME TODO APP"),p.qZA()()()(),p.TgZ(5,"div",4)(6,"div",0)(7,"div",5),p._uU(8,"TODAY"),p.qZA(),p._UZ(9,"div",6),p.qZA()(),p.TgZ(10,"div",4)(11,"div",7)(12,"div",8),p._uU(13,"Get a clear view of the day ahead"),p.qZA(),p.TgZ(14,"div",9),p._uU(15,"All your tasks that are due today will show up here."),p.qZA(),p.TgZ(16,"button",10),p.NdJ("click",function(){return r.firstTask()}),p._uU(17,"Add task"),p.qZA()(),p.TgZ(18,"div",11),p._UZ(19,"br"),p.TgZ(20,"form",12),p.NdJ("ngSubmit",function(){return r.onHomeAddTaskHomesubmited(r.homeForm)}),p._UZ(21,"textarea",13)(22,"br"),p.TgZ(23,"div",14)(24,"button",15),p._uU(25,"Add Task"),p.qZA(),p.TgZ(26,"button",16),p.NdJ("click",function(){return r.HomeHref()}),p._uU(27,"Cancel"),p.qZA(),p.TgZ(28,"button",17),p.NdJ("click",function(){return r.TodoListHref()}),p._uU(29,"Task list"),p.qZA()()()(),p.TgZ(30,"div",4)(31,"div",18)(32,"div",19),p._UZ(33,"img",20),p.qZA(),p.TgZ(34,"div",19),p._UZ(35,"img",21),p.qZA(),p.TgZ(36,"div",22),p._UZ(37,"img",23),p.qZA()()()()),2&t&&(p.xp6(20),p.Q6J("formGroup",r.homeForm),p.xp6(4),p.Q6J("disabled",r.homeForm.invalid))},directives:[p_,Xy,mf,rf,Jy,yf],encapsulation:2,changeDetection:0}),n})(),dC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home-page"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"lib-home")},directives:[dw],encapsulation:2,changeDetection:0}),n})(),hC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Oi,lw,Vu]]}),n})();class fC{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const pC={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const Gn="undefined"!=typeof window&&window||{};var Ef=(()=>{return(n=Ef||(Ef={})).isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5",Ef;var n})();let bs;function pw(){if(void 0===Gn.document)return"bs4";const n=Gn.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),Gn.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=Gn.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(Gn.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(Gn.document.head.removeChild(n),"bs4"):(Gn.document.head.removeChild(n),"bs5")}function Hu(){return void 0===Gn||(void 0===Gn.__theme?(bs||(bs=pw()),"bs3"===bs):"bs3"===Gn.__theme)}function gw(){return!Hu()&&(bs||(bs=pw()),"bs4"===bs)}function wf(){return{isBs3:Hu(),isBs4:gw(),isBs5:!Hu()&&!gw()&&(bs||(bs=pw()),"bs5"===bs)}}"undefined"==typeof console||console;let Jl,IC=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(i=>i!==t);let r=this._focusTrapStack;r.length&&r[r.length-1]._disable(),r.push(t),t._enable()}deregister(t){t._disable();const r=this._focusTrapStack,i=r.indexOf(t);-1!==i&&(r.splice(i,1),r.length&&r[r.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{Jl="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Jl=!1}let yw=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Er(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Jl)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xg=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Df(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function pa(n){try{return n.frameElement}catch(e){return null}}(function bd(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===tc(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),u=tc(t);return t.hasAttribute("contenteditable")?-1!==u:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Ed(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==u:"video"===i?-1!==u&&(null!==u||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function wd(n){return!function Xl(n){return function ro(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Ei(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Rg(n){return function k_(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||ec(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yw))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ec(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function tc(n){if(!ec(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function nc(n){return null!=n&&"false"!=`${n}`}class Dd{constructor(e,t,r,i,u=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let r=0;r<t.length;r++)t[r].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]):t[r].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[r]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,Co.q)(1)).subscribe(e)}}let Id=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new Dd(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(xg),p.LFG(p.R0b),p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cd=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._focusTrapFactory=r,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=i,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=nc(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=nc(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const r=t.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(Id),p.Y36(re))},n.\u0275dir=p.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[p.TTD]}),n})(),P_=(()=>{class n{static forRoot(){return{ngModule:n,providers:[IC,yw,xg]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Oi]]}),n})();var F_=k(6451),_w=k(1144);const vw=["addListener","removeListener"],Ew=["addEventListener","removeEventListener"],ww=["on","off"];function If(n,e,t,r){if((0,pi.m)(t)&&(r=t,t=void 0),r)return If(n,e,t).pipe(Dl(r));const[i,u]=function Dw(n){return(0,pi.m)(n.addEventListener)&&(0,pi.m)(n.removeEventListener)}(n)?Ew.map(c=>f=>n[c](e,f,t)):function bw(n){return(0,pi.m)(n.addListener)&&(0,pi.m)(n.removeListener)}(n)?vw.map(L_(n,e)):function CC(n){return(0,pi.m)(n.on)&&(0,pi.m)(n.off)}(n)?ww.map(L_(n,e)):[];if(!i&&(0,_w.z)(n))return(0,Dn.z)(c=>If(c,e,t))((0,Io.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Fr.y(c=>{const f=(...y)=>c.next(1<y.length?y:y[0]);return i(f),()=>u(f)})}function L_(n,e){return t=>r=>n[t](e,r)}var TC=k(4408);const Td={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Td;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new ea.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=Td;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Td;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var AC=k(7565);const Cw=new class SC extends AC.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Iw extends TC.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Td.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Td.cancelAnimationFrame(t),e._scheduled=void 0)}});var Cf=(()=>{return(n=Cf||(Cf={})).top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top",Cf;var n})(),Tf=(()=>{return(n=Tf||(Tf={})).top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top",Tf;var n})();function rc(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function Tw(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===rc(t,"position")?Tw(t):t:r?r.ownerDocument.documentElement:document.documentElement}function Af(n){return null!==n.parentNode?Af(n.parentNode):n}function Ad(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function MC(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||Tw(n.firstElementChild)===n)}(c)?c:Tw(c);const f=Af(n);return f.host?Ad(f.host,e):Ad(n,Af(e).host)}function Aw(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===rc(e,"transform");)e=e.parentElement;return e||document.documentElement}function xC(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function RC(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function NC(n){const e=n.body,t=n.documentElement;return{height:RC("Height",e,t),width:RC("Width",e,t)}}function Sf(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function qn(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function Mw(n){const e=n.getBoundingClientRect();if(!(e&&qn(e.top)&&qn(e.left)&&qn(e.bottom)&&qn(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?NC(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||qn(e.right)&&qn(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||qn(e.bottom)&&qn(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,f=n.offsetHeight-u;if(c||f){const y=rc(n);c-=xC(y,"x"),f-=xC(y,"y"),t.width-=c,t.height-=f}return Sf(t)}function $u(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function V_(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=rc(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:V_($u(n))}function Ng(n,e,t=!1){var r,i,u,c,f,y;const b="HTML"===e.nodeName,S=Mw(n),M=Mw(e),B=(V_(n),rc(e)),G=parseFloat(B.borderTopWidth),te=parseFloat(B.borderLeftWidth);t&&b&&(M.top=Math.max(null!==(r=M.top)&&void 0!==r?r:0,0),M.left=Math.max(null!==(i=M.left)&&void 0!==i?i:0,0));const we=Sf({top:(null!==(u=S.top)&&void 0!==u?u:0)-(null!==(c=M.top)&&void 0!==c?c:0)-G,left:(null!==(f=S.left)&&void 0!==f?f:0)-(null!==(y=M.left)&&void 0!==y?y:0)-te,width:S.width,height:S.height});if(we.marginTop=0,we.marginLeft=0,b){const We=parseFloat(B.marginTop),Ke=parseFloat(B.marginLeft);qn(we.top)&&(we.top-=G-We),qn(we.bottom)&&(we.bottom-=G-We),qn(we.left)&&(we.left-=te-Ke),qn(we.right)&&(we.right-=te-Ke),we.marginTop=We,we.marginLeft=Ke}return we}function xw(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function Mf(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===rc(n,"position")||Mf($u(n)))}function B_(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?Aw(n):Ad(n,e);if("viewport"===r)u=function Rw(n,e=!1){const t=n.ownerDocument.documentElement,r=Ng(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:xw(t),f=e?0:xw(t,"left");return Sf({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:f-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let f;"scrollParent"===r?(f=V_($u(e)),"BODY"===f.nodeName&&(f=n.ownerDocument.documentElement)):f="window"===r?n.ownerDocument.documentElement:r;const y=Ng(f,c,i);if(y&&"HTML"===f.nodeName&&!Mf(c)){const{height:b,width:S}=NC(n.ownerDocument);qn(u.top)&&qn(y.top)&&qn(y.marginTop)&&(u.top+=y.top-y.marginTop),qn(u.top)&&(u.bottom=Number(b)+Number(y.top)),qn(u.left)&&qn(y.left)&&qn(y.marginLeft)&&(u.left+=y.left-y.marginLeft),qn(u.top)&&(u.right=Number(S)+Number(y.left))}else y&&(u=y)}return qn(u.left)&&(u.left+=t),qn(u.top)&&(u.top+=t),qn(u.right)&&(u.right-=t),qn(u.bottom)&&(u.bottom-=t),u}function Nw({width:n,height:e}){return n*e}function Ow(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var f,y,b,S,M,F,B,G,te,we,We,Ke;if(-1===n.indexOf("auto"))return n;const Ue=B_(t,r,c,u),Je={top:{width:null!==(f=null==Ue?void 0:Ue.width)&&void 0!==f?f:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==Ue?void 0:Ue.top)&&void 0!==b?b:0)},right:{width:(null!==(S=null==Ue?void 0:Ue.right)&&void 0!==S?S:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(F=null==Ue?void 0:Ue.height)&&void 0!==F?F:0},bottom:{width:null!==(B=null==Ue?void 0:Ue.width)&&void 0!==B?B:0,height:(null!==(G=null==Ue?void 0:Ue.bottom)&&void 0!==G?G:0)-(null!==(te=null==e?void 0:e.bottom)&&void 0!==te?te:0)},left:{width:(null!==(we=e.left)&&void 0!==we?we:0)-(null!==(We=null==Ue?void 0:Ue.left)&&void 0!==We?We:0),height:null!==(Ke=null==Ue?void 0:Ue.height)&&void 0!==Ke?Ke:0}},yt=Object.keys(Je).map(or=>Object.assign(Object.assign({position:or},Je[or]),{area:Nw(Je[or])})).sort((or,si)=>si.area-or.area);let Dt=yt.filter(({width:or,height:si})=>or>=t.clientWidth&&si>=t.clientHeight);Dt=Dt.filter(({position:or})=>i.some(si=>si===or));const Ht=Dt.length>0?Dt[0].position:yt[0].position,Xn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${wf().isBs5?Tf[Ht]:Ht}`),Ht+(Xn?`-${Xn}`:"")}const Og=(n,e=0)=>n?parseFloat(n):e;function U_(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=Og(null==t?void 0:t.marginTop)+Og(null==t?void 0:t.marginBottom),i=Og(null==t?void 0:t.marginLeft)+Og(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function kw(n,e,t){return Ng(e,t?Aw(n):Ad(n,e),t)}function kg(n,e,t){var r,i,u;const c=t.split(" ")[0],f=U_(n),y={width:f.width,height:f.height},b=-1!==["right","left"].indexOf(c),S=b?"top":"left",M=b?"left":"top",F=b?"height":"width",B=b?"width":"height";return y[S]=(null!==(r=e[S])&&void 0!==r?r:0)+e[F]/2-f[F]/2,y[M]=c===M?(null!==(i=e[M])&&void 0!==i?i:0)-f[B]:null!==(u=e[function kC(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==u?u:0,y}function j_(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const H_={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function $_(n,e){return!!wf().isBs5&&H_[e].includes(n)}function LC(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function Sw(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function xf(n){var e,t,r,i,u,c;let f=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),S=b?"height":"width",M=b?"Top":"Left",F=M.toLowerCase(),B=b?"left":"top",G=b?"bottom":"right",te=U_(y)[S],we=n.placement.split(" ")[1];(null!==(e=n.offsets.host[G])&&void 0!==e?e:0)-te<(null!==(t=f[F])&&void 0!==t?t:0)&&(f[F]-=(null!==(r=f[F])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[G])&&void 0!==i?i:0)-te)),Number(n.offsets.host[F])+Number(te)>(null!==(u=f[G])&&void 0!==u?u:0)&&(f[F]+=Number(n.offsets.host[F])+Number(te)-Number(f[G])),f=Sf(f);const We=rc(n.instance.target),Ke=parseFloat(We[`margin${M}`])||0,Ue=parseFloat(We[`border${M}Width`])||0;let Je;if(we){const Dt=parseFloat(We.borderRadius)||0,Ht=Number(Ke+Ue+Dt);Je=F===we?Number(n.offsets.host[F])+Ht:Number(n.offsets.host[F])+Number(n.offsets.host[S]-Ht)}else Je=Number(n.offsets.host[F])+Number(n.offsets.host[S]/2-te/2);let yt=Je-(null!==(c=f[F])&&void 0!==c?c:0)-Ke-Ue;return yt=Math.max(Math.min(f[S]-(te+5),yt),0),n.offsets.arrow={[F]:Math.round(yt),[B]:""},n.instance.arrow=y,n}function Pw(n){if(n.offsets.target=Sf(n.offsets.target),!j_(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),kg(n.instance.target,n.offsets.host,n.placement)),n;const e=B_(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const f=Ow("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,f];return y.forEach((b,S)=>{var M,F,B,G,te,we,We,Ke,Ue,Je,yt,Dt,Ht,Xn,or,si;if(t!==b||y.length===S+1)return;t=n.placement.split(" ")[0];const fE="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(F=n.offsets.host.left)&&void 0!==F?F:0)||"right"===t&&Math.floor(null!==(B=n.offsets.target.left)&&void 0!==B?B:0)<Math.floor(null!==(G=n.offsets.host.right)&&void 0!==G?G:0)||"top"===t&&Math.floor(null!==(te=n.offsets.target.bottom)&&void 0!==te?te:0)>Math.floor(null!==(we=n.offsets.host.top)&&void 0!==we?we:0)||"bottom"===t&&Math.floor(null!==(We=n.offsets.target.top)&&void 0!==We?We:0)<Math.floor(null!==(Ke=n.offsets.host.bottom)&&void 0!==Ke?Ke:0),vh=Math.floor(null!==(Ue=n.offsets.target.left)&&void 0!==Ue?Ue:0)<Math.floor(null!==(Je=e.left)&&void 0!==Je?Je:0),tl=Math.floor(null!==(yt=n.offsets.target.right)&&void 0!==yt?yt:0)>Math.floor(null!==(Dt=e.right)&&void 0!==Dt?Dt:0),pE=Math.floor(null!==(Ht=n.offsets.target.top)&&void 0!==Ht?Ht:0)<Math.floor(null!==(Xn=e.top)&&void 0!==Xn?Xn:0),gE=Math.floor(null!==(or=n.offsets.target.bottom)&&void 0!==or?or:0)>Math.floor(null!==(si=e.bottom)&&void 0!==si?si:0),st="left"===t&&vh||"right"===t&&tl||"top"===t&&pE||"bottom"===t&&gE,pt=-1!==["top","bottom"].indexOf(t),At=pt&&"left"===r&&vh||pt&&"right"===r&&tl||!pt&&"left"===r&&pE||!pt&&"right"===r&&gE;(fE||st||At)&&((fE||st)&&(t=y[S+1]),At&&(r=function PC(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),kg(n.instance.target,n.offsets.host,n.placement)))}),n}function z_(n){var e;if(!j_(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const f=B_(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(S){var M,F,B,G;let te=n.offsets.target[S];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)<(null!==(F=f[S])&&void 0!==F?F:0)&&(te=Math.max(null!==(B=n.offsets.target[S])&&void 0!==B?B:0,null!==(G=f[S])&&void 0!==G?G:0)),{[S]:te}},secondary(S){var M,F,B,G;const te="right"===S,we=te?"left":"top";let Ke=n.offsets.target[we];return(null!==(M=n.offsets.target[S])&&void 0!==M?M:0)>(null!==(F=f[S])&&void 0!==F?F:0)&&(Ke=Math.min(null!==(B=n.offsets.target[we])&&void 0!==B?B:0,(null!==(G=f[S])&&void 0!==G?G:0)-n.offsets.target[te?"width":"height"])),{[we]:Ke}}};return["left","right","top","bottom"].forEach(S=>{const M=-1!==["left","top","start"].indexOf(S)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(S))}),n}function VC(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,f=-1!==["bottom","top"].indexOf(r),y=f?"left":"top",b=f?"width":"height",S={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?S.start[y]:S.end[y]})}return n}const Fg=new class Pg{position(e,t){return this.offset(e,t)}offset(e,t){return kw(t,e)}positionElements(e,t,r,i,u){const c=[Pw,VC,z_,xf],y=function q_(n,e,t,r){if(!n||!e)return;const i=kw(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const f=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return f&&(c=f[1]+(f[2]?` ${f[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=Ow(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:kg(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,Cf[r],u);if(y)return c.reduce((b,S)=>S(b),y)}};function W_(n,e,t,r,i,u){const c=Fg.positionElements(n,e,t,r,i);if(!c)return;const f=function OC(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);LC(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${f.left}px, ${f.top}px, 0px)`},u),c.instance.arrow&&LC(c.instance.arrow,c.offsets.arrow,u),function FC(n,e){const t=n.instance.target;let r=t.className;const i=wf().isBs5?Tf[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function G_(n){return wf().isBs5?$_(n,"end")?"ms-2":$_(n,"start")?"me-2":$_(n,"top")?"mb-2":$_(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let Fw=(()=>{class n{constructor(t,r,i){this.update$$=new rr.x,this.positionElements=new Map,this.isDisabled=!1,Er(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,F_.T)(If(window,"scroll",{passive:!0}),If(window,"resize",{passive:!0}),mt(0,Cw),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{W_(Lg(u.target),Lg(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(Lg(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(Lg(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.R0b),p.LFG(p.FYo),p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Lg(n){return"string"==typeof n?document.querySelector(n):n instanceof p.SBq?n.nativeElement:null!=n?n:null}class ic{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Vw{constructor(e,t,r,i,u,c,f,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=f,this._posService=y,this.onBeforeShow=new p.vpe,this.onShown=new p.vpe,this.onBeforeHide=new p.vpe,this.onHidden=new p.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=p.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof p.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,f;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(f=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===f||f.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function hw(n,e){const t=function N_(n,e=pC){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new fC(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(f=>i.push(f())),u.length=0};return t.forEach(f=>{const y=f.open===f.close,b=y?e.toggle:e.show;if(!y&&f.close&&e.hide){const S=n.listen(r,f.close,e.hide);u.push(()=>S)}b&&i.push(n.listen(r,f.open,()=>b(c)))}),()=>{i.forEach(f=>f())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function gC(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function mC(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new ic([]);if(e instanceof p.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new ic([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new ic([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=p.zs3.create({providers:this._providers,parent:this._injector}),f=u.create(c);return Object.assign(f.instance,r),this._applicationRef.attachView(f.hostView),new ic([[f.location.nativeElement]],f.hostView,f)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new ic([i])}}let Vg=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new Vw(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p._Vd),p.LFG(p.R0b),p.LFG(p.zs3),p.LFG(Fw),p.LFG(p.z2F))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K_=["*"];let Z_=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Bg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rf={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},UC=new p.OlP("override-default-config");let HC=(()=>{class n{constructor(t,r,i){this._element=r,this._renderer=i,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,Hu()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var r;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var r,i;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(r=this.bsModalService)||void 0===r?void 0:r.getModalsCount())&&(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,Hu()?"in":"show"),setTimeout(()=>{var t,r;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(r=this.bsModalService)||void 0===r||r.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Bg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275cmp=p.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,r){1&t&&p.NdJ("mousedown",function(u){return r.onClickStarted(u)})("click",function(u){return r.onClickStop(u)})("popstate",function(){return r.onPopState()},!1,p.Jf7)("keydown.esc",function(u){return r.onEsc(u)},!1,p.Jf7),2&t&&p.uIk("aria-modal",!0)("aria-labelledby",r.config.ariaLabelledBy)("aria-describedby",r.config.ariaDescribedby)},ngContentSelectors:K_,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,r){1&t&&(p.F$t(),p.TgZ(0,"div",0)(1,"div",1),p.Hsn(2),p.qZA()()),2&t&&p.Tol("modal-dialog"+(r.config.class?" "+r.config.class:""))},directives:[Cd],encapsulation:2}),n})(),Bw=(()=>{class n{constructor(t,r){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=r}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),Hu()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class DC{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=Gn),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function bC(){const n=wf(),e=Object.keys(n).find(t=>n[t]);return Ef[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275cmp=p.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),jw=1,jg=(()=>{class n{constructor(t,r,i){this.clf=r,this.modalDefaultOption=i,this.onShow=new p.vpe,this.onShown=new p.vpe,this.onHide=new p.vpe,this.onHidden=new p.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=i?Object.assign({},Rf,i):Rf}show(t,r){this.modalsCount++,this._createLoaders();const i=(null==r?void 0:r.id)||jw++;return this.config=this.modalDefaultOption?Object.assign({},Rf,this.modalDefaultOption,r):Object.assign({},Rf,r),this.config.id=i,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,r=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&r&&(this._backdropLoader.attach(Bw).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var r;const i=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const f of this.config.providers)i.provide(f);const u=new Z_,c=i.provide({provide:Bg,useValue:this.config}).provide({provide:Z_,useValue:u}).attach(HC).to("body");return u.hide=()=>{var f;return null===(f=c.instance)||void 0===f?void 0:f.hide()},u.setClass=f=>{c.instance&&(c.instance.config.class=f)},u.onHidden=new p.vpe,u.onHide=new p.vpe,this.copyEvent(i.onBeforeHide,u.onHide),this.copyEvent(i.onHidden,u.onHidden),c.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),c.instance&&(c.instance.level=this.getModalsCount(),u.content=i.getInnerComponent(),u.id=null===(r=c.instance.config)||void 0===r?void 0:r.id),u}_hideModal(t){if(null!=t){const r=this.loaders.findIndex(u=>{var c;return(null===(c=u.instance)||void 0===c?void 0:c.config.id)===t}),i=this.loaders[r];i&&i.hide(t)}else this.loaders.forEach(r=>{r.instance&&r.hide(r.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const r=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),r}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const r=this.loaders.findIndex(i=>{var u;return(null===(u=i.instance)||void 0===u?void 0:u.config.id)===t});r>=0&&(this.loaders.splice(r,1),this.loaders.forEach((i,u)=>{i.instance&&(i.instance.level=u+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,r){t.subscribe(i=>{r.emit(this.lastDismissReason||i)})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(Vg),p.LFG(UC,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();P_.forRoot();let Hw=(()=>{class n{static forRoot(){return{ngModule:n,providers:[jg,Vg,Fw]}}static forChild(){return{ngModule:n,providers:[jg,Vg,Fw]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[P_]]}),n})(),Y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Oi,lw,Hw.forRoot()]]}),n})();var Gw=k(4986),ti=k(5813);function qw(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function WC(n,e){return n===e}var Qe,io=k(2011),Sr=(k(820),k(3942)),ve=k(5861),sc=k(9681),Hg=k(4859),qa=k(1877),Kt=k(2090),zw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ga={},Q_=Q_||{},Nt=zw||self;function Nf(){}function J_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Md(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $g="closure_uid_"+(1e9*Math.random()>>>0),X_=0;function ma(n,e,t){return n.call.apply(n.bind,arguments)}function KC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function jr(n,e,t){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:KC).apply(null,arguments)}function Ds(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Hr(){this.s=this.s,this.o=this.o}var Kw={};Hr.prototype.s=!1,Hr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rx(n){return Object.prototype.hasOwnProperty.call(n,$g)&&n[$g]||(n[$g]=++X_)}(this);delete Kw[n]}},Hr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Yw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Qw(n){return Array.prototype.concat.apply([],arguments)}function Of(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gu(n){return/^[\s\xa0]*$/.test(n)}var bi,Jw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function wi(n,e){return-1!=n.indexOf(e)}function ev(n,e){return n<e?-1:n>e?1:0}e:{var tv=Nt.navigator;if(tv){var kf=tv.userAgent;if(kf){bi=kf;break e}}bi=""}function nv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function rv(n){const e={};for(const t in n)e[t]=n[t];return e}var iv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<iv.length;u++)t=iv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xd(n){return xd[" "](n),n}xd[" "]=Nf;var qg,n,eb=wi(bi,"Opera"),oc=wi(bi,"Trident")||wi(bi,"MSIE"),ov=wi(bi,"Edge"),Gg=ov||oc,av=wi(bi,"Gecko")&&!(wi(bi.toLowerCase(),"webkit")&&!wi(bi,"Edge"))&&!(wi(bi,"Trident")||wi(bi,"MSIE"))&&!wi(bi,"Edge"),tb=wi(bi.toLowerCase(),"webkit")&&!wi(bi,"Edge");function uv(){var n=Nt.document;return n?n.documentMode:void 0}e:{var lv="",cv=(n=bi,av?/rv:([^\);]+)(\)|;)/.exec(n):ov?/Edge\/([\d\.]+)/.exec(n):oc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tb?/WebKit\/(\S+)/.exec(n):eb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(cv&&(lv=cv?cv[1]:""),oc){var dv=uv();if(null!=dv&&dv>parseFloat(lv)){qg=String(dv);break e}}qg=lv}var YC={};var JC=Nt.document&&oc&&(uv()||parseInt(qg,10))||void 0,XC=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",Nf,e),Nt.removeEventListener("test",Nf,e)}catch(t){}return n}();function Di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pf(n,e){if(Di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(av){e:{try{xd(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:eT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pf.Z.h.call(this)}}Di.prototype.h=function(){this.defaultPrevented=!0},bn(Pf,Di);var eT={2:"touch",3:"pen",4:"mouse"};Pf.prototype.h=function(){Pf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ff="closure_listenable_"+(1e6*Math.random()|0),tT=0;function nT(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++tT,this.ca=this.fa=!1}function zg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Wg(n){this.src=n,this.g={},this.h=0}function Kg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Zw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(zg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Zg(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Wg.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Zg(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new nT(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var Yg="closure_lm_"+(1e6*Math.random()|0),Qg={};function fv(n,e,t,r,i){if(r&&r.once)return gv(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)fv(n,e[u],t,r,i);return null}return t=qu(t),n&&n[Ff]?n.N(e,t,Md(r)?!!r.capture:!!r,i):pv(n,e,t,!1,r,i)}function pv(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Md(i)?!!i.capture:!!i,f=_v(n);if(f||(n[Yg]=f=new Wg(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function rb(){var e=ac;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)XC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(yv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gv(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)gv(n,e[u],t,r,i);return null}return t=qu(t),n&&n[Ff]?n.O(e,t,Md(r)?!!r.capture:!!r,i):pv(n,e,t,!0,r,i)}function mv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)mv(n,e[u],t,r,i);else r=Md(r)?!!r.capture:!!r,t=qu(t),n&&n[Ff]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Zg(u=n.g[e],t,r,i))&&(zg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=_v(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Zg(e,t,r,i)),(t=-1<n?e[n]:null)&&Jg(t))}function Jg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ff])Kg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(yv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_v(e))?(Kg(t,n),0==t.h&&(t.src=null,e[Yg]=null)):zg(n)}}}function yv(n){return n in Qg?Qg[n]:Qg[n]="on"+n}function ac(n,e){if(n.ca)n=!0;else{e=new Pf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Jg(n),n=t.call(r,e)}return n}function _v(n){return(n=n[Yg])instanceof Wg?n:null}var vv="__closure_events_fn_"+(1e9*Math.random()>>>0);function qu(n){return"function"==typeof n?n:(n[vv]||(n[vv]=function(e){return n.handleEvent(e)}),n[vv])}function ni(){Hr.call(this),this.i=new Wg(this),this.P=this,this.I=null}function Mr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Di(e,n);else if(e instanceof Di)e.target=e.target||n;else{var i=e;sv(e=new Di(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Ev(c,r,!0,e)&&i}if(i=Ev(c=e.g=n,r,!0,e)&&i,i=Ev(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Ev(c=e.g=t[u],r,!1,e)&&i}function Ev(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,y=c.ia||c.src;c.fa&&Kg(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}bn(ni,Hr),ni.prototype[Ff]=!0,ni.prototype.removeEventListener=function(n,e,t,r){mv(this,n,e,t,r)},ni.prototype.M=function(){if(ni.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zg(t[r]);delete n.g[e],n.h--}}this.I=null},ni.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Xg=Nt.JSON.stringify;function ib(){var n=Lf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rd,wt=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new rT,n=>n.reset());class rT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iT(n){Nt.setTimeout(()=>{throw n},0)}function wv(n,e){Rd||function sT(){var n=Nt.Promise.resolve(void 0);Rd=function(){n.then(Qn)}}(),Nd||(Rd(),Nd=!0),Lf.add(n,e)}var Nd=!1,Lf=new class ix{constructor(){this.h=this.g=null}add(e,t){const r=wt.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Qn(){for(var n;n=ib();){try{n.h.call(n.g)}catch(t){iT(t)}var e=wt;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nd=!1}function bv(n,e){ni.call(this),this.h=n||1,this.g=e||Nt,this.j=jr(this.kb,this),this.l=Date.now()}function em(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Dv(n,e,t){if("function"==typeof n)t&&(n=jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function sb(n){n.g=Dv(()=>{n.g=null,n.i&&(n.i=!1,sb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bn(bv,ni),(Qe=bv.prototype).da=!1,Qe.S=null,Qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mr(this,"tick"),this.da&&(em(this),this.start()))}},Qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qe.M=function(){bv.Z.M.call(this),em(this),delete this.g};class ob extends Hr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sb(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Od(n){Hr.call(this),this.h=n,this.g={}}bn(Od,Hr);var Iv=[];function Cv(n,e,t,r){Array.isArray(t)||(t&&(Iv[0]=t.toString()),t=Iv);for(var i=0;i<t.length;i++){var u=fv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ab(n){nv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Jg(e)},n),n.g={}}function tm(){this.g=!0}function kd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Xg(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Od.prototype.M=function(){Od.Z.M.call(this),ab(this)},Od.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tm.prototype.Aa=function(){this.g=!1},tm.prototype.info=function(){};var ya={},Tv=null;function Bf(){return Tv=Tv||new ni}function Av(n){Di.call(this,ya.Ma,n)}function Uf(n){const e=Bf();Mr(e,new Av(e,n))}function Pd(n,e){Di.call(this,ya.STAT_EVENT,n),this.stat=e}function xr(n){const e=Bf();Mr(e,new Pd(e,n))}function ub(n,e){Di.call(this,ya.Na,n),this.size=e}function jf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}ya.Ma="serverreachability",bn(Av,Di),ya.STAT_EVENT="statevent",bn(Pd,Di),ya.Na="timingevent",bn(ub,Di);var nm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rm(){}function lb(){}rm.prototype.h=null;var cb,Fd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xv(){Di.call(this,"d")}function Rv(){Di.call(this,"c")}function Nv(){}function im(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Od(this),this.P=db,this.W=new bv(n=Gg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lT}function lT(){this.i=null,this.g="",this.h=!1}bn(xv,Di),bn(Rv,Di),bn(Nv,rm),Nv.prototype.g=function(){return new XMLHttpRequest},Nv.prototype.i=function(){return{}},cb=new Nv;var db=45e3,Ld={},sm={};function Ov(n,e,t){n.K=1,n.v=um(Lo(e)),n.s=t,n.U=!0,kv(n,null)}function kv(n,e){n.F=Date.now(),Hf(n),n.A=Lo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),vb(t.h,"t",r),n.C=0,t=n.l.H,n.h=new lT,n.g=Nb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ob(jr(n.Ia,n,n.g),n.O)),Cv(n.V,n.g,"readystatechange",n.gb),e=n.H?rv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Uf(1),function oT(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var b=f[y].split("=");if(1<b.length){var S=b[0];b=b[1];var M=S.split("_");c=2<=M.length&&"type"==M[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Vd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hb(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=cT(n,t),i==sm){4==e&&(n.o=4,xr(14),r=!1),kd(n.j,n.m,null,"[Incomplete Response]");break}if(i==Ld){n.o=4,xr(15),kd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kd(n.j,n.m,i,null),Pv(n,i)}Vd(n)&&i!=sm&&i!=Ld&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,xr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Mb(e),e.L=!0,xr(11))):(kd(n.j,n.m,t,"[Invalid Chunked Response]"),uc(n),Bd(n))}function cT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sm:(t=Number(e.substring(t,r)),isNaN(t)?Ld:(r+=1)+t>e.length?sm:(e=e.substr(r,t),n.C=r+t,e))}function Hf(n){n.Y=Date.now()+n.P,fb(n,n.P)}function fb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jf(jr(n.eb,n),e)}function om(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Bd(n){0==n.l.G||n.I||e0(n.l,n)}function uc(n){om(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,em(n.W),ab(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wf(t.i,n)))if(t.I=n.N,!n.J&&Wf(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=jf(jr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xv(t),fm(t)}Qv(t),xr(18)}if(1>=jv(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else hc(t,11)}else if((n.J||t.g==n)&&Xv(t),!Gu(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const M=b[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const G=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var u=r.i;!u.g&&(wi(G,"spdy")||wi(G,"quic")||wi(G,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Hv(u,u.h),u.h=null))}if(r.D){const te=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.sa=te,Ln(r.F,r.D,te))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=Rb(r,r.H?r.la:null,r.W),c.J){wb(r.i,c);var f=c,y=r.K;y&&f.setTimeout(y),f.B&&(om(f),Hf(f)),r.g=c}else Yv(r);0<t.l.length&&pm(t)}else"stop"!=b[0]&&"close"!=b[0]||hc(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?hc(t,7):Xf(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Uf(4)}catch(b){}}function Fv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(J_(n)||"string"==typeof n)Yw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(J_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Ud(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(J_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function lc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof lc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Lv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];zu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)zu(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function zu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Qe=im.prototype).setTimeout=function(n){this.P=n},Qe.gb=function(n){n=n.target;const e=this.L;e&&3==Is(n)?e.l():this.Ia(n)},Qe.Ia=function(n){try{if(n==this.g)e:{const S=Is(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>S)&&(3!=S||Gg||this.g&&(this.h.h||this.g.ga()||Tb(this.g)))){this.I||4!=S||7==e||Uf(8==e||0>=M?3:2),om(this);var t=this.g.ba();this.N=t;t:if(Vd(this)){var r=Tb(this.g);n="";var i=r.length,u=4==Is(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){uc(this),Bd(this);var c="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Vf(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gu(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,xr(12),uc(this),Bd(this);break e}kd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pv(this,t)}this.U?(hb(this,S,c),Gg&&this.i&&3==S&&(Cv(this.V,this.W,"tick",this.fb),this.W.start())):(kd(this.j,this.m,c,null),Pv(this,c)),4==S&&uc(this),this.i&&!this.I&&(4==S?e0(this.l,this):(this.i=!1,Hf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,xr(12)):(this.o=0,xr(13)),uc(this),Bd(this)}}}catch(S){}},Qe.fb=function(){if(this.g){var n=Is(this.g),e=this.g.ga();this.C<e.length&&(om(this),hb(this,n,e),this.i&&4!=n&&Hf(this))}},Qe.cancel=function(){this.I=!0,uc(this)},Qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function aT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Uf(3),xr(17)),uc(this),this.o=2,Bd(this)):fb(this,this.Y-n)},(Qe=lc.prototype).R=function(){Lv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Qe.T=function(){return Lv(this),this.g.concat()},Qe.get=function(n,e){return zu(this.h,n)?this.h[n]:e},Qe.set=function(n,e){zu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var pb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof cc){this.g=void 0!==e?e:n.g,am(this,n.j),this.s=n.s,$f(this,n.i),Gf(this,n.m),this.l=n.l,e=n.h;var t=new zf;t.i=e.i,e.g&&(t.g=new lc(e.g),t.h=e.h),mb(this,t),this.o=n.o}else n&&(t=String(n).match(pb))?(this.g=!!e,am(this,t[1]||"",!0),this.s=jd(t[2]||""),$f(this,t[3]||"",!0),Gf(this,t[4]),this.l=jd(t[5]||"",!0),mb(this,t[6]||"",!0),this.o=jd(t[7]||"")):(this.g=!!e,this.h=new zf(null,this.g))}function Lo(n){return new cc(n)}function am(n,e,t){n.j=t?jd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $f(n,e,t){n.i=t?jd(e,!0):e}function Gf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function mb(n,e,t){e instanceof zf?(n.h=e,function yT(n,e){e&&!n.j&&(za(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Bv(this,r),vb(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=qf(e,gT)),n.h=new zf(e,n.g))}function Ln(n,e,t){n.h.set(e,t)}function um(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,hT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function hT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qf(e,yb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qf(e,yb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(qf(t,"/"==t.charAt(0)?pT:fT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qf(t,mT)),n.join("")};var yb=/[#\/\?@]/g,fT=/[#\?:]/g,pT=/[#\?]/g,gT=/[#\?@]/g,mT=/#/g;function zf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function za(n){n.g||(n.g=new lc,n.h=0,n.i&&function gb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bv(n,e){za(n),e=dc(n,e),zu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,zu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Lv(n)))}function _b(n,e){return za(n),e=dc(n,e),zu(n.g.h,e)}function vb(n,e,t){Bv(n,e),0<t.length&&(n.i=null,n.g.set(dc(n,e),Of(t)),n.h+=t.length)}function dc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Eb(n){this.l=n||Uv,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qe=zf.prototype).add=function(n,e){za(this),this.i=null,n=dc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qe.forEach=function(n,e){za(this),this.g.forEach(function(t,r){Yw(t,function(i){n.call(e,i,r,this)},this)},this)},Qe.T=function(){za(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},Qe.R=function(n){za(this);var e=[];if("string"==typeof n)_b(this,n)&&(e=Qw(e,this.g.get(dc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Qw(e,n[t])}return e},Qe.set=function(n,e){return za(this),this.i=null,_b(this,n=dc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var Uv=10;function lm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jv(n){return n.h?1:n.g?n.g.size:0}function Wf(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Hv(n,e){n.g?n.g.add(e):n.h=e}function wb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Of(n.i)}function $v(){}function bb(){this.g=new $v}function vT(n,e,t){const r=t||"";try{Fv(n,function(i,u){let c=i;Md(i)&&(c=Xg(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function Hd(n){this.l=n.$b||null,this.j=n.ib||!1}function Gv(n,e){ni.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=qv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eb.prototype.cancel=function(){if(this.i=cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},$v.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},$v.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},bn(Hd,rm),Hd.prototype.g=function(){return new Gv(this.l,this.j)},Hd.prototype.i=function(n){return function(){return n}}({}),bn(Gv,ni);var qv=0;function Kf(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_a(n)}function _a(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qe=Gv.prototype).open=function(n,e){if(this.readyState!=qv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_a(this)},Qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zf(this)),this.readyState=qv},Qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_a(this)),this.g&&(this.readyState=3,_a(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kf(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zf(this):_a(this),3==this.readyState&&Kf(this)}},Qe.Ua=function(n){this.g&&(this.response=this.responseText=n,Zf(this))},Qe.Ta=function(n){this.g&&(this.response=n,Zf(this))},Qe.ha=function(){this.g&&Zf(this)},Qe.setRequestHeader=function(n,e){this.v.append(n,e)},Qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Gv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Yf=Nt.JSON.parse;function gr(n){ni.call(this),this.headers=new lc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ET,this.K=this.L=!1}bn(gr,ni);var ET="",Ib=/^https?$/i,wT=["POST","PUT"];function DT(n){return"content-type"==n.toLowerCase()}function Cb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zv(n),$d(n)}function zv(n){n.D||(n.D=!0,Mr(n,"complete"),Mr(n,"error"))}function Wv(n){if(n.h&&void 0!==Q_&&(!n.C[1]||4!=Is(n)||2!=n.ba()))if(n.v&&4==Is(n))Dv(n.Fa,0,n);else if(Mr(n,"readystatechange"),4==Is(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(pb)[1]||null;if(!i&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Ib.test(i?i.toLowerCase():"")}t=r}if(t)Mr(n,"complete"),Mr(n,"success");else{n.m=6;try{var c=2<Is(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",zv(n)}}finally{$d(n)}}}function $d(n,e){if(n.g){Qf(n);const t=n.g,r=n.C[0]?Nf:null;n.g=null,n.C=null,e||Mr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Qf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function Is(n){return n.g?n.g.readyState:0}function Tb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ET:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function hm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Ab(n){let e="";return nv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function Jf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Sb(n){this.za=0,this.l=[],this.h=new tm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jf("baseRetryDelayMs",5e3,n),this.$a=Jf("retryDelaySeedMs",1e4,n),this.Ya=Jf("forwardChannelMaxRetries",2,n),this.ra=Jf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Eb(n&&n.concurrentRequestLimit),this.Ca=new bb,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xf(n){if(IT(n),3==n.G){var e=n.V++,t=Lo(n.F);Ln(t,"SID",n.J),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),va(n,t),(e=new im(n,n.h,e,void 0)).K=2,e.v=um(Lo(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Nb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hf(e)}xb(n)}function fm(n){n.g&&(Mb(n),n.g.cancel(),n.g=null)}function IT(n){fm(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),Xv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Kv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pm(n)}function pm(n){lm(n.i)||n.m||(n.m=!0,wv(n.Ha,n),n.C=0)}function Zv(n,e){var t;t=e?e.m:n.V++;const r=Lo(n.F);Ln(r,"SID",n.J),Ln(r,"RID",t),Ln(r,"AID",n.U),va(n,r),n.o&&n.s&&hm(r,n.o,n.s),t=new im(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=CT(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Hv(n.i,t),Ov(t,r,e)}function va(n,e){n.j&&Fv({},function(t,r){Ln(e,r,t)})}function CT(n,e,t){t=Math.min(n.l.length,t);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let b=i[y].h;const S=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),f=!1;else try{vT(S,c,"req"+b+"_")}catch(M){r&&r(S)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Yv(n){n.g||n.u||(n.Y=1,wv(n.Ga,n),n.A=0)}function Qv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=jf(jr(n.Ga,n),gm(n,n.A)),n.A++,0))}function Mb(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Jv(n){n.g=new im(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Lo(n.oa);Ln(e,"RID","rpc"),Ln(e,"SID",n.J),Ln(e,"CI",n.N?"0":"1"),Ln(e,"AID",n.U),va(n,e),Ln(e,"TYPE","xmlhttp"),n.o&&n.s&&hm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=um(Lo(e)),t.s=null,t.U=!0,kv(t,n)}function Xv(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function e0(n,e){var t=null;if(n.g==e){Xv(n),Mb(n),n.g=null;var r=2}else{if(!Wf(n.i,e))return;t=e.D,wb(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Mr(r=Bf(),new ub(r,t,e,i)),pm(n)}else Yv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Gd(n,e){return!(jv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=jf(jr(n.Ha,n,e),gm(n,n.C)),n.C++,0)))}(n,e)||2==r&&Qv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:hc(n,5);break;case 4:hc(n,10);break;case 3:hc(n,6);break;default:hc(n,2)}}function gm(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=jr(n.jb,n);t||(t=new cc("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||am(t,"https"),um(t)),function Db(n,e){const t=new tm;if(Nt.Image){const r=new Image;r.onload=Ds(dm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ds(dm,t,r,"TestLoadImage: error",!1,e),r.onabort=Ds(dm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ds(dm,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else xr(2);n.G=0,n.j&&n.j.va(e),xb(n),IT(n)}function xb(n){n.G=0,n.I=-1,n.j&&((0!=cm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Of(n.l),n.l.length=0),n.j.ua())}function Rb(n,e,t){let r=function Vv(n){return n instanceof cc?Lo(n):new cc(n,void 0)}(t);if(""!=r.i)e&&$f(r,e+"."+r.i),Gf(r,r.m);else{const i=Nt.location;r=function dT(n,e,t,r){var i=new cc(null,void 0);return n&&am(i,n),e&&$f(i,e),t&&Gf(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&nv(n.aa,function(i,u){Ln(r,u,i)}),t=n.sa,(e=n.D)&&t&&Ln(r,e,t),Ln(r,"VER",n.ma),va(n,r),r}function Nb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&n.Ba&&!n.qa?new Hd({ib:!0}):n.qa)).L=n.H,e}function Ob(){}function mm(){if(oc&&!(10<=Number(JC)))throw Error("Environmental error: no available transport.")}function Cs(n,e){ni.call(this),this.g=new Sb(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Gu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new qd(this)}function kb(n){xv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Pb(){Rv.call(this),this.status=1}function qd(n){this.g=n}(Qe=gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cb.g(),this.C=function Mv(n){return n.h||(n.h=n.i())}(this.u?this.u:cb),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Cb(this,u)}n=t||"";const i=new lc(this.headers);r&&Fv(r,function(u,c){i.set(c,u)}),r=function ZC(n){e:{var e=DT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=Zw(wT,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qf(this),0<this.B&&((this.K=function bT(n){return oc&&function QC(){return function Xw(n){var e=YC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Jw(String(qg)).split("."),t=Jw("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=ev(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||ev(0==i[2].length,0==u[2].length)||ev(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=Dv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Cb(this,u)}},Qe.pa=function(){void 0!==Q_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mr(this,"timeout"),this.abort(8))},Qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Mr(this,"complete"),Mr(this,"abort"),$d(this))},Qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$d(this,!0)),gr.Z.M.call(this)},Qe.Fa=function(){this.s||(this.F||this.v||this.l?Wv(this):this.cb())},Qe.cb=function(){Wv(this)},Qe.ba=function(){try{return 2<Is(this)?this.g.status:-1}catch(n){return-1}},Qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Yf(e)}},Qe.Da=function(){return this.m},Qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qe=Sb.prototype).ma=8,Qe.G=1,Qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new im(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=rv(u),sv(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=CT(this,i,e),Ln(t=Lo(this.F),"RID",n),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),va(this,t),this.o&&u&&hm(t,this.o,u),Hv(this.i,i),this.Ra&&Ln(t,"TYPE","init"),this.ja?(Ln(t,"$req",e),Ln(t,"SID","null"),i.$=!0,Ov(i,t,null)):Ov(i,t,e),this.G=2}}else 3==this.G&&(n?Zv(this,n):0==this.l.length||lm(this.i)||Zv(this))},Qe.Ga=function(){if(this.u=null,Jv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=jf(jr(this.bb,this),n)}},Qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xr(10),fm(this),Jv(this))},Qe.ab=function(){null!=this.v&&(this.v=null,fm(this),Qv(this),xr(19))},Qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),xr(2)):(this.h.info("Failed to ping google.com"),xr(1))},(Qe=Ob.prototype).xa=function(){},Qe.wa=function(){},Qe.va=function(){},Qe.ua=function(){},Qe.Oa=function(){},mm.prototype.g=function(n,e){return new Cs(n,e)},bn(Cs,ni),Cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),wv(jr(n.hb,n,e))),xr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Rb(n,null,n.W),pm(n)},Cs.prototype.close=function(){Xf(this.g)},Cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Kv(this.g,e)}else this.v?((e={}).__data__=Xg(n),Kv(this.g,e)):Kv(this.g,n)},Cs.prototype.M=function(){this.g.j=null,delete this.j,Xf(this.g),delete this.g,Cs.Z.M.call(this)},bn(kb,xv),bn(Pb,Rv),bn(qd,Ob),qd.prototype.xa=function(){Mr(this.g,"a")},qd.prototype.wa=function(n){Mr(this.g,new kb(n))},qd.prototype.va=function(n){Mr(this.g,new Pb(n))},qd.prototype.ua=function(){Mr(this.g,"b")},mm.prototype.createWebChannel=mm.prototype.g,Cs.prototype.send=Cs.prototype.u,Cs.prototype.open=Cs.prototype.m,Cs.prototype.close=Cs.prototype.close,nm.NO_ERROR=0,nm.TIMEOUT=8,nm.HTTP_ERROR=6,Sv.COMPLETE="complete",lb.EventType=Fd,Fd.OPEN="a",Fd.CLOSE="b",Fd.ERROR="c",Fd.MESSAGE="d",ni.prototype.listen=ni.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.La,gr.prototype.getLastErrorCode=gr.prototype.Da,gr.prototype.getStatus=gr.prototype.ba,gr.prototype.getResponseJson=gr.prototype.Qa,gr.prototype.getResponseText=gr.prototype.ga,gr.prototype.send=gr.prototype.ea;var ep=ga.createWebChannelTransport=function(){return new mm},Fb=ga.getStatEventTarget=function(){return Bf()},ym=ga.ErrorCode=nm,Lb=ga.EventType=Sv,Vb=ga.Event=ya,t0=ga.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Bb=ga.FetchXmlHttpFactory=Hd,_m=ga.WebChannel=lb,Ub=ga.XhrIo=gr;const jb="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let zd="9.6.11";const Wu=new qa.Yd("@firebase/firestore");function fc(){return Wu.logLevel}function Pe(n,...e){if(Wu.logLevel<=qa.in.DEBUG){const t=e.map(np);Wu.debug(`Firestore (${zd}): ${n}`,...t)}}function vn(n,...e){if(Wu.logLevel<=qa.in.ERROR){const t=e.map(np);Wu.error(`Firestore (${zd}): ${n}`,...t)}}function tp(n,...e){if(Wu.logLevel<=qa.in.WARN){const t=e.map(np);Wu.warn(`Firestore (${zd}): ${n}`,...t)}}function np(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${zd}) INTERNAL ASSERTION FAILED: `+n;throw vn(e),new Error(e)}function xt(n,e){n||nt()}function ze(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Kt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $b{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class Gb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n0{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $r,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $r)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new Hb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new ri(e)}}class qb{constructor(e,t,r){this.type="FirstParty",this.user=ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ST{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qb(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sx{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new zb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class zi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Kb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}zi.A=-1;class vm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kb(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Wd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Zb(n){return n+"\0"}class ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new ir(0,0))}static max(){return new Ct(new ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function r0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class rp{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends rp{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const Yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gr extends rp{construct(e,t,r){return new Gr(e,t,r)}static isValidIdentifier(e){return Yb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Me(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Me(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Me(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Me(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gr(t)}static emptyPath(){return new Gr([])}}class pc{constructor(e){this.fields=e,e.sort(Gr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const Jb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(n){if(xt(!!n),"string"==typeof n){let e=0;const t=Jb.exec(n);if(xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(n.seconds),nanos:Qt(n.nanos)}}function Qt(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function so(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function o0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xb(n){const e=n.mapValue.fields.__previous_value__;return o0(e)?Xb(e):e}function Em(n){const e=Ka(n.mapValue.fields.__local_write_time__.timestampValue);return new ir(e.seconds,e.nanos)}class ip{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Za{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function Ya(n){return null==n}function sp(n){return 0===n&&1/n==-1/0}function a0(n){return"number"==typeof n&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(Jt.fromString(e))}static fromName(e){return new He(Jt.fromString(e).popFirst(5))}static empty(){return new He(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Jt(e.slice()))}}const eD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wm={nullValue:"NULL_VALUE"};function Ku(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o0(n)?4:nD(n)?9:10:nt()}function Vo(n,e){if(n===e)return!0;const t=Ku(n);if(t!==Ku(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Em(n).isEqual(Em(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Ka(r.timestampValue),c=Ka(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,so(n.bytesValue).isEqual(so(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Qt(r.geoPointValue.latitude)===Qt(i.geoPointValue.latitude)&&Qt(r.geoPointValue.longitude)===Qt(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Qt(r.integerValue)===Qt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Qt(r.doubleValue),c=Qt(i.doubleValue);return u===c?sp(u)===sp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Wd(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(r0(u)!==r0(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!Vo(u[f],c[f])))return!1;return!0}(n,e);default:return nt()}var i}function Zu(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function Ea(n,e){if(n===e)return 0;const t=Ku(n),r=Ku(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Qt(i.integerValue||i.doubleValue),f=Qt(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return MT(n.timestampValue,e.timestampValue);case 4:return MT(Em(n),Em(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=so(i),f=so(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const b=Pt(c[y],f[y]);if(0!==b)return b}return Pt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Pt(Qt(i.latitude),Qt(u.latitude));return 0!==c?c:Pt(Qt(i.longitude),Qt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const b=Ea(c[y],f[y]);if(b)return b}return Pt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},f=Object.keys(c),y=u.fields||{},b=Object.keys(y);f.sort(),b.sort();for(let S=0;S<f.length&&S<b.length;++S){const M=Pt(f[S],b[S]);if(0!==M)return M;const F=Ea(c[f[S]],y[b[S]]);if(0!==F)return F}return Pt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function MT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Ka(n),r=Ka(e),i=Pt(t.seconds,r.seconds);return 0!==i?i:Pt(t.nanos,r.nanos)}function gc(n){return u0(n)}function u0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ka(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?so(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=u0(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${u0(r.fields[f])}`;return u+"}"}(n.mapValue):nt();var e}function Yu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kd(n){return!!n&&"integerValue"in n}function Zd(n){return!!n&&"arrayValue"in n}function tD(n){return!!n&&"nullValue"in n}function bm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yd(n){return!!n&&"mapValue"in n}function Dm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xT(n){return"nullValue"in n?wm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yu(Za.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function rD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yu(Za.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?eD:nt()}function l0(n,e){return void 0===n?e:void 0===e||Ea(n,e)>0?n:e}function iD(n,e){return void 0===n?e:void 0===e||Ea(n,e)<0?n:e}class ii{constructor(e){this.value=e}static empty(){return new ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dm(t)}setAll(e){let t=Gr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Dm(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Yd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wa(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ii(Dm(this.value))}}function c0(n){const e=[];return Wa(n.fields,(t,r)=>{const i=new Gr([t]);if(Yd(r)){const u=c0(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new pc(e)}class xn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new xn(e,0,Ct.min(),Ct.min(),ii.empty(),0)}static newFoundDocument(e,t,r){return new xn(e,1,t,Ct.min(),r,0)}static newNoDocument(e,t){return new xn(e,2,t,Ct.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Ct.min(),ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Im{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cm(n){return n.fields.find(e=>2===e.kind)}function mc(n){return n.fields.filter(e=>2!==e.kind)}Im.UNKNOWN_ID=-1;class op{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qd(0,Qa.min())}}function d0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new ir(t+1,0):new ir(t,r));return new Qa(i,He.empty(),e)}function sD(n){return new Qa(n.readTime,n.key,-1)}class Qa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qa(Ct.min(),He.empty(),-1)}static max(){return new Qa(Ct.max(),He.empty(),-1)}}function RT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}class ox{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function h0(n,e=null,t=[],r=[],i=null,u=null,c=null){return new ox(n,e,t,r,i,u,c)}function Jd(n){const e=ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+gc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ya(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gc(r)).join(",")),e.P=t}return e.P}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lD(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!m0(n.startAt,e.startAt)&&m0(n.endAt,e.endAt)}function f0(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function p0(n,e){return n.filters.filter(t=>t instanceof Ii&&t.field.isEqual(e))}function NT(n,e,t){let r,i=!0;for(const u of p0(n,e)){let c,f=!0;switch(u.op){case"<":case"<=":c=xT(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=wm}l0(r,c)===c&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];l0(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function OT(n,e,t){let r,i=!0;for(const u of p0(n,e)){let c,f=!0;switch(u.op){case">=":case">":c=rD(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=eD}iD(r,c)===c&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];iD(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ii extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Am(e,t,r):"array-contains"===t?new aD(e,r):"in"===t?new uD(e,r):"not-in"===t?new lx(e,r):"array-contains-any"===t?new g0(e,r):new Ii(e,t,r)}static V(e,t,r){return"in"===t?new ux(e,r):new oD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ea(t,this.value)):null!==t&&Ku(this.value)===Ku(t)&&this.v(Ea(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Am extends Ii{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class ux extends Ii{constructor(e,t){super(e,"in",t),this.keys=Sm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oD extends Ii{constructor(e,t){super(e,"not-in",t),this.keys=Sm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class aD extends Ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zd(t)&&Zu(t.arrayValue,this.value)}}class uD extends Ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}class lx extends Ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}class g0 extends Ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zu(this.value.arrayValue,r))}}class Ja{constructor(e,t){this.position=e,this.inclusive=t}}class yc{constructor(e,t="asc"){this.field=e,this.dir=t}}function lD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):Ea(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function m0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class Xa{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function Mm(n,e,t,r,i,u,c,f){return new Xa(n,e,t,r,i,u,c,f)}function Xd(n){return new Xa(n)}function y0(n){return!Ya(n.limit)&&"F"===n.limitType}function _0(n){return!Ya(n.limit)&&"L"===n.limitType}function cD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function v0(n){for(const e of n.filters)if(e.S())return e.field;return null}function E0(n){return null!==n.collectionGroup}function eh(n){const e=ze(n);if(null===e.D){e.D=[];const t=v0(e),r=cD(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new yc(t)),e.D.push(new yc(Gr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new yc(Gr.keyField(),u))}}}return e.D}function Bo(n){const e=ze(n);if(!e.C)if("F"===e.limitType)e.C=h0(e.path,e.collectionGroup,eh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of eh(e))t.push(new yc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ja(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Ja(e.startAt.position,!e.startAt.inclusive):null;e.C=h0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function dD(n,e,t){return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _c(n,e){return Tm(Bo(n),Bo(e))&&n.limitType===e.limitType}function hD(n){return`${Jd(Bo(n))}|lt:${n.limitType}`}function Ts(n){return`Query(target=${function ax(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gc(r.value)}`;var r}).join(", ")}]`),Ya(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gc(t)).join(",")),`Target(${e})`}(Bo(n))}; limitType=${n.limitType})`}function w0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):He.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=kT(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,eh(t),r)||t.endAt&&!function(i,u,c){const f=kT(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,eh(t),r)));var t,r}function xm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fD(n){return(e,t)=>{let r=!1;for(const i of eh(n)){const u=PT(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function PT(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?Ea(f,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Rm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function b0(n){return{integerValue:""+n}}function D0(n,e){return a0(e)?b0(e):Rm(n,e)}class Nm{constructor(){this._=void 0}}function pD(n,e,t){return n instanceof th?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof eu?oo(n,e):n instanceof vc?FT(n,e):function(r,i){const u=mD(r,i),c=I0(u)+I0(r.k);return Kd(u)&&Kd(r.k)?b0(c):Rm(r.M,c)}(n,e)}function gD(n,e,t){return n instanceof eu?oo(n,e):n instanceof vc?FT(n,e):t}function mD(n,e){return n instanceof nh?Kd(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class th extends Nm{}class eu extends Nm{constructor(e){super(),this.elements=e}}function oo(n,e){const t=yD(e);for(const r of n.elements)t.some(i=>Vo(i,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends Nm{constructor(e){super(),this.elements=e}}function FT(n,e){let t=yD(e);for(const r of n.elements)t=t.filter(i=>!Vo(i,r));return{arrayValue:{values:t}}}class nh extends Nm{constructor(e,t){super(),this.M=e,this.k=t}}function I0(n){return Qt(n.integerValue||n.doubleValue)}function yD(n){return Zd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ap{constructor(e,t){this.field=e,this.transform=t}}class LT{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function up(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lp{}function VT(n,e,t){n instanceof rh?function(r,i,u){const c=r.value.clone(),f=A0(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ec?function(r,i,u){if(!up(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=A0(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(T0(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function C0(n,e,t){var i;n instanceof rh?function(r,i,u){if(!up(r.precondition,i))return;const c=r.value.clone(),f=ED(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(km(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ec?function(r,i,u){if(!up(r.precondition,i))return;const c=ED(r.fieldTransforms,u,i),f=i.data;f.setAll(T0(r)),f.setAll(c),i.convertToFoundDocument(km(i),f).setHasLocalMutations()}(n,e,t):up(n.precondition,i=e)&&i.convertToNoDocument(Ct.min())}function vD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=mD(r.transform,i||null);null!=u&&(null==t&&(t=ii.empty()),t.set(r.field,u))}return t||null}function Om(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wd(t,r,(i,u)=>function _D(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof eu&&r instanceof eu||t instanceof vc&&r instanceof vc?Wd(t.elements,r.elements,Vo):t instanceof nh&&r instanceof nh?Vo(t.k,r.k):t instanceof th&&r instanceof th);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function km(n){return n.isFoundDocument()?n.version:Ct.min()}class rh extends lp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ec extends lp{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function T0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function A0(n,e,t){const r=new Map;xt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,gD(c,f,t[i]))}return r}function ED(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,pD(u,c,e))}return r}class cp extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class wD extends lp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class cx{constructor(e){this.count=e}}var sr,tn;function bD(n){switch(n){default:return nt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function DD(n){if(void 0===n)return vn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case sr.OK:return ae.OK;case sr.CANCELLED:return ae.CANCELLED;case sr.UNKNOWN:return ae.UNKNOWN;case sr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case sr.INTERNAL:return ae.INTERNAL;case sr.UNAVAILABLE:return ae.UNAVAILABLE;case sr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case sr.NOT_FOUND:return ae.NOT_FOUND;case sr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case sr.ABORTED:return ae.ABORTED;case sr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case sr.DATA_LOSS:return ae.DATA_LOSS;default:return nt()}}(tn=sr||(sr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}class mr{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new S0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new S0(this.root,e,this.comparator,!1)}getReverseIterator(){return new S0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new S0(this.root,e,this.comparator,!0)}}class S0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ci.RED,this.left=null!=i?i:Ci.EMPTY,this.right=null!=u?u:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ID(this.data.getIterator())}getIteratorFrom(e){return new ID(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class ID{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tu(n){return n.hasNext()?n.getNext():void 0}const BT=new mr(He.comparator);function ao(){return BT}const CD=new mr(He.comparator);function nu(){return CD}function ih(){return new wc(n=>n.toString(),(n,e)=>n.isEqual(e))}const M0=new mr(He.comparator),x0=new Vn(He.comparator);function mn(...n){let e=x0;for(const t of n)e=e.add(t);return e}const R0=new Vn(Pt);function sh(){return R0}class Qu{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Pm.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qu(Ct.min(),r,sh(),ao(),mn())}}class Pm{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pm(Rr.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class N0{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class UT{constructor(e,t){this.targetId=e,this.$=t}}class jT{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class O0{constructor(){this.B=0,this.L=AD(),this.U=Rr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=mn(),t=mn(),r=mn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new Pm(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=AD()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class HT{constructor(e){this.nt=e,this.st=new Map,this.it=ao(),this.rt=TD(),this.ot=new Vn(Pt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(f0(u))if(0===r){const c=new He(u.path);this.ct(t,c,xn.newNoDocument(c,Ct.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&f0(f.target)){const y=new He(f.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,xn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=mn();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Qu(e,t,this.ot,this.it,r);return this.it=ao(),this.rt=TD(),this.ot=new Vn(Pt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new O0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Vn(Pt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new O0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function TD(){return new mr(He.comparator)}function AD(){return new mr(He.comparator)}const $T={asc:"ASCENDING",desc:"DESCENDING"},SD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class MD{constructor(e,t){this.databaseId=e,this.N=t}}function oh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xD(n,e){return n.N?e.toBase64():e.toUint8Array()}function GT(n,e){return oh(n,e.toTimestamp())}function Or(n){return xt(!!n),Ct.fromTimestamp(function(e){const t=Ka(e);return new ir(t.seconds,t.nanos)}(n))}function dp(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qT(n){const e=Jt.fromString(n);return xt(v(e)),e}function ah(n,e){return dp(n.databaseId,e.path)}function uo(n,e){const t=qT(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(zT(t))}function k0(n,e){return dp(n.databaseId,e)}function RD(n){const e=qT(n);return 4===e.length?Jt.emptyPath():zT(e)}function Fm(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zT(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function WT(n,e,t){return{name:ah(n,e),fields:t.value.mapValue.fields}}function ND(n,e,t){const r=uo(n,e.name),i=Or(e.updateTime),u=new ii({mapValue:{fields:e.fields}}),c=xn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Lm(n,e){let t;if(e instanceof rh)t={update:WT(n,e.key,e.value)};else if(e instanceof cp)t={delete:ah(n,e.key)};else if(e instanceof Ec)t={update:WT(n,e.key,e.data),updateMask:g(e.fieldMask)};else{if(!(e instanceof wD))return nt();t={verify:ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof th)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof nh)return{fieldPath:u.field.canonicalString(),increment:c.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:GT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function OD(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nr.updateTime(Or(i.updateTime)):void 0!==i.exists?Nr.exists(i.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),f=new th):"appendMissingElements"in c?f=new eu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new vc(c.removeAllFromArray.values||[]):"increment"in c?f=new nh(u,c.increment):nt();const y=Gr.fromServerFormat(c.fieldPath);return new ap(y,f)}(n,i)):[];var i;if(e.update){const i=uo(n,e.update.name),u=new ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new pc((e.updateMask.fieldPaths||[]).map(b=>Gr.fromServerFormat(b)));return new Ec(i,u,c,t,r)}return new rh(i,u,t,r)}if(e.delete){const i=uo(n,e.delete);return new cp(i,t)}if(e.verify){const i=uo(n,e.verify);return new wD(i,t)}return nt()}function ZT(n,e){return{documents:[k0(n,e.path)]}}function kD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=k0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=k0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(S=>function(M){if("=="===M.op){if(bm(M.value))return{unaryFilter:{field:o(M.field),op:"IS_NAN"}};if(tD(M.value))return{unaryFilter:{field:o(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(bm(M.value))return{unaryFilter:{field:o(M.field),op:"IS_NOT_NAN"}};if(tD(M.value))return{unaryFilter:{field:o(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:o(M.field),op:s(M.op),value:M.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:o((S=b).field),direction:px(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Ya(b)?b:{value:b});var b,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function YT(n){let e=RD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xt(1===r);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=QT(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new yc(a((M=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let f=null;t.limit&&(f=function(S){let M;return M="object"==typeof S?S.value:S,Ya(M)?null:M}(t.limit));let y=null;var S;t.startAt&&(y=new Ja((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Ja(S.values||[],!S.before)}(t.endAt)),Mm(e,i,c,u,f,"F",y,b)}function QT(n){return n?void 0!==n.unaryFilter?[d(n)]:void 0!==n.fieldFilter?[l(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>QT(e)).reduce((e,t)=>e.concat(t)):nt():[]}function px(n){return $T[n]}function s(n){return SD[n]}function o(n){return{fieldPath:n.canonicalString()}}function a(n){return Gr.fromServerFormat(n.fieldPath)}function l(n){return Ii.create(a(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function d(n){switch(n.unaryFilter.op){case"IS_NAN":const e=a(n.unaryFilter.field);return Ii.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=a(n.unaryFilter.field);return Ii.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=a(n.unaryFilter.field);return Ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=a(n.unaryFilter.field);return Ii.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function g(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function v(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function w(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=A(e)),e=D(n.get(t),e);return A(e)}function D(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function A(n){return n+"\x01\x01"}function x(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&nt(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:nt()}u=c+2}return new Jt(r)}const P=["userId","batchId"];function U(n,e){return[n,w(e)]}function Z(n,e,t){return[n,w(e),t]}const ye={},Fe=["prefixPath","collectionGroup","readTime","documentId"],$e=["prefixPath","collectionGroup","documentId"],it=["collectionGroup","readTime","prefixPath","documentId"],Ie=["canonicalId","targetId"],gt=["targetId","path"],Zt=["path","targetId"],yn=["collectionId","parent"],As=["indexId","uid"],bc=["uid","sequenceNumber"],P0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F0=["indexId","uid","orderedDocumentKey"],L0=["userId","collectionPath","documentId"],V0=["userId","collectionPath","largestBatchId"],B0=["userId","collectionGroup","largestBatchId"],Vm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U0=[...Vm,"documentOverlays"],Bm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],j0=[...Bm,"indexConfiguration","indexState","indexEntries"],gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class PD{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $r,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new H0(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=JT(r.target.error);this.At.reject(new H0(e,i))}}static open(e,t,r,i){try{return new PD(t,e.transaction(i,r))}catch(u){throw new H0(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ek(t)}}class ru{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===ru.Vt((0,Kt.z$)())&&vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),fp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Kt.hl)())return!1;if(ru.St())return!0;const e=(0,Kt.z$)(),t=ru.Vt(e),r=0<t&&t<10,i=ru.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new H0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Me(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Me(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new H0(e,f))},u.onupgradeneeded=c=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ve.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const y=PD.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(S=>(y.Pt(),S)).catch(S=>(y.abort(S),pe.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&f<3;if(Pe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class XO{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return fp(this.Ft.delete())}}class H0 extends Me{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hp(n){return"IndexedDbTransactionError"===n.name}class ek{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fp(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),fp(this.store.add(e))}get(e){return fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),fp(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),fp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new pe((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=u=>{const c=JT(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new pe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new XO(f),b=t(f.primaryKey,f.value,y);if(b instanceof pe){const S=b.catch(M=>(y.done(),pe.reject(M)));r.push(S)}y.isDone?i():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fp(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=JT(r.target.error);t(i)}})}let yx=!1;function JT(n){const e=ru.Vt((0,Kt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yx||(yx=!0,setTimeout(()=>{throw r},0)),r}}return n}class _x extends mx{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=ze(n);return ru.xt(t.Ht,e)}class XT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&VT(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&C0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&C0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ct.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Wd(this.mutations,e.mutations,(t,r)=>Om(t,r))&&Wd(this.baseMutations,e.baseMutations,(t,r)=>Om(t,r))}}class eA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xt(e.mutations.length===r.length);let i=M0;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new eA(e,t,r,i)}}class tA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uh{constructor(e,t,r,i,u=Ct.min(),c=Ct.min(),f=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new uh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new uh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vx{constructor(e){this.Jt=e}}function Ex(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ah(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:oh(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:pp(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:pp(e.version)}}var i,u;return r}function FD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function pp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gp(n){const e=new ir(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function Um(n,e){const t=(e.baseMutations||[]).map(u=>OD(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>OD(n.Jt,u)),i=ir.fromMillis(e.localWriteTimeMs);return new XT(e.batchId,i,t,r)}function $0(n){const e=gp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gp(n.lastLimboFreeSnapshotVersion):Ct.min();let r;var i;return void 0!==n.query.documents?(xt(1===(i=n.query).documents.length),r=Bo(Xd(RD(i.documents[0])))):r=Bo(YT(n.query)),new uh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function wx(n,e){const t=pp(e.snapshotVersion),r=pp(e.lastLimboFreeSnapshotVersion);let i;i=f0(e.target)?ZT(n.Jt,e.target):kD(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nA(n){const e=YT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dD(e,e.limit,"L"):e}function rA(n,e){return new tA(e.largestBatchId,OD(n.Jt,e.overlayMutation))}function bx(n,e){const t=e.path.lastSegment();return[n,w(e.path.popLast()),t]}class nk{getBundleMetadata(e,t){return Dx(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:gp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Dx(e).put({bundleId:(r=t).id,createTime:pp(Or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ix(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:nA(i.bundledQuery),readTime:gp(i.readTime)};var i})}saveNamedQuery(e,t){return Ix(e).put({name:(r=t).name,readTime:pp(Or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Dx(n){return Ti(n,"bundles")}function Ix(n){return Ti(n,"namedQueries")}class iA{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new iA(e,t.uid||"")}getOverlay(e,t){return G0(e).get(bx(this.userId,t)).next(r=>r?rA(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new tA(t,c);i.push(this.Xt(e,f))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(w(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(G0(e).Qt("collectionPathOverlayIndex",f))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ih(),u=w(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return G0(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const b=rA(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ih();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return G0(e).Wt({index:"collectionGroupOverlayIndex",range:f},(y,b,S)=>{const M=rA(this.M,b);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return G0(e).put(function(r,i,u){const[c,f,y]=bx(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Lm(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function G0(n){return Ti(n,"documentOverlays")}class mp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qt(e.integerValue));else if("doubleValue"in e){const r=Qt(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),sp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(so(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?nD(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function rk(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Cx(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=rk(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}mp.fe=new mp;class ik{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Cx(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Cx(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sk{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class ok{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class q0{constructor(){this.De=new ik,this.Ce=new sk(this.De),this.xe=new ok(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class lh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lh(this.indexId,this.documentKey,this.arrayValue,r)}}function yp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Tx(n.arrayValue,e.arrayValue),0!==t?t:(t=Tx(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function Tx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ak{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Cm(e);if(void 0!==t&&!this.Be(t))return!1;const r=mc(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class uk{constructor(){this.qe=new sA}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getFieldIndex(e,t){return pe.resolve(null)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class sA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(Jt.comparator)).toArray()}}const jm=new Uint8Array(0);class lk{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new sA,this.Ge=new wc(r=>Jd(r),(r,i)=>Tm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:w(i)};return Ax(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Zb(t),""],!1,!0);return Ax(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(x(c.parent))}return r})}addFieldIndex(e,t){const r=LD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=LD(e),i=VD(e),u=z0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=z0(e);let i=!0;const u=new Map;return pe.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=mn();const f=[];return pe.forEach(u,(y,b)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Ue=>`${Ue.fieldPath}:${Ue.kind}`).join(",")}`} to execute ${Jd(t)}`);const M=function(Ue,Je){const yt=Cm(Je);if(void 0===yt)return null;for(const Dt of p0(Ue,yt.fieldPath))switch(Dt.op){case"array-contains-any":return Dt.value.arrayValue.values||[];case"array-contains":return[Dt.value]}return null}(b,y),F=function(Ue,Je){const yt=new Map;for(const Dt of mc(Je))for(const Ht of p0(Ue,Dt.fieldPath))switch(Ht.op){case"==":case"in":yt.set(Dt.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return yt.set(Dt.fieldPath.canonicalString(),Ht.value),Array.from(yt.values())}return null}(b,y),B=function(Ue,Je){const yt=[];let Dt=!0;for(const Ht of mc(Je)){const Xn=0===Ht.kind?NT(Ue,Ht.fieldPath,Ue.startAt):OT(Ue,Ht.fieldPath,Ue.startAt);if(!Xn.value)return null;yt.push(Xn.value),Dt&&(Dt=Xn.inclusive)}return new Ja(yt,Dt)}(b,y),G=function(Ue,Je){const yt=[];let Dt=!0;for(const Ht of mc(Je)){const Xn=0===Ht.kind?OT(Ue,Ht.fieldPath,Ue.endAt):NT(Ue,Ht.fieldPath,Ue.endAt);if(!Xn.value)return null;yt.push(Xn.value),Dt&&(Dt=Xn.inclusive)}return new Ja(yt,Dt)}(b,y),te=this.je(y,b,B),we=this.je(y,b,G),We=this.We(y,b,F),Ke=this.ze(y.indexId,M,te,!!B&&B.inclusive,we,!!G&&G.inclusive,We);return pe.forEach(Ke,Ue=>r.Gt(Ue,t.limit).next(Je=>{Je.forEach(yt=>{const Dt=He.fromSegments(yt.documentKey);c.has(Dt)||(c=c.add(Dt),f.push(Dt))})}))}).next(()=>f)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let M=0;M<y;++M){const F=t?this.He(t[M/b]):jm,B=r?this.Je(e,F,r[M%b],i):this.Ye(e),G=u?this.Xe(e,F,u[M%b],c):this.Ye(e+1);S.push(...this.createRange(B,G,f.map(te=>this.Je(e,F,te,!0))))}return S}Je(e,t,r,i){const u=new lh(e,He.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new lh(e,He.empty(),t,r);return i?u.ke():u}Ye(e){return new lh(e,He.empty(),jm,jm)}getFieldIndex(e,t){const r=new ak(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(f=>r.$e(f));return c.sort((f,y)=>y.fields.length-f.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new q0;for(const i of mc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);mp.fe.Zt(u,c)}return r.Se()}He(e){const t=new q0;return mp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new q0;return mp.fe.Zt(Yu(this.databaseId,t),r.Ne(function(i){const u=mc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new q0);let u=0;for(const c of mc(e)){const f=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&Zd(f))i=this.nn(i,c,f);else{const b=y.Ne(c.kind);mp.fe.Zt(f,b)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new q0;y.seed(f.Se()),mp.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Ii&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LD(e),i=VD(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return pe.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(b,S){const M=S?new Qd(S.sequenceNumber,new Qa(gp(S.readTime),new He(x(S.documentKey)),S.largestBatchId)):Qd.empty(),F=b.fields.map(([B,G])=>new op(Gr.fromServerFormat(B),G));return new Im(b.indexId,b.collectionGroup,F,M)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LD(e),u=VD(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>pe.forEach(f,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:pp((F=r).readTime),documentKey:w(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),pe.forEach(f,y=>this.on(e,i,y).next(b=>{const S=this.un(u,y);return b.isEqual(S)?pe.resolve():this.an(e,u,y,b,S)}))))})}cn(e,t,r,i){return z0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return z0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=z0(e);let u=new Vn(yp);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new lh(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new Vn(yp);const i=this.Ze(t,e);if(null==i)return r;const u=Cm(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Zd(c))for(const f of c.arrayValue.values||[])r=r.add(new lh(t.indexId,e.key,this.He(f),i))}else r=r.add(new lh(t.indexId,e.key,jm,i));return r}an(e,t,r,i,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,b,S,M){const F=f.getIterator(),B=y.getIterator();let G=tu(F),te=tu(B);for(;G||te;){let we=!1,We=!1;if(G&&te){const Ke=b(G,te);Ke<0?We=!0:Ke>0&&(we=!0)}else null!=G?We=!0:we=!0;we?(S(te),te=tu(B)):We?(M(G),G=tu(F)):(G=tu(F),te=tu(B))}}(i,u,yp,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),pe.waitFor(c)}rn(e){let t=1;return VD(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>yp(c,f)).filter((c,f,y)=>!f||0!==yp(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=yp(c,e),y=yp(c,t);if(0===f)i[0]=e.ke();else if(f>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,jm,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,jm,[]]));return u}}function Ax(n){return Ti(n,"collectionParents")}function z0(n){return Ti(n,"indexEntries")}function LD(n){return Ti(n,"indexConfiguration")}function VD(n){return Ti(n,"indexState")}const Sx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lo(e,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Wt({range:c},(S,M,F)=>(f++,F.delete()));u.push(y.next(()=>{xt(1===f)}));const b=[];for(const S of t.mutations){const M=Z(e,S.key.path,t.batchId);u.push(i.delete(M)),b.push(S.key)}return pe.waitFor(u).next(()=>b)}function BD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}lo.DEFAULT_COLLECTION_PERCENTILE=10,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lo.DEFAULT=new lo(41943040,lo.DEFAULT_COLLECTION_PERCENTILE,lo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lo.DISABLED=new lo(-1,0,0);class oA{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new oA(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Hm(e),c=ch(e);return c.add({}).next(f=>{xt("number"==typeof f);const y=new XT(f,t,r,i),b=function(F,B,G){const te=G.baseMutations.map(We=>Lm(F.Jt,We)),we=G.mutations.map(We=>Lm(F.Jt,We));return{userId:B,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:te,mutations:we}}(this.M,this.userId,y),S=[];let M=new Vn((F,B)=>Pt(F.canonicalString(),B.canonicalString()));for(const F of i){const B=Z(this.userId,F.key.path,f);M=M.add(F.key.path.popLast()),S.push(c.put(b)),S.push(u.put(B,ye))}return M.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.ln[f]=y.keys()}),pe.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return ch(e).get(t).next(r=>r?(xt(r.userId===this.userId),Um(this.M,r)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ch(e).Wt({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(xt(f.batchId>=r),u=Um(this.M,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ch(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ch(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Um(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=U(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Hm(e).Wt({range:i},(c,f,y)=>{const[b,S,M]=c,F=x(S);if(b===this.userId&&t.path.isEqual(F))return ch(e).get(M).next(B=>{if(!B)throw nt();xt(B.userId===this.userId),u.push(Um(this.M,B))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Pt);const i=[];return t.forEach(u=>{const c=U(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=Hm(e).Wt({range:f},(b,S,M)=>{const[F,B,G]=b,te=x(B);F===this.userId&&u.path.isEqual(te)?r=r.add(G):M.done()});i.push(y)}),pe.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=U(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new Vn(Pt);return Hm(e).Wt({range:c},(y,b,S)=>{const[M,F,B]=y,G=x(F);M===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(B)):S.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(ch(e).get(u).next(c=>{if(null===c)throw nt();xt(c.userId===this.userId),r.push(Um(this.M,c))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Mx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Hm(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=x(u[1]);i.push(y)}else f.done()}).next(()=>{xt(0===i.length)})})}containsKey(e,t){return xx(e,this.userId,t)}wn(e){return Rx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xx(n,e,t){const r=U(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Hm(n).Wt({range:u,jt:!0},(f,y,b)=>{const[S,M,F]=f;S===e&&M===i&&(c=!0),b.done()}).next(()=>c)}function ch(n){return Ti(n,"mutations")}function Hm(n){return Ti(n,"documentMutations")}function Rx(n){return Ti(n,"mutationQueues")}class _p{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new _p(0)}static yn(){return new _p(-1)}}class ck{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new _p(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Ct.fromTimestamp(new ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$m(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return $m(e).Wt((c,f)=>{const y=$0(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>pe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return $m(e).Wt((r,i)=>{const u=$0(i);t(u)})}pn(e){return Nx(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}In(e,t){return Nx(e).put("targetGlobalKey",t)}Tn(e,t){return $m(e).put(wx(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $m(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const b=$0(f);Tm(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=dh(e);return t.forEach(c=>{const f=w(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=dh(e);return pe.forEach(t,u=>{const c=w(u.path);return pe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=dh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=dh(e);let u=mn();return i.Wt({range:r,jt:!0},(c,f,y)=>{const b=x(c[1]),S=new He(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=w(t.path),i=IDBKeyRange.bound([r],[Zb(r)],!1,!0);let u=0;return dh(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return $m(e).get(t).next(r=>r?$0(r):null)}}function $m(n){return Ti(n,"targets")}function Nx(n){return Ti(n,"targetGlobal")}function dh(n){return Ti(n,"targetDocuments")}function vp(n){return aA.apply(this,arguments)}function aA(){return aA=(0,ve.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==gx)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),aA.apply(this,arguments)}function Ox([n,e],[t,r]){const i=Pt(n,t);return 0===i?Pt(e,r):i}class dk{constructor(e){this.An=e,this.buffer=new Vn(Ox),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ox(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hk{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){hp(i)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield vp(i)}yield t.Sn(e)}))}}class fk{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(zi.A);const r=new dk(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Sx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sx):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,f=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),fc()<=qa.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${M} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class pk{constructor(e,t){this.db=e,this.garbageCollector=new fk(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return UD(e,r)}removeReference(e,t,r){return UD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return UD(e,t)}On(e,t){return function(r,i){let u=!1;return Rx(r).zt(c=>xx(r,c,i).next(f=>(f&&(u=!0),pe.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Ct.min()),dh(e).delete([0,w(c.path)])))});i.push(y)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return UD(e,t)}Mn(e,t){const r=dh(e);let i,u=zi.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:b})=>{0===c?(u!==zi.A&&t(new He(x(i)),u),u=b,i=y):u=zi.A}).next(()=>{u!==zi.A&&t(new He(x(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UD(n,e){return dh(n).put((r=n.currentSequenceNumber,{targetId:0,path:w(e.path),sequenceNumber:r}));var r}class kx{constructor(){this.changes=new wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gk{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ep(e).put(r)}removeEntry(e,t,r){return Ep(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],FD(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=xn.newInvalidDocument(t);return Ep(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(W0(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:xn.newInvalidDocument(t)};return Ep(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(W0(t))},(i,u)=>{r={document:this.$n(t,u),size:BD(u)}}).next(()=>r)}getEntries(e,t){let r=ao();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=ao(),i=new mr(He.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,BD(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return pe.resolve();let i=new Vn(Lx);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(W0(i.first()),W0(i.last())),c=i.getIterator();let f=c.getNext();return Ep(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const M=He.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&Lx(f,M)<0;)r(f,null),f=c.getNext();f&&f.isEqual(M)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?S.Ut(W0(f)):S.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ep(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=ao();for(const y of c){const b=this.$n(He.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=ao();const c=Fx(t,r),f=Fx(t,Qa.max());return Ep(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,b,S)=>{const M=this.$n(He.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&S.done()}).next(()=>u)}newChangeBuffer(e){return new mk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Px(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Fn(e,t){return Px(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function tk(n,e){let t;if(e.document)t=ND(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),i=gp(e.noDocument.readTime);t=xn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=He.fromSegments(e.unknownDocument.path),i=gp(e.unknownDocument.version);t=xn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ir(r[0],r[1]);return Ct.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Ct.min()))return r}return xn.newInvalidDocument(e)}}class mk extends kx{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new wc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((u,c)=>Pt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=Ex(this.Kn.M,c);i=i.add(u.path.popLast()),r+=BD(y)-f.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=Ex(this.Kn.M,c.convertToNoDocument(Ct.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Px(n){return Ti(n,"remoteDocumentGlobal")}function Ep(n){return Ti(n,"remoteDocumentsV14")}function W0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Fx(n,e){const t=e.documentKey.path.toArray();return[n,FD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Pt(t[u],r[u]),i)return i;return i=Pt(t.length,r.length),i||(i=Pt(t[t.length-2],r[r.length-2]),i||Pt(t[t.length-1],r[r.length-1]))}class yk{constructor(e){this.M=e}kt(e,t,r,i){const u=new PD("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",P,{unique:!0}),f.createObjectStore("documentMutations"),Vx(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Vx(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",P,{unique:!0});const S=y.store("mutations"),M=b.map(F=>S.put(F));return pe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:L0});y.createIndex("collectionPathOverlayIndex",V0,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",B0,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:Fe});y.createIndex("documentKeyIndex",$e),y.createIndex("collectionGroupIndex",it)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:As}).createIndex("sequenceNumberIndex",bc,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:P0}).createIndex("documentKeyIndex",F0,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=BD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>pe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>pe.forEach(f,y=>{xt(y.userId===u.userId);const b=Um(this.M,y);return Mx(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const y=new Jt(c),b=[0,w(y)];u.push(t.get(b).next(S=>S?pe.resolve():t.put({targetId:0,path:w(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:yn});const r=t.store("collectionParents"),i=new sA,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:w(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const y=new Jt(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,y],b)=>{const S=x(f);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=$0(i),c=wx(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(b=c,b.document?new He(Jt.fromString(b.document.name).popFirst(5)):b.noDocument?He.fromSegments(b.noDocument.path):b.unknownDocument?He.fromSegments(b.unknownDocument.path):nt()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(S))}).next(()=>pe.waitFor(i))}}function Vx(n){n.createObjectStore("targetDocuments",{keyPath:gt}).createIndex("documentTargetsIndex",Zt,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ie,{unique:!0}),n.createObjectStore("targetGlobal")}const uA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lA{constructor(e,t,r,i,u,c,f,y,b,S,M=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=S,this.ts=M,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!lA.vt())throw new Me(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pk(this,i),this.hs=t+"main",this.M=new vx(y),this.ls=new ru(this.hs,this.ts,new yk(this.M)),this.fs=new ck(this.referenceDelegate,this.M),this.ds=new gk(this.M),this._s=new nk,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&vn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ae.FAILED_PRECONDITION,uA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new zi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(hp(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return K0(e).get("owner").next(t=>pe.resolve(this.bs(t)))}Vs(e){return jD(e).delete(this.clientId)}vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return pe.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):K0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Me(ae.FAILED_PRECONDITION,uA);return!1}}return!(!this.networkEnabled||!this.inForeground)||jD(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _x(t,zi.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>jD(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return oA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new lk(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return iA.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?j0:13===c?Bm:12===c?U0:11===c?Vm:void nt();var c;let f;return this.ls.runTransaction(e,i,u,y=>(f=new _x(y,this.es?this.es.next():zi.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(ae.FAILED_PRECONDITION,gx);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}$s(e){return K0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ae.FAILED_PRECONDITION,uA)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return K0(e).put("owner",t)}static vt(){return ru.vt()}Rs(e){const t=K0(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(vn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Kt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){vn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function K0(n){return Ti(n,"owner")}function jD(n){return Ti(n,"clientMetadata")}function cA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class _k{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):E0(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new He(t)).next(r=>{let i=nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=nu();return this.indexManager.getCollectionParents(e,i).next(c=>pe.forEach(c,f=>{const y=(b=t,S=f.child(i),new Xa(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,y,r).next(b=>{b.forEach((S,M)=>{u=u.insert(S,M)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const y=f.key;let b=i.get(y);null==b&&(b=xn.newInvalidDocument(y),i=i.insert(y,b)),C0(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{w0(t,c)||(i=i.remove(u))}),i))}}class dA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=mn(),i=mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new dA(e,t.fromCache,r,i)}}class Bx{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ct.min())?this.ti(e,t):this.Zs.Ks(e,i).next(u=>{const c=this.ei(t,u);return(y0(t)||_0(t))&&this.ni(t.limitType,c,i,r)?this.ti(e,t):(fc()<=qa.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ts(t)),this.Zs.Qs(e,t,d0(r,-1)).next(f=>(c.forEach(y=>{f=f.insert(y.key,y)}),f)))});var u}ei(e,t){let r=new Vn(fD(e));return t.forEach((i,u)=>{w0(e,u)&&(r=r.add(u))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ti(e,t){return fc()<=qa.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ts(t)),this.Zs.Qs(e,t,Qa.min())}}class vk{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new mr(Pt),this.ri=new wc(u=>Jd(u),Tm),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new _k(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function Ux(n,e,t,r){return new vk(n,e,t,r)}function jx(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,ve.Z)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=mn();for(const b of i){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){f.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ci.Ks(r,y).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:f}))})})}),hA.apply(this,arguments)}function Ek(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,f,y,b){const S=y.batch,M=S.keys();let F=pe.resolve();return M.forEach(B=>{F=F.next(()=>b.getEntry(f,B)).next(G=>{const te=y.docVersions.get(B);xt(null!==te),G.version.compareTo(te)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),b.addEntry(G)))})}),F.next(()=>c.Bs.removeMutationBatch(f,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function Hx(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function wk(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const f=[];e.targetChanges.forEach((b,S)=>{const M=i.get(S);if(!M)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let F=M.withSequenceNumber(u.currentSequenceNumber);var B,G,te;e.targetMismatches.has(S)?F=F.withResumeToken(Rr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(S,F),G=F,te=b,(0===(B=M).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,F))});let y=ao();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push($x(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(Ct.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return pe.waitFor(f).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=i,u))}function $x(n,e,t){let r=mn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=ao();return t.forEach((c,f)=>{const y=i.get(c);f.isNoDocument()&&f.version.isEqual(Ct.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):Pe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",f.version)}),u})}function bk(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Gm(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,pe.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new uh(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function qm(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!hp(c))throw c;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),fA.apply(this,arguments)}function HD(n,e,t){const r=ze(n);let i=Ct.min(),u=mn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,b){const S=ze(f),M=S.ri.get(b);return void 0!==M?pe.resolve(S.ii.get(M)):S.fs.getTargetData(y,b)}(r,c,Bo(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?i:Ct.min(),t?u:mn())).next(f=>(zx(r,xm(e),f),{documents:f,li:u})))}function Gx(n,e){const t=ze(n),r=ze(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function qx(n,e){const t=ze(n),r=t.oi.get(e)||Ct.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,d0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zx(t,e,i),i))}function zx(n,e,t){let r=Ct.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function pA(){return pA=(0,ve.Z)(function*(n,e,t,r){const i=ze(n);let u=mn(),c=ao();for(const b of t){const S=e.fi(b.metadata.name);b.document&&(u=u.add(S));const M=e.di(b);M.setReadTime(e._i(b.metadata.readTime)),c=c.insert(S,M)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),y=yield Gm(i,(b=r,Bo(Xd(Jt.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>$x(b,f,c).next(S=>(f.apply(b),S)).next(S=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,u,y.targetId)).next(()=>i.ci.Gs(b,S)).next(()=>S)))}),pA.apply(this,arguments)}function Ik(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,ve.Z)(function*(n,e,t=mn()){const r=yield Gm(n,Bo(nA(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Or(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(Rr.EMPTY_BYTE_STRING,c);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),gA.apply(this,arguments)}class Ck{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return pe.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Or(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:nA(r.bundledQuery),readTime:Or(r.readTime)}),pe.resolve();var r}}class Tk{constructor(){this.overlays=new mr(He.comparator),this.gi=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=ih(),u=t.length+1,c=new He(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new mr((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=ih(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const f=ih(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>f.set(b,S)),!(f.size()>=i)););return pe.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new tA(t,r));let u=this.gi.get(t);void 0===u&&(u=mn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class mA{constructor(){this.yi=new Vn(Ai.pi),this.Ii=new Vn(Ai.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Ai(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new He(new Jt([])),r=new Ai(t,e),i=new Ai(t,e+1),u=[];return this.Ii.forEachInRange([r,i],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new He(new Jt([])),r=new Ai(t,e),i=new Ai(t,e+1);let u=mn();return this.Ii.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Ai(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return He.comparator(e.key,t.key)||Pt(e.vi,t.vi)}static Ti(e,t){return Pt(e.vi,t.vi)||He.comparator(e.key,t.key)}}class Ak{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Vn(Ai.pi)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.Si;this.Si++;const c=new XT(u,t,r,i);this.Bs.push(c);for(const f of i)this.Di=this.Di.add(new Ai(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),u=i<0?0:i;return pe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,i],c=>{const f=this.Ci(c.vi);u.push(f)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Pt);return t.forEach(i=>{const u=new Ai(i,0),c=new Ai(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],f=>{r=r.add(f.vi)})}),pe.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new Ai(new He(u),0);let f=new Vn(Pt);return this.Di.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(y.vi)),!0)},c),pe.resolve(this.Ni(f))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){xt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return pe.forEach(t.mutations,i=>{const u=new Ai(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Ai(t,0),i=this.Di.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Sk{constructor(e){this.Mi=e,this.docs=new mr(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=ao();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():xn.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=ao();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||RT(sD(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}Oi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Mk(this)}getSize(e){return pe.resolve(this.size)}}class Mk extends kx{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class xk{constructor(e){this.persistence=e,this.Fi=new wc(t=>Jd(t),Tm),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.$i=0,this.Bi=new mA,this.targetCount=0,this.Li=_p.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),pe.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new _p(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Fi.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),pe.waitFor(u).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.Bi.containsKey(t))}}class Rk{constructor(e,t){this.Ui={},this.overlays={},this.es=new zi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xk(this),this.indexManager=new uk,this.ds=new Sk(r=>this.referenceDelegate.qi(r)),this.M=new vx(t),this._s=new Ck(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new Ak(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new Nk(this.es.next());return this.referenceDelegate.Ki(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Qi(e,t){return pe.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Nk extends mx{constructor(e){super(),this.currentSequenceNumber=e}}class yA{constructor(e){this.persistence=e,this.ji=new mA,this.Wi=null}static zi(e){return new yA(e)}get Hi(){if(this.Wi)return this.Wi;throw nt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Hi,r=>{const i=He.fromPath(r);return this.Ji(e,i).next(u=>{u||t.removeEntry(i,Ct.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return pe.or([()=>pe.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Wx(n,e){return`firestore_clients_${n}_${e}`}function Kx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _A(n,e){return`firestore_targets_${n}_${e}`}class $D{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Me(i.error.code,i.error.message))),c?new $D(e,t,i.state,u):(vn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Me(r.error.code,r.error.message))),u?new Z0(e,r.state,i):(vn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=sh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=a0(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new GD(e,u):(vn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vA{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vA(t.clientId,t.onlineState):(vn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class EA{constructor(){this.activeTargetIds=sh()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wA{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new mr(Pt),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Wx(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new EA),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const u=e.getItem(Wx(e.persistenceKey,i));if(u){const c=GD.Yi(i,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_A(this.persistenceKey,e));if(r){const i=Z0.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_A(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void vn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(u){let c=zi.A;if(null!=u)try{const f=JSON.parse(u);xt("number"==typeof f),c=f}catch(f){vn("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==zi.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new $D(this.currentUser,e,t,r),u=Kx(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Xi())}Ir(e){const t=Kx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=_A(this.persistenceKey,e),u=new Z0(e,t,r);this.setItem(i,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return GD.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return $D.Yi(new ri(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return Z0.Yi(i,t)}mr(e){return vA.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),u=this.yr(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Fr(c,f).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=sh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Zx{constructor(){this.$r=new EA,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new EA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ok{Lr(e){}shutdown(){}}class Yx{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Pk{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Fk extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,u){const c=this.uo(e,t);Pe("RestConnection","Sending: ",c,r);const f={};return this.ao(f,i,u),this.co(e,c,f,r).then(y=>(Pe("RestConnection","Received: ",y),y),y=>{throw tp("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,i,u){return this.oo(e,t,r,i,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}uo(e,t){return`${this.io}/v1/${t}:${kk[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((u,c)=>{const f=new Ub;f.listenOnce(Lb.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ym.NO_ERROR:const b=f.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case ym.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),c(new Me(ae.DEADLINE_EXCEEDED,"Request time out"));break;case ym.HTTP_ERROR:const S=f.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",f.getResponseText()),S>0){const M=f.getResponseJson().error;if(M&&M.status&&M.message){const F=function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(G)>=0?G:ae.UNKNOWN}(M.status);c(new Me(F,M.message))}else c(new Me(ae.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Me(ae.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ep(),c=Fb(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Bb({})),this.ao(f.initMessageHeaders,t,r),(0,Kt.uI)()||(0,Kt.b$)()||(0,Kt.d)()||(0,Kt.w1)()||(0,Kt.Mn)()||(0,Kt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Pe("Connection","Creating WebChannel: "+y,f);const b=u.createWebChannel(y,f);let S=!1,M=!1;const F=new Pk({Wr:G=>{M?Pe("Connection","Not sending because WebChannel is closed:",G):(S||(Pe("Connection","Opening WebChannel transport."),b.open(),S=!0),Pe("Connection","WebChannel sending:",G),b.send(G))},zr:()=>b.close()}),B=(G,te,we)=>{G.listen(te,We=>{try{we(We)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return B(b,_m.EventType.OPEN,()=>{M||Pe("Connection","WebChannel transport opened.")}),B(b,_m.EventType.CLOSE,()=>{M||(M=!0,Pe("Connection","WebChannel transport closed"),F.no())}),B(b,_m.EventType.ERROR,G=>{M||(M=!0,tp("Connection","WebChannel transport errored:",G),F.no(new Me(ae.UNAVAILABLE,"The operation could not be completed")))}),B(b,_m.EventType.MESSAGE,G=>{var te;if(!M){const we=G.data[0];xt(!!we);const We=we,Ke=We.error||(null===(te=We[0])||void 0===te?void 0:te.error);if(Ke){Pe("Connection","WebChannel received error:",Ke);const Ue=Ke.status;let Je=function(Dt){const Ht=sr[Dt];if(void 0!==Ht)return DD(Ht)}(Ue),yt=Ke.message;void 0===Je&&(Je=ae.INTERNAL,yt="Unknown error status: "+Ue+" with message "+Ke.message),M=!0,F.no(new Me(Je,yt)),b.close()}else Pe("Connection","WebChannel received:",we),F.so(we)}}),B(c,Vb.STAT_EVENT,G=>{G.stat===t0.PROXY?Pe("Connection","Detected buffering proxy"):G.stat===t0.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.eo()},0),F}}function Qx(){return"undefined"!=typeof window?window:null}function qD(){return"undefined"!=typeof document?document:null}function Y0(n){return new MD(n,!0)}class bA{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Jx{constructor(e,t,r,i,u,c,f,y){this.Yn=e,this.Ro=r,this.Po=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new bA(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ve.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ve.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(vn(t.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new Me(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,ve.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lk extends Jx{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function dx(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(xt(void 0===b||"string"==typeof b),Rr.fromBase64String(b||"")):(xt(void 0===b||b instanceof Uint8Array),Rr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const b=void 0===y.code?ae.UNKNOWN:DD(y.code);return new Me(b,y.message||"")}(c);t=new jT(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=uo(n,r.document.name),u=Or(r.document.updateTime),c=new ii({mapValue:{fields:r.document.fields}}),f=xn.newFoundDocument(i,u,c);t=new N0(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=uo(n,r.document),u=r.readTime?Or(r.readTime):Ct.min(),c=xn.newNoDocument(i,u);t=new N0([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=uo(n,r.document);t=new N0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,u=new cx(r.count||0);t=new UT(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Ct.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?Or(u.readTime):Ct.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Fm(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=f0(f)?{documents:ZT(i,f)}:{query:kD(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=xD(i,u.resumeToken):u.snapshotVersion.compareTo(Ct.min())>0&&(c.readTime=oh(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function fx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Fm(this.M),t.removeTarget=e,this.Fo(t)}}class Vk extends Jx{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function hx(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,i){let u=Or(r.updateTime?r.updateTime:i);return u.isEqual(Ct.min())&&(u=Or(i)),new LT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.Yo(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Fm(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Lm(this.M,r))};this.Fo(t)}}class Bk extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Me(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.oo(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ae.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ho(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ae.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class Uk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(vn(t),this.iu=!1):Pe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class jk{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var y;hh(c)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,ve.Z)(function*(b){const S=ze(b);S.fu.add(4),yield zm(S),S.wu.set("Unknown"),S.fu.delete(4),yield Q0(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this.wu=new Uk(r,i)}}function Q0(n){return DA.apply(this,arguments)}function DA(){return DA=(0,ve.Z)(function*(n){if(hh(n))for(const e of n.du)yield e(!0)}),DA.apply(this,arguments)}function zm(n){return IA.apply(this,arguments)}function IA(){return IA=(0,ve.Z)(function*(n){for(const e of n.du)yield e(!1)}),IA.apply(this,arguments)}function zD(n,e){const t=ze(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),AA(t)?TA(t):Km(t).xo()&&CA(t,e))}function J0(n,e){const t=ze(n),r=Km(t);t.lu.delete(e),r.xo()&&Xx(t,e),0===t.lu.size&&(r.xo()?r.Mo():hh(t)&&t.wu.set("Unknown"))}function CA(n,e){n.mu.Z(e.targetId),Km(n).jo(e)}function Xx(n,e){n.mu.Z(e),Km(n).Wo(e)}function TA(n){n.mu=new HT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Km(n).start(),n.wu.ru()}function AA(n){return hh(n)&&!Km(n).Co()&&n.lu.size>0}function hh(n){return 0===ze(n).fu.size}function eR(n){n.mu=void 0}function Hk(n){return SA.apply(this,arguments)}function SA(){return SA=(0,ve.Z)(function*(n){n.lu.forEach((e,t)=>{CA(n,e)})}),SA.apply(this,arguments)}function $k(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,ve.Z)(function*(n,e){eR(n),AA(n)?(n.wu.au(e),TA(n)):n.wu.set("Unknown")}),MA.apply(this,arguments)}function Gk(n,e,t){return xA.apply(this,arguments)}function xA(){return xA=(0,ve.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof jT&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WD(n,r)}else if(e instanceof N0?n.mu.ut(e):e instanceof UT?n.mu._t(e):n.mu.ht(e),!t.isEqual(Ct.min()))try{const r=yield Hx(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.mu.yt(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(y);b&&i.lu.set(y,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.lu.get(f);if(!y)return;i.lu.set(f,y.withResumeToken(Rr.EMPTY_BYTE_STRING,y.snapshotVersion)),Xx(i,f);const b=new uh(y.target,f,1,y.sequenceNumber);CA(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield WD(n,r)}var r}),xA.apply(this,arguments)}function WD(n,e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,ve.Z)(function*(n,e,t){if(!hp(e))throw e;n.fu.add(1),yield zm(n),n.wu.set("Offline"),t||(t=()=>Hx(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Q0(n)}))}),RA.apply(this,arguments)}function tR(n,e){return e().catch(t=>WD(n,t,e))}function Wm(n){return NA.apply(this,arguments)}function NA(){return NA=(0,ve.Z)(function*(n){const e=ze(n),t=fh(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;qk(e);)try{const i=yield bk(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,zk(e,i)}catch(i){yield WD(e,i)}nR(e)&&rR(e)}),NA.apply(this,arguments)}function qk(n){return hh(n)&&n.hu.length<10}function zk(n,e){n.hu.push(e);const t=fh(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function nR(n){return hh(n)&&!fh(n).Co()&&n.hu.length>0}function rR(n){fh(n).start()}function Wk(n){return OA.apply(this,arguments)}function OA(){return OA=(0,ve.Z)(function*(n){fh(n).Zo()}),OA.apply(this,arguments)}function Kk(n){return kA.apply(this,arguments)}function kA(){return kA=(0,ve.Z)(function*(n){const e=fh(n);for(const t of n.hu)e.Jo(t.mutations)}),kA.apply(this,arguments)}function Zk(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,ve.Z)(function*(n,e,t){const r=n.hu.shift(),i=eA.from(r,e,t);yield tR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wm(n)}),PA.apply(this,arguments)}function Yk(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,ve.Z)(function*(n,e){var t;e&&fh(n).Ho&&(yield(t=(0,ve.Z)(function*(r,i){if(bD(u=i.code)&&u!==ae.ABORTED){const c=r.hu.shift();fh(r).ko(),yield tR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Wm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),nR(n)&&rR(n)}),FA.apply(this,arguments)}function iR(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ve.Z)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=hh(t);t.fu.add(3),yield zm(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Q0(t)}),LA.apply(this,arguments)}function VA(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,ve.Z)(function*(n,e){const t=ze(n);e?(t.fu.delete(2),yield Q0(t)):e||(t.fu.add(2),yield zm(t),t.wu.set("Unknown"))}),BA.apply(this,arguments)}function Km(n){return n.gu||(n.gu=function(e,t,r){const i=ze(e);return i.eu(),new Lk(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:Hk.bind(null,n),Yr:$k.bind(null,n),Qo:Gk.bind(null,n)}),n.du.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.ko(),AA(n)?TA(n):n.wu.set("Unknown")):(yield n.gu.stop(),eR(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function fh(n){return n.yu||(n.yu=function(e,t,r){const i=ze(e);return i.eu(),new Vk(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:Wk.bind(null,n),Yr:Yk.bind(null,n),Xo:Kk.bind(null,n),Yo:Zk.bind(null,n)}),n.du.push(function(){var e=(0,ve.Z)(function*(t){t?(n.yu.ko(),yield Wm(n)):(yield n.yu.stop(),n.hu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class UA{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new UA(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(vn("AsyncQueue",`${e}: ${n}`),hp(n))return new Me(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Ym{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=nu(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ym;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sR{constructor(){this.pu=new mr(He.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):nt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qm{constructor(e,t,r,i,u,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Qm(e,t,Ym.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Qk{constructor(){this.Tu=void 0,this.listeners=[]}}class Jk{constructor(){this.queries=new wc(e=>hD(e),_c),this.onlineState="Unknown",this.Eu=new Set}}function jA(n,e){return HA.apply(this,arguments)}function HA(){return HA=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new Qk),i)try{u.Tu=yield t.onListen(r)}catch(c){const f=Zm(c,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&qA(t)}),HA.apply(this,arguments)}function $A(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),GA.apply(this,arguments)}function Xk(n,e){const t=ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Ru(i)&&(r=!0);c.Tu=i}}r&&qA(t)}function eP(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function qA(n){n.Eu.forEach(e=>{e.next()})}class zA{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class tP{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class oR{constructor(e){this.M=e}fi(e){return uo(this.M,e)}di(e){return e.metadata.exists?ND(this.M,e.document,!1):xn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Or(e)}}class nP{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=aR(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new oR(this.M);for(const i of e)if(i.metadata.queries){const u=r.fi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||mn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function Dk(n,e,t,r){return pA.apply(this,arguments)}(e.localStore,new oR(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield Ik(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function aR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class uR{constructor(e){this.key=e}}class lR{constructor(e){this.key=e}}class cR{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=mn(),this.mutatedKeys=mn(),this.Uu=fD(e),this.qu=new Ym(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new sR,i=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y=y0(this.query)&&i.size===this.query.limit?i.last():null,b=_0(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((S,M)=>{const F=i.get(S),B=w0(this.query,M)?M:null,G=!!F&&this.mutatedKeys.has(F.key),te=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let we=!1;F&&B?F.data.isEqual(B.data)?G!==te&&(r.track({type:3,doc:B}),we=!0):this.ju(F,B)||(r.track({type:2,doc:B}),we=!0,(y&&this.Uu(B,y)>0||b&&this.Uu(B,b)<0)&&(f=!0)):!F&&B?(r.track({type:0,doc:B}),we=!0):F&&!B&&(r.track({type:1,doc:F}),we=!0,(y||b)&&(f=!0)),we&&(B?(c=c.add(B),u=te?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),y0(this.query)||_0(this.query))for(;c.size>this.query.limit;){const S=y0(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:f,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,S)=>function(M,F){const B=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return B(M)-B(F)}(b.type,S.type)||this.Uu(b.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],f=0===this.Lu.size&&this.current?1:0,y=f!==this.Bu;return this.Bu=f,0!==u.length||y?{snapshot:new Qm(this.query,e.qu,i,u,e.mutatedKeys,0===f,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new sR,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=mn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new lR(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new uR(r))}),t}Yu(e){this.$u=e.li,this.Lu=mn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Qm.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class rP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iP{constructor(e){this.key=e,this.Zu=!1}}class sP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new wc(f=>hD(f),_c),this.na=new Map,this.sa=new Set,this.ia=new mr(He.comparator),this.ra=new Map,this.oa=new mA,this.ua={},this.aa=new Map,this.ca=_p.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function oP(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ve.Z)(function*(n,e){const t=mS(n);let r,i;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Xu();else{const c=yield Gm(t.localStore,Bo(e));t.isPrimaryClient&&zD(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield KA(t,e,r,"current"===f)}return i}),WA.apply(this,arguments)}function KA(n,e,t,r){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ve.Z)(function*(n,e,t,r){n.la=(S,M,F)=>{return(B=(0,ve.Z)(function*(G,te,we,We){let Ke=te.view.Gu(we);Ke.ni&&(Ke=yield HD(G.localStore,te.query,!1).then(({documents:yt})=>te.view.Gu(yt,Ke)));const Ue=We&&We.targetChanges.get(te.targetId),Je=te.view.applyChanges(Ke,G.isPrimaryClient,Ue);return sS(G,te.targetId,Je.Hu),Je.snapshot}),function(G,te,we,We){return B.apply(this,arguments)})(n,S,M,F);var B};const i=yield HD(n.localStore,e,!0),u=new cR(e,i.li),c=u.Gu(i.documents),f=Pm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,f);sS(n,t,y.Hu);const b=new rP(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot}),ZA.apply(this,arguments)}function aP(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,ve.Z)(function*(n,e){const t=ze(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(u=>!_c(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),J0(t.remoteStore,r.targetId),Jm(t,r.targetId)}).catch(vp))):(Jm(t,r.targetId),yield qm(t.localStore,r.targetId,!0))}),YA.apply(this,arguments)}function QA(){return QA=(0,ve.Z)(function*(n,e,t){const r=yS(n);try{const i=yield function(u,c){const f=ze(u),y=ir.now(),b=c.reduce((M,F)=>M.add(F.key),mn());let S;return f.persistence.runTransaction("Locally write mutations","readwrite",M=>f.ci.Ks(M,b).next(F=>{S=F;const B=[];for(const G of c){const te=vD(G,S.get(G.key));null!=te&&B.push(new Ec(G.key,te,c0(te.value.mapValue),Nr.exists(!0)))}return f.Bs.addMutationBatch(M,y,B,c)})).then(M=>(M.applyToLocalDocumentSet(S),{batchId:M.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.ua[u.currentUser.toKey()];y||(y=new mr(Pt)),y=y.insert(c,f),u.ua[u.currentUser.toKey()]=y}(r,i.batchId,t),yield Dc(r,i.changes),yield Wm(r.remoteStore)}catch(i){const u=Zm(i,"Failed to persist write");t.reject(u)}}),QA.apply(this,arguments)}function dR(n,e){return JA.apply(this,arguments)}function JA(){return JA=(0,ve.Z)(function*(n,e){const t=ze(n);try{const r=yield wk(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ra.get(u);c&&(xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Zu=!0:i.modifiedDocuments.size>0?xt(c.Zu):i.removedDocuments.size>0&&(xt(c.Zu),c.Zu=!1))}),yield Dc(t,r,e)}catch(r){yield vp(r)}}),JA.apply(this,arguments)}function hR(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((u,c)=>{const f=c.view.Au(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=ze(u);f.onlineState=c;let y=!1;f.queries.forEach((b,S)=>{for(const M of S.listeners)M.Au(c)&&(y=!0)}),y&&qA(f)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lP(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,ve.Z)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),u=i&&i.key;if(u){let c=new mr(He.comparator);c=c.insert(u,xn.newNoDocument(u,Ct.min()));const f=mn().add(u),y=new Qu(Ct.min(),new Map,new Vn(Pt),c,f);yield dR(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),oS(r)}else yield qm(r.localStore,e,!1).then(()=>Jm(r,e,t)).catch(vp)}),XA.apply(this,arguments)}function cP(n,e){return eS.apply(this,arguments)}function eS(){return eS=(0,ve.Z)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield Ek(t.localStore,e);iS(t,r,null),rS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,i)}catch(i){yield vp(i)}}),eS.apply(this,arguments)}function dP(n,e,t){return tS.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n,e,t){const r=ze(n);try{const i=yield function(u,c){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return f.Bs.lookupMutationBatch(y,c).next(S=>(xt(null!==S),b=S.keys(),f.Bs.removeMutationBatch(y,S))).next(()=>f.Bs.performConsistencyCheck(y)).next(()=>f.ci.Ks(y,b))})}(r.localStore,e);iS(r,e,t),rS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,i)}catch(i){yield vp(i)}}),tS.apply(this,arguments)}function nS(){return nS=(0,ve.Z)(function*(n,e){const t=ze(n);hh(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=Zm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),nS.apply(this,arguments)}function rS(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function iS(n,e,t){const r=ze(n);let i=r.ua[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||fR(n,r)})}function fR(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(J0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),oS(n))}function sS(n,e,t){for(const r of t)r instanceof uR?(n.oa.addReference(r.key,e),fP(n,r)):r instanceof lR?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||fR(n,r.key)):nt()}function fP(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.sa.add(r),oS(n))}function oS(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new He(Jt.fromString(e)),r=n.ca.next();n.ra.set(r,new iP(t)),n.ia=n.ia.insert(t,r),zD(n.remoteStore,new uh(Bo(Xd(t.path)),r,2,zi.A))}}function Dc(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=[],u=[],c=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,y)=>{c.push(r.la(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const S=dA.Ys(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(i),yield(f=(0,ve.Z)(function*(y,b){const S=ze(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>pe.forEach(b,F=>pe.forEach(F.Hs,B=>S.persistence.referenceDelegate.addReference(M,F.targetId,B)).next(()=>pe.forEach(F.Js,B=>S.persistence.referenceDelegate.removeReference(M,F.targetId,B)))))}catch(M){if(!hp(M))throw M;Pe("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const F=M.targetId;if(!M.fromCache){const B=S.ii.get(F),te=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.ii=S.ii.insert(F,te)}}}),function(y,b){return f.apply(this,arguments)})(r.localStore,u))}),aS.apply(this,arguments)}function pP(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,ve.Z)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield jx(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(c=>{c.forEach(f=>{f.reject(new Me(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.hi)}var i}),uS.apply(this,arguments)}function gP(n,e){const t=ze(n),r=t.ra.get(e);if(r&&r.Zu)return mn().add(r.key);{let i=mn();const u=t.na.get(e);if(!u)return i;for(const c of u){const f=t.ea.get(c);i=i.unionWith(f.view.Ku)}return i}}function mP(n,e){return lS.apply(this,arguments)}function lS(){return lS=(0,ve.Z)(function*(n,e){const t=ze(n),r=yield HD(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&sS(t,e.targetId,i.Hu),i}),lS.apply(this,arguments)}function yP(n,e){return cS.apply(this,arguments)}function cS(){return cS=(0,ve.Z)(function*(n,e){const t=ze(n);return qx(t.localStore,e).then(r=>Dc(t,r))}),cS.apply(this,arguments)}function _P(n,e,t,r){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n,e,t,r){const i=ze(n),u=yield function(c,f){const y=ze(c),b=ze(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,f).next(M=>M?y.ci.Ks(S,M):pe.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield Wm(i.remoteStore):"acknowledged"===t||"rejected"===t?(iS(i,e,r||null),rS(i,e),f=e,ze(ze(i.localStore).Bs)._n(f)):nt(),yield Dc(i,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),dS.apply(this,arguments)}function hS(){return hS=(0,ve.Z)(function*(n,e){const t=ze(n);if(mS(t),yS(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pR(t,r.toArray());t.ha=!0,yield VA(t.remoteStore,!0);for(const u of i)zD(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Jm(t,c),qm(t.localStore,c,!0))),J0(t.remoteStore,c)}),yield i,yield pR(t,r),function(u){const c=ze(u);c.ra.forEach((f,y)=>{J0(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new mr(He.comparator)}(t),t.ha=!1,yield VA(t.remoteStore,!1)}}),hS.apply(this,arguments)}function pR(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,ve.Z)(function*(n,e,t){const r=ze(n),i=[],u=[];for(const c of e){let f;const y=r.na.get(c);if(y&&0!==y.length){f=yield Gm(r.localStore,Bo(y[0]));for(const b of y){const S=r.ea.get(b),M=yield mP(r,S);M.snapshot&&u.push(M.snapshot)}}else{const b=yield Gx(r.localStore,c);f=yield Gm(r.localStore,b),yield KA(r,gR(b),c,!1)}i.push(f)}return r.ta.Qo(u),i}),fS.apply(this,arguments)}function gR(n){return Mm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EP(n){const e=ze(n);return ze(ze(e.localStore).persistence).Fs()}function wP(n,e,t,r){return pS.apply(this,arguments)}function pS(){return pS=(0,ve.Z)(function*(n,e,t,r){const i=ze(n);if(i.ha)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=i.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield qx(i.localStore,xm(u[0])),f=Qu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Dc(i,c,f);break}case"rejected":yield qm(i.localStore,e,!0),Jm(i,e,r);break;default:nt()}}),pS.apply(this,arguments)}function bP(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=(0,ve.Z)(function*(n,e,t){const r=mS(n);if(r.ha){for(const i of e){if(r.na.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const u=yield Gx(r.localStore,i),c=yield Gm(r.localStore,u);yield KA(r,gR(u),c.targetId,!1),zD(r.remoteStore,c)}for(const i of t)r.na.has(i)&&(yield qm(r.localStore,i,!1).then(()=>{J0(r.remoteStore,i),Jm(r,i)}).catch(vp))}}),gS.apply(this,arguments)}function mS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.ta.Qo=Xk.bind(null,e.eventManager),e.ta.fa=eP.bind(null,e.eventManager),e}function yS(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}class mR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=Y0(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return Ux(this.persistence,new Bx,e.initialUser,this.M)}wa(e){return new Rk(yA.zi,this.M)}_a(e){return new Zx}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yR extends mR{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield yS(r.ya.syncEngine),yield Wm(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return Ux(this.persistence,new Bx,e.initialUser,this.M)}ma(e){return new hk(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=cA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?lo.withCacheSize(this.cacheSizeBytes):lo.DEFAULT;return new lA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Qx(),qD(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Zx}}class IP extends yR{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof wA&&(r.sharedClientState.syncEngine={Mr:_P.bind(null,i),Or:wP.bind(null,i),Fr:bP.bind(null,i),Fs:EP.bind(null,i),kr:yP.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ve.Z)(function*(c){yield function vP(n,e){return hS.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=Qx();if(!wA.vt(t))throw new Me(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _S{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hR(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pP.bind(null,r.syncEngine),yield VA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Jk}createDatastore(e){const t=Y0(e.databaseInfo.databaseId),r=new Fk(e.databaseInfo);return new Bk(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>hR(this.syncEngine,f,0),c=Yx.vt()?new Yx:new Ok,new jk(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,b){const S=new sP(r,i,u,c,f,y);return b&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=ze(t);Pe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield zm(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _R(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class KD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class CP{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $r,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new tP(JSON.parse(u),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ve.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class TP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(u,c){const f=ze(u),y=Fm(f.M)+"/documents",b={documents:c.map(B=>ah(f.M,B))},S=yield f.ho("BatchGetDocuments",y,b),M=new Map;S.forEach(B=>{const G=function KT(n,e){return"found"in e?function(t,r){xt(!!r.found);const i=uo(t,r.found.name),u=Or(r.found.updateTime),c=new ii({mapValue:{fields:r.found.fields}});return xn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const i=uo(t,r.missing),u=Or(r.readTime);return xn.newNoDocument(i,u)}(n,e):nt()}(f.M,B);M.set(G.key.toString(),G)});const F=[];return c.forEach(B=>{const G=M.get(B.toString());xt(!!G),F.push(G)}),F}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new cp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=He.fromPath(i);e.mutations.push(new wD(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(i,u){const c=ze(i),f=Fm(c.M)+"/documents",y={writes:u.map(b=>Lm(c.M,b))};yield c.oo("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Ct.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ct.min()))throw new Me(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class AP{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new bA(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ve.Z)(function*(){const t=new TP(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.xa(u)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!Ya(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bD(t)}return!1}}class SP{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=vm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ve.Z)(function*(f){Pe("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Pe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vR(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(u){r.isEqual(u)||(yield jx(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vS.apply(this,arguments)}function ER(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wS(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>iR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>iR(e.remoteStore,u)),n.onlineComponents=e}),ES.apply(this,arguments)}function wS(n){return bS.apply(this,arguments)}function bS(){return bS=(0,ve.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield vR(n,new mR)),n.offlineComponents}),bS.apply(this,arguments)}function ZD(n){return DS.apply(this,arguments)}function DS(){return DS=(0,ve.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield ER(n,new _S)),n.onlineComponents}),DS.apply(this,arguments)}function wR(n){return wS(n).then(e=>e.persistence)}function IS(n){return wS(n).then(e=>e.localStore)}function bR(n){return ZD(n).then(e=>e.remoteStore)}function CS(n){return ZD(n).then(e=>e.syncEngine)}function Xm(n){return TS.apply(this,arguments)}function TS(){return TS=(0,ve.Z)(function*(n){const e=yield ZD(n),t=e.eventManager;return t.onListen=oP.bind(null,e.syncEngine),t.onUnlisten=aP.bind(null,e.syncEngine),t}),TS.apply(this,arguments)}function DR(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,f,y){const b=new KD({next:M=>{u.enqueueAndForget(()=>$A(i,S));const F=M.docs.has(c);!F&&M.fromCache?y.reject(new Me(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&M.fromCache&&f&&"server"===f.source?y.reject(new Me(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new zA(Xd(c.path),b,{includeMetadataChanges:!0,Cu:!0});return jA(i,S)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function IR(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,u,c,f,y){const b=new KD({next:M=>{u.enqueueAndForget(()=>$A(i,S)),M.fromCache&&"server"===f.source?y.reject(new Me(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),S=new zA(c,b,{includeMetadataChanges:!0,Cu:!0});return jA(i,S)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}const CR=new Map;function AS(n,e,t){if(!t)throw new Me(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TR(n,e,t,r){if(!0===e&&!0===r)throw new Me(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AR(n){if(!He.isDocumentKey(n))throw new Me(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SR(n){if(He.isDocumentKey(n))throw new Me(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YD(n);throw new Me(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MR(n,e){if(e<=0)throw new Me(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,TR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class X0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xR({}),this._settingsFrozen=!1,e instanceof Za?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $b;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ST(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=CR.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),CR.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Ju extends is{constructor(e,t,r){super(e,t,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new He(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function RR(n,e,...t){if(n=(0,Kt.m9)(n),AS("collection","path",e),n instanceof X0){const r=Jt.fromString(e,...t);return SR(r),new Ju(n,null,r)}{if(!(n instanceof zn||n instanceof Ju))throw new Me(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return SR(r),new Ju(n.firestore,null,r)}}function QD(n,e,...t){if(n=(0,Kt.m9)(n),1===arguments.length&&(e=vm.R()),AS("doc","path",e),n instanceof X0){const r=Jt.fromString(e,...t);return AR(r),new zn(n,null,new He(r))}{if(!(n instanceof zn||n instanceof Ju))throw new Me(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return AR(r),new zn(n.firestore,n instanceof Ju?n.converter:null,new He(r))}}function NR(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),(n instanceof zn||n instanceof Ju)&&(e instanceof zn||e instanceof Ju)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OR(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&_c(n._query,e._query)&&n.converter===e.converter}class BP{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new bA(this,"async_queue_retry"),this.qa=()=>{const t=qD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=qD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=qD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $r;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!hp(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,vn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=UA.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(i),i}Ka(){this.$a&&nt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function SS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class UP{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends X0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new BP,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||kR(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||kR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ip(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new SP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function PR(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield vR(n,t),yield ER(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function FR(n){if(n._initialized||n._terminated)throw new Me(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xu(Rr.fromBase64String(e))}catch(t){throw new Me(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xu(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wp{constructor(e){this._methodName=e}}class JD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const YP=/^__.*__$/;class QP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new rh(e,this.data,t,this.fieldTransforms)}}class LR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class XD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new XD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return nI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(VR(this.Xa)&&YP.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class JP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Y0(e)}ac(e,t,r,i=!1){return new XD({Xa:e,methodName:t,uc:r,path:Gr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function bp(n){const e=n._freezeSettings(),t=Y0(n._databaseId);return new JP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eI(n,e,t,r,i,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,i);NS("Data must be an object, but it was:",c,r);const f=jR(r,c);let y,b;if(u.merge)y=new pc(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const M of u.mergeFields){const F=OS(e,M,t);if(!c.contains(F))throw new Me(ae.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);$R(S,F)||S.push(F)}y=new pc(S),b=c.fieldTransforms.filter(M=>y.covers(M.field))}else y=null,b=c.fieldTransforms;return new QP(new ii(f),y,b)}class eE extends wp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eE}}function BR(n,e,t){return new XD({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class MS extends wp{_toFieldTransform(e){return new ap(e.path,new th)}isEqual(e){return e instanceof MS}}class XP extends wp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=BR(this,e,!0),r=this.cc.map(u=>Dp(u,t)),i=new eu(r);return new ap(e.path,i)}isEqual(e){return this===e}}class e1 extends wp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=BR(this,e,!0),r=this.cc.map(u=>Dp(u,t)),i=new vc(r);return new ap(e.path,i)}isEqual(e){return this===e}}class t1 extends wp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new nh(e.M,D0(e.M,this.hc));return new ap(e.path,t)}isEqual(e){return this===e}}function xS(n,e,t,r){const i=n.ac(1,e,t);NS("Data must be an object, but it was:",i,r);const u=[],c=ii.empty();Wa(r,(y,b)=>{const S=tI(e,y,t);b=(0,Kt.m9)(b);const M=i.sc(S);if(b instanceof eE)u.push(S);else{const F=Dp(b,M);null!=F&&(u.push(S),c.set(S,F))}});const f=new pc(u);return new LR(c,f,i.fieldTransforms)}function RS(n,e,t,r,i,u){const c=n.ac(1,e,t),f=[OS(e,r,t)],y=[i];if(u.length%2!=0)throw new Me(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)f.push(OS(e,u[F])),y.push(u[F+1]);const b=[],S=ii.empty();for(let F=f.length-1;F>=0;--F)if(!$R(b,f[F])){const B=f[F];let G=y[F];G=(0,Kt.m9)(G);const te=c.sc(B);if(G instanceof eE)b.push(B);else{const we=Dp(G,te);null!=we&&(b.push(B),S.set(B,we))}}const M=new pc(b);return new LR(S,M,c.fieldTransforms)}function UR(n,e,t,r=!1){return Dp(t,n.ac(r?4:3,e))}function Dp(n,e){if(HR(n=(0,Kt.m9)(n)))return NS("Unsupported field value:",e,n),jR(n,e);if(n instanceof wp)return function(t,r){if(!VR(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=Dp(c,r.ic(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Kt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return D0(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ir.fromDate(t);return{timestampValue:oh(r.M,i)}}if(t instanceof ir){const i=new ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:oh(r.M,i)}}if(t instanceof JD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xu)return{bytesValue:xD(r.M,t._byteString)};if(t instanceof zn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${YD(t)}`)}(n,e)}function jR(n,e){const t={};return s0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(n,(r,i)=>{const u=Dp(i,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function HR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ir||n instanceof JD||n instanceof Xu||n instanceof zn||n instanceof wp)}function NS(n,e,t){if(!HR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YD(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function OS(n,e,t){if((e=(0,Kt.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return tI(n,e);throw nI("Field path arguments must be of type string or ",n,!1,void 0,t)}const n1=new RegExp("[~\\*/\\[\\]]");function tI(n,e,t){if(e.search(n1)>=0)throw nI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch(r){throw nI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nI(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Me(ae.INVALID_ARGUMENT,f+n+y)}function $R(n,e){return n.some(t=>t.isEqual(e))}class tE{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new r1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class r1 extends tE{data(){return super.data()}}function rI(n,e){return"string"==typeof e?tI(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}class Ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cc extends tE{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class nE extends Cc{data(e={}){return super.data(e)}}class ph{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ip(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nE(this._firestore,this._userDataWriter,r.key,r,new Ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new nE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new nE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:s1(c.type),doc:f,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function s1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function GR(n,e){return n instanceof Cc&&e instanceof Cc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ph&&e instanceof ph&&n._firestore===e._firestore&&OR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qR(n){if(_0(n)&&0===n.explicitOrderBy.length)throw new Me(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rE{}function gh(n,...e){for(const t of e)n=t._apply(n);return n}class o1 extends rE{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=bp(e.firestore),r=function(i,u,c,f,y,b,S){let M;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Me(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){QR(S,b);const B=[];for(const G of S)B.push(YR(f,i,G));M={arrayValue:{values:B}}}else M=YR(f,i,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||QR(S,b),M=UR(c,"where",S,"in"===b||"not-in"===b);const F=Ii.create(y,b,M);return function(B,G){if(G.S()){const we=v0(B);if(null!==we&&!we.isEqual(G.field))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${G.field.toString()}'`);const We=cD(B);null!==We&&JR(0,G.field,We)}const te=function(we,We){for(const Ke of we.filters)if(We.indexOf(Ke.op)>=0)return Ke.op;return null}(B,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==te)throw new Me(ae.INVALID_ARGUMENT,te===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${te.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new is(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Xa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class u1 extends rE{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new yc(i,u);return function(f,y){if(null===cD(f)){const b=v0(f);null!==b&&JR(0,b,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new is(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Xa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class zR extends rE{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new is(e.firestore,e.converter,dD(e._query,this.wc,this.mc))}}class WR extends rE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ZR(e,this.type,this.gc,this.yc);return new is(e.firestore,e.converter,(i=t,new Xa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KR extends rE{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=ZR(e,this.type,this.gc,this.yc);return new is(e.firestore,e.converter,(i=t,new Xa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function ZR(n,e,t,r){if(t[0]=(0,Kt.m9)(t[0]),t[0]instanceof tE)return function(i,u,c,f,y){if(!f)throw new Me(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of eh(i))if(S.field.isKeyField())b.push(Yu(u,f.key));else{const M=f.data.field(S.field);if(o0(M))throw new Me(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const F=S.field.canonicalString();throw new Me(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(M)}return new Ja(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=bp(n.firestore);return function(u,c,f,y,b,S){const M=u.explicitOrderBy;if(b.length>M.length)throw new Me(ae.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<b.length;B++){const G=b[B];if(M[B].field.isKeyField()){if("string"!=typeof G)throw new Me(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof G}`);if(!E0(u)&&-1!==G.indexOf("/"))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${G}' contains a slash.`);const te=u.path.child(Jt.fromString(G));if(!He.isDocumentKey(te))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const we=new He(te);F.push(Yu(c,we))}else{const te=UR(f,y,G);F.push(te)}}return new Ja(F,S)}(n._query,n.firestore._databaseId,i,e,t,r)}}function YR(n,e,t){if("string"==typeof(t=(0,Kt.m9)(t))){if(""===t)throw new Me(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E0(e)&&-1!==t.indexOf("/"))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!He.isDocumentKey(r))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(n,new He(r))}if(t instanceof zn)return Yu(n,t._key);throw new Me(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YD(t)}.`)}function QR(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function JR(n,e,t){if(!t.isEqual(e))throw new Me(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class kS{convertValue(e,t="none"){switch(Ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Wa(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new JD(Qt(e.latitude),Qt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Em(e));default:return null}}convertTimestamp(e){const t=Ka(e);return new ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);xt(v(r));const i=new Za(r.get(1),r.get(3)),u=new He(r.popFirst(5));return i.isEqual(t)||vn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function iI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class m1 extends kS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class XR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bp(e)}set(e,t,r){this._verifyNotCommitted();const i=mh(e,this._firestore),u=iI(i.converter,t,r),c=eI(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=mh(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Ic?RS(this._dataReader,"WriteBatch.update",u._key,t,r,i):xS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=mh(e,this._firestore);return this._mutations=this._mutations.concat(new cp(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mh(n,e){if((n=(0,Kt.m9)(n)).firestore!==e)throw new Me(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cp extends kS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function eN(n,e,t){n=sn(n,zn);const r=sn(n.firestore,Jn),i=iI(n.converter,e,t);return ey(r,[eI(bp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nr.none())])}function tN(n,e,t,...r){n=sn(n,zn);const i=sn(n.firestore,Jn),u=bp(i);let c;return c="string"==typeof(e=(0,Kt.m9)(e))||e instanceof Ic?RS(u,"updateDoc",n._key,e,t,r):xS(u,"updateDoc",n._key,e),ey(i,[c.toMutation(n._key,Nr.exists(!0))])}function nN(n,...e){var t,r,i;n=(0,Kt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||SS(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(SS(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let y,b,S;if(n instanceof zn)b=sn(n.firestore,Jn),S=Xd(n._key.path),y={next:M=>{e[c]&&e[c](PS(b,n,M))},error:e[c+1],complete:e[c+2]};else{const M=sn(n,is);b=sn(M.firestore,Jn),S=M._query;const F=new Cp(b);y={next:B=>{e[c]&&e[c](new ph(b,F,M,B))},error:e[c+1],complete:e[c+2]},qR(n._query)}return function(M,F,B,G){const te=new KD(G),we=new zA(F,te,B);return M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return jA(yield Xm(M),we)})),()=>{te.Ia(),M.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return $A(yield Xm(M),we)}))}}(qr(b),S,f,y)}function ey(n,e){return function(t,r){const i=new $r;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function uP(n,e,t){return QA.apply(this,arguments)}(yield CS(t),r,i)})),i.promise}(qr(n),e)}function PS(n,e,t){const r=t.docs.get(e._key),i=new Cp(n);return new Cc(n,i,e._key,r,new Ip(t.hasPendingWrites,t.fromCache),e.converter)}class T1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bp(e)}get(e){const t=mh(e,this._firestore),r=new m1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const u=i[0];if(u.isFoundDocument())return new tE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new tE(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=mh(e,this._firestore),u=iI(i.converter,t,r),c=eI(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=mh(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Ic?RS(this._dataReader,"Transaction.update",u._key,t,r,i):xS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=mh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=mh(e,this._firestore),r=new Cp(this._firestore);return super.get(e).then(i=>new Cc(this._firestore,r,t._key,i._document,new Ip(!1,!1),t.converter))}}function FS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function iN(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function sN(){if(!function Qb(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){zd=sc.SDK_VERSION,(0,sc._registerComponent)(new Hg.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new Jn(i,new n0(t.getProvider("auth-internal")),new sx(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,sc.registerVersion)(jb,"3.4.8",n),(0,sc.registerVersion)(jb,"3.4.8","esm2017")}();class iE{constructor(e){this._delegate=e}static fromBase64String(e){return sN(),new iE(Xu.fromBase64String(e))}static fromUint8Array(e){return iN(),new iE(Xu.fromUint8Array(e))}toBase64(){return sN(),this._delegate.toBase64()}toUint8Array(){return iN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LS(n){return function P1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class F1{enableIndexedDbPersistence(e,t){return function HP(n,e){FR(n=sn(n,Jn));const t=qr(n),r=n._freezeSettings(),i=new _S;return PR(t,i,new yR(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function $P(n){FR(n=sn(n,Jn));const e=qr(n),t=n._freezeSettings(),r=new _S;return PR(e,r,new IP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function GP(n){if(n._initialized&&!n._terminated)throw new Me(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!ru.vt())return Promise.resolve();const i=r+"main";yield ru.delete(i)}),function(r){return t.apply(this,arguments)})(cA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function LP(n,e,t,r={}){var i;const u=(n=sn(n,X0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&tp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=ri.MOCK_USER;else{c=(0,Kt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Me(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ri(y)}n._authCredentials=new Gb(new Hb(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function zP(n){return function MP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield wR(n),t=yield bR(n);return e.setNetworkEnabled(!0),function(r){const i=ze(r);return i.fu.delete(0),Q0(i)}(t)}))}(qr(n=sn(n,Jn)))}(this._delegate)}disableNetwork(){return function WP(n){return function xP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield wR(n),t=yield bR(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const u=ze(i);u.fu.add(0),yield zm(u),u.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=sn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function qP(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function hP(n,e){return nS.apply(this,arguments)}(yield CS(e),t)})),t.promise}(qr(n=sn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function C1(n,e){return function OP(n,e){const t=new KD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xm(n),i=t,ze(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xm(n),i=t,void ze(r).Eu.delete(i);var r,i}))}}(qr(n=sn(n,Jn)),SS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,RR(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,QD(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function VP(n,e){if(n=sn(n,X0),AS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new Xa(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function A1(n,e){return function kP(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,ZD(i).then(u=>u.datastore));var i;new AP(n.asyncQueue,r,e,t).run()})),t.promise}(qr(n=sn(n,Jn)),t=>e(new T1(n,t)))}(this._delegate,t=>e(new aN(this,t)))}batch(){return qr(this._delegate),new uN(new XR(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function KP(n,e){const t=qr(n=sn(n,Jn)),r=new UP;return function PP(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return _R(y,b);if(y instanceof ArrayBuffer)return _R(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new CP(y,c);var y}(t,Y0(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function DP(n,e,t){const r=ze(n);var i;(i=(0,ve.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(F,B){const G=ze(F),te=Or(B.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",we=>G._s.getBundleMetadata(we,B.id)).then(we=>!!we&&we.createTime.compareTo(te)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=y).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(aR(y));const b=new nP(y,u.localStore,c.M);let S=yield c.da();for(;S;){const F=yield b.ku(S);F&&f._updateProgress(F),S=yield c.da()}const M=yield b.complete();return yield Dc(u,M.Fu,void 0),yield function(F,B){const G=ze(F);return G.persistence.runTransaction("Save bundle","readwrite",te=>G._s.saveBundleMetadata(te,B))}(u.localStore,y),f._completeWith(M.progress),Promise.resolve(M.Ou)}catch(y){return tp("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var F}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ZP(n,e){return function FP(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield IS(n),e)}))}(qr(n=sn(n,Jn)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class sI extends kS{constructor(e){super(),this.firestore=e}convertBytes(e){return new iE(new Xu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class aN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sI(e)}get(e){const t=Ap(e);return this._delegate.get(t).then(r=>new sE(this._firestore,new Cc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ap(e);return r?(FS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}}class uN{constructor(e){this._delegate=e}set(e,t,r){const i=Ap(e);return r?(FS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new nE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Tp(e,new sI(e),t),i.set(t,u)),u}}Tp.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new zn(t._delegate,r,new He(e)))}static forKey(e,t,r){return new wa(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,RR(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kt.m9)(e))instanceof zn&&NR(this._delegate,e)}set(e,t){t=FS("DocumentReference.set",t);try{return t?eN(this._delegate,e,t):eN(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tN(this._delegate,e):tN(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function D1(n){return ey(sn(n.firestore,Jn),[new cp(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=lN(e),r=cN(e,i=>new sE(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function _1(n){n=sn(n,zn);const e=sn(n.firestore,Jn),t=qr(e),r=new Cp(e);return function RP(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const f=yield function(y,b){const S=ze(y);return S.persistence.runTransaction("read document","readonly",M=>S.ci.Ls(M,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Me(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Zm(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield IS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Cc(e,r,n._key,i,new Ip(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function v1(n){n=sn(n,zn);const e=sn(n.firestore,Jn);return DR(qr(e),n._key,{source:"server"}).then(t=>PS(e,n,t))}(this._delegate):function y1(n){n=sn(n,zn);const e=sn(n.firestore,Jn);return DR(qr(e),n._key).then(t=>PS(e,n,t))}(this._delegate),t.then(r=>new sE(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function lN(n){for(const e of n)if("object"==typeof e&&!LS(e))return e;return{}}function cN(n,e){var t,r;let i;return i=LS(n[0])?n[0]:LS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GR(this._delegate,e._delegate)}}class oE extends sE{data(e){const t=this._delegate.data(e);return function AT(n,e){n||nt()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sI(e)}where(e,t,r){try{return new Ms(this.firestore,gh(this._delegate,function a1(n,e,t){const r=e,i=rI("where",n);return new o1(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,gh(this._delegate,function l1(n,e="asc"){const t=e,r=rI("orderBy",n);return new u1(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,gh(this._delegate,function c1(n){return MR("limit",n),new zR("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,gh(this._delegate,function d1(n){return MR("limitToLast",n),new zR("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,gh(this._delegate,function h1(...n){return new WR("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,gh(this._delegate,function f1(...n){return new WR("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,gh(this._delegate,function p1(...n){return new KR("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,gh(this._delegate,function g1(...n){return new KR("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return OR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function w1(n){n=sn(n,is);const e=sn(n.firestore,Jn),t=qr(e),r=new Cp(e);return function NP(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,u,c){try{const f=yield HD(i,u,!0),y=new cR(u,f.li),b=y.Gu(f.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(f){const y=Zm(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield IS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ph(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function b1(n){n=sn(n,is);const e=sn(n.firestore,Jn),t=qr(e),r=new Cp(e);return IR(t,n._query,{source:"server"}).then(i=>new ph(e,r,n,i))}(this._delegate):function E1(n){n=sn(n,is);const e=sn(n.firestore,Jn),t=qr(e),r=new Cp(e);return qR(n._query),IR(t,n._query).then(i=>new ph(e,r,n,i))}(this._delegate),t.then(r=>new VS(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lN(e),r=cN(e,i=>new VS(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nN(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}class V1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new oE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new oE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new V1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new oE(this._firestore,r))})}isEqual(e){return GR(this._delegate,e._delegate)}}class ty extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?QD(this._delegate):QD(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function I1(n,e){const t=sn(n.firestore,Jn),r=QD(n),i=iI(n.converter,e);return ey(t,[eI(bp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return NR(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Tp.getInstance(this.firestore,e):null))}}function Ap(n){return sn(n,zn)}class BS{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new BS(Gr.keyField().canonicalString())}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function M1(){return new MS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sp(e)}static delete(){const e=function S1(){return new eE("deleteField")}();return e._methodName="FieldValue.delete",new Sp(e)}static arrayUnion(...e){const t=function x1(...n){return new XP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sp(t)}static arrayRemove(...e){const t=function R1(...n){return new e1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sp(t)}static increment(e){const t=function N1(n){return new t1("increment",n)}(e);return t._methodName="FieldValue.increment",new Sp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const B1={Firestore:oN,GeoPoint:JD,Timestamp:ir,Blob:iE,Transaction:aN,WriteBatch:uN,DocumentReference:wa,DocumentSnapshot:sE,Query:Ms,QueryDocumentSnapshot:oE,QuerySnapshot:VS,CollectionReference:ty,FieldPath:BS,FieldValue:Sp,setLogLevel:function L1(n){!function TT(n){Wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function j1(n){(function U1(n,e){n.INTERNAL.registerComponent(new Hg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B1)))})(n,(e,t)=>new oN(e,t,new F1)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Sr.Z);var oI=k(5363),H1=k(6063);class $1 extends rr.x{constructor(e=1/0,t=1/0,r=H1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var G1=k(3099);function dN(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,G1.B)({connector:()=>new $1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hN(n,e){return(0,pi.m)(e)?Fn(()=>n,e):Fn(()=>n)}var US=k(9468);k(5867);const pN=new Map,Z1={activated:!1,tokenObservers:[]},Y1={initialized:!1,enabled:!1};function Si(n){return pN.get(n)||Z1}function iu(n,e){pN.set(n,e)}function uI(){return Y1}class tF{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Kt.BH,yield function nF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Kt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xs=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mN(n){if(!Si(n).activated)throw xs.create("use-before-activation",{appName:n.name})}function GS(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(M){throw xs.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==c.status)throw xs.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(M){throw xs.create("fetch-parse-error",{originalErrorMessage:M.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:f.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),qS.apply(this,arguments)}function aF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const aE="firebase-app-check-store";let dI=null;function _N(){return dI||(dI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(aE,{keyPath:"compositeKey"})}}catch(t){e(xs.create("storage-open",{originalErrorMessage:t.message}))}}),dI)}function zS(){return zS=(0,ve.Z)(function*(n,e){const r=(yield _N()).transaction(aE,"readwrite"),u=r.objectStore(aE).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;f(xs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),zS.apply(this,arguments)}const uE=new qa.Yd("@firebase/app-check");function bN(n,e){return(0,Kt.hl)()?function dF(n,e){return function vN(n,e){return zS.apply(this,arguments)}(function wN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{uE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DN(){return uI().enabled}function IN(){return YS.apply(this,arguments)}function YS(){return YS=(0,ve.Z)(function*(){const n=uI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),YS.apply(this,arguments)}const yF={error:"UNKNOWN_ERROR"};function _F(n){return Kt.US.encodeString(JSON.stringify(n),!1)}function hI(n){return QS.apply(this,arguments)}function QS(){return QS=(0,ve.Z)(function*(n,e=!1){const t=n.app;mN(t);const r=Si(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&fI(y)&&(i=y)}if(!e&&i&&fI(i))return{token:i.token};let f,c=!1;if(DN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=GS(aF(t,yield IN()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield bN(t,y),iu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?uE.warn(y.message):uE.error(y),u=y}return i?(f={token:i.token},iu(t,Object.assign(Object.assign({},r),{token:i})),yield bN(t,i)):f=EF(u),c&&TN(t,f),f}),QS.apply(this,arguments)}function XS(n,e){const t=Si(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),iu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function CN(n){const{app:e}=n,t=Si(e);let r=t.tokenRefresher;r||(r=function vF(n){const{app:e}=n;return new tF((0,ve.Z)(function*(){let r;if(r=Si(e).token?yield hI(n,!0):yield hI(n),r.error)throw r.error}),()=>!0,()=>{const t=Si(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),iu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TN(n,e){const t=Si(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function fI(n){return n.expireTimeMillis-Date.now()>0}function EF(n){return{token:_F(yF),error:n}}class wF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Si(this.app);for(const t of e)XS(this.app,t.next);return Promise.resolve()}}const kN="app-check-internal";!function PF(){(0,sc._registerComponent)(new Hg.wA("app-check",n=>function bF(n,e){return new wF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kN).initialize()})),(0,sc._registerComponent)(new Hg.wA(kN,n=>function DF(n){return{getToken:e=>hI(n,e),addTokenListener:e=>function JS(n,e,t,r){const{app:i}=n,u=Si(i),c={next:t,error:r,type:e};if(iu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&fI(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),CN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>CN(n))}(n,"INTERNAL",e),removeTokenListener:e=>XS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,sc.registerVersion)("@firebase/app-check","0.5.6")}();class rM{constructor(){return(0,ti.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const FN=new p.OlP("angularfire2.auth.use-emulator"),LN=new p.OlP("angularfire2.auth.settings"),VN=new p.OlP("angularfire2.auth.tenant-id"),BN=new p.OlP("angularfire2.auth.langugage-code"),UN=new p.OlP("angularfire2.auth.use-device-language"),jN=new p.OlP("angularfire.auth.persistence"),HN=(n,e,t,r,i,u,c,f)=>(0,io.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let $N=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,B){const G=new rr.x,te=mt(void 0).pipe((0,oI.Q)(c.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Lt.U)(()=>(0,io.on)(t,u,r)),(0,Lt.U)(we=>HN(we,u,f,b,S,M,y,F)),dN({bufferSize:1,refCount:!1}));if(fr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{te.pipe(Js()).subscribe();const We=te.pipe(Fn(Je=>Je.getRedirectResult().then(yt=>yt,()=>null)),ti.iC,dN({bufferSize:1,refCount:!1})),Ke=te.pipe(Fn(Je=>new Fr.y(yt=>({unsubscribe:u.runOutsideAngular(()=>Je.onAuthStateChanged(Dt=>yt.next(Dt),Dt=>yt.error(Dt),()=>yt.complete()))})))),Ue=te.pipe(Fn(Je=>new Fr.y(yt=>({unsubscribe:u.runOutsideAngular(()=>Je.onIdTokenChanged(Dt=>yt.next(Dt),Dt=>yt.error(Dt),()=>yt.complete()))}))));this.authState=We.pipe(hN(Ke),(0,US.R)(c.outsideAngular),(0,oI.Q)(c.insideAngular)),this.user=We.pipe(hN(Ue),(0,US.R)(c.outsideAngular),(0,oI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Fn(Je=>Je?(0,kn.D)(Je.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Fn(Je=>Je?(0,kn.D)(Je.getIdTokenResult()):mt(null))),this.credential=(0,F_.T)(We,G,this.authState.pipe(ys(Je=>!Je))).pipe((0,Lt.U)(Je=>(null==Je?void 0:Je.user)?Je:null),(0,US.R)(c.outsideAngular),(0,oI.Q)(c.insideAngular))}return(0,io.pX)(this,te,u,{spy:{apply:(we,We,Ke)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Ke.then(Ue=>G.next(Ue))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(io.Dh),p.LFG(io.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(BN,8),p.LFG(UN,8),p.LFG(jN,8),p.LFG(rM,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function GN(n,e){return function jF(n,e=Gw.z){return new Fr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function sM(n,e){return GN(n,e).pipe((0,Lt.U)(t=>({payload:t,type:"query"})))}function gI(n,e){return sM(n,e).pipe(Bi(void 0),qw(),(0,Lt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function qN(n,e,t){return gI(n,t).pipe(Ir((r,i)=>function $F(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function GF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return oM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return oM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function zC(n,e=hi.y){return n=null!=n?n:WC,(0,Lr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Hn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Lt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function oM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function zN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class WN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Lt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Bi(void 0),qw(),ys(([r,i])=>i.length>0||!r),(0,Lt.U)(([r,i])=>i),ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ir((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zN(e);return qN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return sM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ti.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(ti.iC)}add(e){return this.ref.add(e)}doc(e){return new KN(this.ref.doc(e),this.afs)}}class KN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=ZN(r,t);return new WN(i,u,this.afs)}snapshotChanges(){return function HF(n,e){return GN(n,e).pipe(Bi(void 0),qw(),(0,Lt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Lt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(ti.iC)}}class qF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ys(t=>t.length>0),ti.iC):gI(this.query,this.afs.schedulers.outsideAngular).pipe(ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ir((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=zN(e);return qN(this.query,t,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return sM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Lt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ti.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(ti.iC)}}const zF=new p.OlP("angularfire2.enableFirestorePersistence"),WF=new p.OlP("angularfire2.firestore.persistenceSettings"),KF=new p.OlP("angularfire2.firestore.settings"),ZF=new p.OlP("angularfire2.firestore.use-emulator");function ZN(n,e=(t=>t)){return{query:e(n),ref:n}}let YF=(()=>{class n{constructor(t,r,i,u,c,f,y,b,S,M,F,B,G,te,we,We,Ke){this.schedulers=y;const Ue=(0,io.on)(t,f,r),Je=S;M&&HN(Ue,f,F,G,te,we,B,We),[this.firestore,this.persistenceEnabled$]=(0,io.cc)(`${Ue.name}.firestore`,"AngularFirestore",Ue.name,()=>{const yt=f.runOutsideAngular(()=>Ue.firestore());if(u&&yt.settings(u),Je&&yt.useEmulator(...Je),i&&!fr(c)){const Dt=()=>{try{return(0,kn.D)(yt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Ht){return"undefined"!=typeof console&&console.warn(Ht),mt(!1)}};return[yt,f.runOutsideAngular(Dt)]}return[yt,mt(!1)]},[u,Je,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=ZN(i,r),f=this.schedulers.ngZone.run(()=>u);return new WN(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new qF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new KN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(io.Dh),p.LFG(io.xv,8),p.LFG(zF,8),p.LFG(KF,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(ti.HU),p.LFG(WF,8),p.LFG(ZF,8),p.LFG($N,8),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(BN,8),p.LFG(UN,8),p.LFG(jN,8),p.LFG(rM,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lE=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("todo-list").valueChanges({idField:"id"}).pipe((0,Lt.U)(r=>((n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(f=>u[f]!==c[f]))(t,i,e))})(r,t)))}add(t){this._client.collection("todo-list").add(t)}remove(t){this._client.doc("todo-list/"+t).delete()}set(t){this._client.doc("todo-list/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(YF))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const YN=new p.OlP("REMOVES_LIST_DTO"),QN=new p.OlP("SETS_LIST_DTO");let JN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[lE,{provide:Sg,useExisting:lE},{provide:Ag,useExisting:lE},{provide:YN,useExisting:lE},{provide:QN,useExisting:lE}],imports:[[]]}),n})(),XN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Oi,Vu.forChild([{path:"",component:dC}]),hC,Y_,JN]]}),n})();function QF(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",24)(1,"div"),p._uU(2,"DELETE TASK"),p.qZA(),p.TgZ(3,"button",25),p.NdJ("click",function(){p.CHM(t);const i=p.oxw(2);return null==i.modalRef?null:i.modalRef.hide()}),p.TgZ(4,"span",26),p._uU(5,"\xd7"),p.qZA()()(),p.TgZ(6,"div",27),p._uU(7," Are you sure you want to delete this task? "),p.qZA(),p.TgZ(8,"div",28)(9,"button",29),p.NdJ("click",function(){return p.CHM(t),p.oxw(2).decline()}),p._uU(10,"Cancel"),p.qZA(),p.TgZ(11,"button",30),p.NdJ("click",function(){p.CHM(t);const i=p.oxw().$implicit,u=p.oxw();return u.onDeleteTaskClicked(i.id),u.confirm()}),p._uU(12,"Delete task"),p.qZA()()}}function JF(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"input",17),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw().onCheckedClicked(u.id,u.class)}),p.qZA(),p._uU(4,". "),p.TgZ(5,"label",18),p._uU(6),p.qZA()(),p.TgZ(7,"div",19)(8,"a",20),p._uU(9,"... "),p.qZA(),p.TgZ(10,"ul",21)(11,"li")(12,"button",22),p.NdJ("click",function(){const u=p.CHM(t).$implicit;return p.oxw().onEditTask(u.id,u.name,u.order,u.class)}),p._uU(13,"Edit"),p.qZA()(),p.TgZ(14,"li")(15,"button",22),p.NdJ("click",function(){p.CHM(t);const i=p.MAs(18);return p.oxw().openModal(i)}),p._uU(16,"Delete"),p.qZA()()()()(),p.YNc(17,QF,13,0,"ng-template",null,23,p.W1O),p.qZA()}if(2&n){const t=e.$implicit;p.xp6(3),p.Tol(t.class),p.xp6(2),p.Tol(t.class),p.Q6J("id",t.id),p.xp6(1),p.hij(" => ",t.name,"")}}let XF=(()=>{class n{constructor(t,r,i,u,c,f){this.modalService=t,this._getsAllListDto=r,this._addsListDto=i,this._removesListDto=u,this._setsListDto=c,this._router=f,this.list$=this._getsAllListDto.getAll().pipe((0,Lt.U)(y=>y.sort((b,S)=>b.order-S.order))),this.addTask=new gf({name:new bg}),this.order=1}ngOnInit(){!function t(){var r,i,u=new Date;const c=document.getElementById("current-date");var b=u.getDay();null!==c&&(0==b&&(b=7),c.innerHTML=(null===(r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][b-1])||void 0===r?void 0:r.substring(0,3))+" "+u.getDate()+" "+(null===(i=["January","February","March","April","May","June","July","August","September","October","November","December"][u.getMonth()])||void 0===i?void 0:i.substring(0,3)).toUpperCase())}()}HomeHref(){window.location.href="l"==this._router.url[6]?"/home":"todo-app/home"}onAddTaskSubmited(t){var r;this._addsListDto.add({name:null===(r=t.get("name"))||void 0===r?void 0:r.value,class:"unchecked",attribute:"",order:Date.now()}),this.addTask.reset()}show(){var t=document.getElementById("input"),r=document.getElementById("HomeButton");t.style.display="none"===(null==t?void 0:t.style.display)?"block":"none",r.style.display="none"===(null==r?void 0:r.style.display)?"block":"none"}onDeleteTaskClicked(t){this._removesListDto.remove(t)}onCheckedClicked(t,r){this._setsListDto.set("unchecked"==r?{id:t,class:"checked"}:{id:t,class:"unchecked"})}onEditTask(t,r,i,u){var c=document.getElementById(t);c.innerHTML="<input id="+i+' value="'+r+'"></input><button id="'+r+'">Update</button>',document.getElementById(r).onclick=()=>{var y=document.getElementById(i).value,b=document.getElementById(i).value;c.innerHTML='<label class="form-check-label fs-4" class='+u+" id="+t+">=> "+y,this._setsListDto.set({id:t,name:b})}}openModal(t){this.modalRef=this.modalService.show(t,{class:"modal-md"})}confirm(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}decline(){var t;null===(t=this.modalRef)||void 0===t||t.hide()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(jg),p.Y36(Sg),p.Y36(Ag),p.Y36(YN),p.Y36(QN),p.Y36(Xr))},n.\u0275cmp=p.Xpm({type:n,selectors:[["lib-todo-list"]],decls:24,vars:4,consts:[[1,"row"],[1,"pasek","col-md-12"],[1,"offset-md-1",2,"text-decoration","none","cursor","pointer",3,"click"],[1,"name-of-app","mt-2","ml-1"],[1,"container"],[1,"today","col-md-3"],["id","current-date",1,"ml-2","col-sm-2","current-date","fs-4","col-md-2","align-self-center"],["class","listshow",4,"ngFor","ngForOf"],["id","input",1,"row",2,"display","none"],[3,"formGroup","ngSubmit"],["id","TextFromTextarea","type","text","formControlName","name","placeholder","Write your message here",1,"textarea","col-sm-6","offset-md-1","mt-3"],[1,"row","offset-md-1","mt-2"],["type","submit",1,"myButton","ButtonMargin","mt-2",3,"click"],["id","HomeButton",1,"myButton",3,"click"],[1,"listshow"],[1,"row","justify-content-between"],[1,"justify-content-between","align-items-center","py-3","pe-5","col-md-11"],["type","checkbox",1,"task","checkbox","form-check-input","rounded-circle","border-dark","border-2","fs-4",3,"click"],[1,"form-check-label","fs-4",3,"id"],[1,"dropdown","mt-3","col-sm-1"],["role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["template",""],[1,"d-flex","fw-bold","border-bottom","fs-4","justify-content-between","p-3","bg-light"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"p-3","fs-6","border-bottom","bg-light"],[1,"d-flex","py-3","justify-content-end","bg-light"],["type","button",1,"btn","btn-light","border-dark","me-3",3,"click"],["type","button",1,"btn","bg-delete","text-white","me-3","bg-danger",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"a",2),p.NdJ("click",function(){return r.HomeHref()}),p.TgZ(3,"div",3),p._uU(4,"AWESOME TODO APP"),p.qZA()()()(),p.TgZ(5,"div",4)(6,"div",0)(7,"div",5),p._uU(8,"TODAY"),p.qZA(),p._UZ(9,"div",6),p.qZA()(),p.TgZ(10,"div",4),p.YNc(11,JF,19,6,"div",7),p.ALo(12,"async"),p.qZA(),p._UZ(13,"br"),p.TgZ(14,"div",4)(15,"div",8)(16,"form",9),p.NdJ("ngSubmit",function(){return r.onAddTaskSubmited(r.addTask)}),p._UZ(17,"textarea",10),p.TgZ(18,"div",11)(19,"button",12),p.NdJ("click",function(){return r.show()}),p._uU(20,"Add Task"),p.qZA()()()(),p._UZ(21,"br"),p.TgZ(22,"button",13),p.NdJ("click",function(){return r.show()}),p._uU(23,"Add Task"),p.qZA()()),2&t&&(p.xp6(11),p.Q6J("ngForOf",p.lcZ(12,2,r.list$)),p.xp6(5),p.Q6J("formGroup",r.addTask))},directives:[hr,p_,Xy,mf,rf,Jy,yf],pipes:[rl],encapsulation:2,changeDetection:0}),n})(),eL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-todo-list-page"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"lib-todo-list")},directives:[XF],encapsulation:2,changeDetection:0}),n})(),tL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[],imports:[[Oi,Vu.forChild([{path:"",component:eL}]),Y_,JN]]}),n})();const nL=[{path:"home",loadChildren:()=>XN},{path:"todo-list",loadChildren:()=>tL}];let rL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Vu.forRoot(nL),XN],Vu]}),n})(),iL=(()=>{class n{constructor(){this.title="TODO-APP"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[jl],styles:[""]}),n})();const eO_firebaseConfig={apiKey:"AIzaSyC96Q4PB2fG56SX1Ilyk5t1fLlA9JgUM_8",authDomain:"todo-training-66823.firebaseapp.com",projectId:"todo-training-66823",storageBucket:"todo-training-66823.appspot.com",messagingSenderId:"126085828802",appId:"1:126085828802:web:33e6b452dcc0f9f16aab5b",measurementId:"G-4M05WLRKHV"};class tO{}const Tc="*";function nO(n,e=null){return{type:2,steps:n,options:e}}function rO(n){return{type:6,styles:n,offset:null}}function iO(n){Promise.resolve(null).then(n)}class cE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){iO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class sO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?iO(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const nn=!1;function oO(n){return new p.vHH(3e3,nn)}function BL(){return"undefined"!=typeof window&&void 0!==window.document}function uM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function yh(n){switch(n.length){case 0:return new cE;case 1:return n[0];default:return new sO(n)}}function aO(n,e,t,r,i={},u={}){const c=[],f=[];let y=-1,b=null;if(r.forEach(S=>{const M=S.offset,F=M==y,B=F&&b||{};Object.keys(S).forEach(G=>{let te=G,we=S[G];if("offset"!==G)switch(te=e.normalizePropertyName(te,c),we){case"!":we=i[G];break;case Tc:we=u[G];break;default:we=e.normalizeStyleValue(G,te,we,c)}B[te]=we}),F||f.push(B),b=B,y=M}),c.length)throw function SL(n){return new p.vHH(3502,nn)}();return f}function lM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&cM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&cM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&cM(t,"destroy",n)))}}function cM(n,e,t){const r=t.totalTime,u=dM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function dM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Uo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function uO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let hM=(n,e)=>!1,lO=(n,e,t)=>[],cO=null;function fM(n){const e=n.parentNode||n.host;return e===cO?null:e}(uM()||"undefined"!=typeof Element)&&(BL()?(cO=(()=>document.documentElement)(),hM=(n,e)=>{for(;e;){if(e===n)return!0;e=fM(e)}return!1}):hM=(n,e)=>n.contains(e),lO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Mp=null,dO=!1;function hO(n){Mp||(Mp=function jL(){return"undefined"!=typeof document?document.body:null}()||{},dO=!!Mp.style&&"WebkitAppearance"in Mp.style);let e=!0;return Mp.style&&!function UL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Mp.style,!e&&dO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Mp.style)),e}const fO=hM,pO=lO;let gO=(()=>{class n{validateStyleProperty(t){return hO(t)}matchesElement(t,r){return!1}containsElement(t,r){return fO(t,r)}getParentElement(t){return fM(t)}query(t,r,i){return pO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new cE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),pM=(()=>{class n{}return n.NOOP=new gO,n})();const gM="ng-enter",yI="ng-leave",_I="ng-trigger",vI=".ng-trigger",yO="ng-animating",mM=".ng-animating";function xp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yM(parseFloat(e[1]),e[2])}function yM(n,e){return"s"===e?1e3*n:n}function EI(n,e,t){return n.hasOwnProperty("duration")?n:function GL(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(oO()),{duration:0,delay:0,easing:""};i=yM(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=yM(parseFloat(y),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function oL(){return new p.vHH(3100,nn)}()),f=!0),u<0&&(e.push(function aL(){return new p.vHH(3101,nn)}()),f=!0),f&&e.splice(y,0,oO())}return{duration:i,delay:u,easing:c}}(n,e,t)}function ny(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function _h(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else ny(n,t);return t}function vO(n,e,t){return t?e+":"+t+";":""}function EO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=vO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=vO(0,WL(t),n.style[t]));n.setAttribute("style",e)}function el(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=vM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),uM()&&EO(n))}function Rp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=vM(t);n.style[r]=""}),uM()&&EO(n))}function dE(n){return Array.isArray(n)?1==n.length?n[0]:nO(n):n}const _M=new RegExp("{{\\s*(.+?)\\s*}}","g");function wO(n){let e=[];if("string"==typeof n){let t;for(;t=_M.exec(n);)e.push(t[1]);_M.lastIndex=0}return e}function wI(n,e,t){const r=n.toString(),i=r.replace(_M,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function lL(n){return new p.vHH(3003,nn)}()),f=""),f.toString()});return i==r?n:i}function bI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const zL=/-+([a-z0-9])/g;function vM(n){return n.replace(zL,(...e)=>e[1].toUpperCase())}function WL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function cL(n){return new p.vHH(3004,nn)}()}}function bO(n,e){return window.getComputedStyle(n)[e]}function XL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function eV(n,e,t){if(":"==n[0]){const y=function tV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function IL(n){return new p.vHH(3016,nn)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function DL(n){return new p.vHH(3015,nn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(DO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(DO(c,i))}(r,t,e)):t.push(n),t}const TI=new Set(["true","1"]),AI=new Set(["false","0"]);function DO(n,e){const t=TI.has(n)||AI.has(n),r=TI.has(e)||AI.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?TI.has(n):AI.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?TI.has(e):AI.has(e)),c&&f}}const nV=new RegExp("s*:selfs*,?","g");function EM(n,e,t,r){return new rV(n).build(e,t,r)}class rV{constructor(e){this._driver=e}build(e,t,r){const i=new oV(t);this._resetContextStyleTimingState(i);const u=jo(this,dE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function hL(){return new p.vHH(3006,nn)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,b=y.name;b.toString().split(/\s*,\s*/).forEach(S=>{y.name=S,u.push(this.visitState(y,t))}),y.name=b}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function fL(){return new p.vHH(3007,nn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(SI(f)){const y=f;Object.keys(y).forEach(b=>{wO(y[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(bI(u.values()),t.errors.push(function pL(n,e){return new p.vHH(3008,nn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=jo(this,dE(e.animation),t);return{type:1,matchers:XL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Np(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>jo(this,r,t)),options:Np(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=jo(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:Np(e.options)}}visitAnimate(e,t){const r=function uV(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return wM(EI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=wM(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||EI(r,e),wM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:rO({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=rO(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Tc?r.push(c):t.errors.push(function gL(n){return new p.vHH(3002,nn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(SI(c)){const f=c,y=f.easing;if(y&&(u=y,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const y=t.collectedStyles[t.currentQuerySelector],b=y[f];let S=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function mL(n,e,t,r,i){return new p.vHH(3010,nn)}()),S=!1),u=b.startTime),S&&(y[f]={startTime:u,endTime:i}),t.options&&function qL(n,e,t){const r=e.params||{},i=wO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function uL(n){return new p.vHH(3001,nn)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yL(){return new p.vHH(3011,nn)}()),r;let u=0;const c=[];let f=!1,y=!1,b=0;const S=e.steps.map(We=>{const Ke=this._makeStyleAst(We,t);let Ue=null!=Ke.offset?Ke.offset:function aV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(SI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(SI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ke.styles),Je=0;return null!=Ue&&(u++,Je=Ke.offset=Ue),y=y||Je<0||Je>1,f=f||Je<b,b=Je,c.push(Je),Ke});y&&t.errors.push(function _L(){return new p.vHH(3012,nn)}()),f&&t.errors.push(function vL(){return new p.vHH(3200,nn)}());const M=e.steps.length;let F=0;u>0&&u<M?t.errors.push(function EL(){return new p.vHH(3202,nn)}()):0==u&&(F=1/(M-1));const B=M-1,G=t.currentTime,te=t.currentAnimateTimings,we=te.duration;return S.forEach((We,Ke)=>{const Ue=F>0?Ke==B?1:F*Ke:c[Ke],Je=Ue*we;t.currentTime=G+te.delay+Je,te.duration=Je,this._validateStyleAst(We,t),We.offset=Ue,r.styles.push(We)}),r}visitReference(e,t){return{type:8,animation:jo(this,dE(e.animation),t),options:Np(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Np(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Np(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function iV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(nV,"")),n=n.replace(/@\*/g,vI).replace(/@\w+/g,t=>vI+"-"+t.substr(1)).replace(/:animating/g,mM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Uo(t.collectedStyles,t.currentQuerySelector,{});const f=jo(this,dE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:Np(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function wL(){return new p.vHH(3013,nn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:EI(e.timings,t.errors,!0);return{type:12,animation:jo(this,dE(e.animation),t),timings:r,options:null}}}class oV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function SI(n){return!Array.isArray(n)&&"object"==typeof n}function Np(n){return n?(n=ny(n)).params&&(n.params=function sV(n){return n?ny(n):null}(n.params)):n={},n}function wM(n,e,t){return{duration:n,delay:e,easing:t}}function bM(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class MI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const dV=new RegExp(":enter","g"),fV=new RegExp(":leave","g");function DM(n,e,t,r,i,u={},c={},f,y,b=[]){return(new pV).buildKeyframes(n,e,t,r,i,u,c,f,y,b)}class pV{buildKeyframes(e,t,r,i,u,c,f,y,b,S=[]){b=b||new MI;const M=new IM(e,t,b,i,u,S,[]);M.options=y,M.currentTimeline.setStyles([c],null,M.errors,y),jo(this,r,M);const F=M.timelines.filter(B=>B.containsAnimation());if(Object.keys(f).length){let B;for(let G=F.length-1;G>=0;G--){const te=F[G];if(te.element===t){B=te;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([f],null,M.errors,y)}return F.length?F.map(B=>B.buildKeyframes()):[bM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?xp(r.duration):null,f=null!=r.delay?xp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=xI);const c=xp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>jo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?xp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),jo(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return EI(t.params?wI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?xp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=xI);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((b,S)=>{t.currentQueryIndex=S;const M=t.createSubContext(e.options,b);u&&M.delayNextStep(u),b===t.element&&(y=M.currentTimeline),jo(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const S=t.currentTimeline;y&&S.delayNextStep(y);const M=S.currentTime;jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const xI={};class IM{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new RI(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xp(r.duration)),null!=r.delay&&(i.delay=xp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=wI(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new IM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=xI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new gV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(dV,"."+this._enterClassName)).replace(fV,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function bL(n){return new p.vHH(3014,nn)}()),f}}class RI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new RI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Tc,this._currentKeyframe[t]=Tc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function mV(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Tc})):_h(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const y=wI(c[f],u,r);this._pendingStyles[f]=y,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Tc),this._updateStyle(f,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const b=_h(f,!0);Object.keys(b).forEach(S=>{const M=b[S];"!"==M?e.add(S):M==Tc&&t.add(S)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?bI(e.values()):[],c=t.size?bI(t.values()):[];if(r){const f=i[0],y=ny(f);f.offset=0,y.offset=1,i=[f,y]}return bM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class gV extends RI{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=_h(e[0],!1);y.offset=0,u.push(y);const b=_h(e[0],!1);b.offset=TO(f),u.push(b);const S=e.length-1;for(let M=1;M<=S;M++){let F=_h(e[M],!1);F.offset=TO((t+F.offset*r)/c),u.push(F)}r=c,t=0,i="",e=u}return bM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function TO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class CM{}class yV extends CM{normalizePropertyName(e,t){return vM(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(_V[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function dL(n,e){return new p.vHH(3005,nn)}())}return c+u}}const _V=(()=>function vV(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function AO(n,e,t,r,i,u,c,f,y,b,S,M,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:b,postStyleProps:S,totalTime:M,errors:F}}const TM={};class SO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function EV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,y,b,S){const M=[],F=this.ast.options&&this.ast.options.params||TM,G=this.buildStyles(r,f&&f.params||TM,M),te=y&&y.params||TM,we=this.buildStyles(i,te,M),We=new Set,Ke=new Map,Ue=new Map,Je="void"===i,yt={params:Object.assign(Object.assign({},F),te)},Dt=S?[]:DM(e,t,this.ast.animation,u,c,G,we,yt,b,M);let Ht=0;if(Dt.forEach(or=>{Ht=Math.max(or.duration+or.delay,Ht)}),M.length)return AO(t,this._triggerName,r,i,Je,G,we,[],[],Ke,Ue,Ht,M);Dt.forEach(or=>{const si=or.element,fE=Uo(Ke,si,{});or.preStyleProps.forEach(tl=>fE[tl]=!0);const vh=Uo(Ue,si,{});or.postStyleProps.forEach(tl=>vh[tl]=!0),si!==t&&We.add(si)});const Xn=bI(We.values());return AO(t,this._triggerName,r,i,Je,G,we,Dt,Xn,Ke,Ue,Ht)}}class wV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=ny(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let y=c[f];y.length>1&&(y=wI(y,i,t));const b=this.normalizer.normalizePropertyName(f,t);y=this.normalizer.normalizeStyleValue(f,b,y,t),r[b]=y})}}),r}}class DV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new wV(i.style,i.options&&i.options.params||{},r)}),MO(this.states,"true","1"),MO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new SO(e,i,this.states))}),this.fallbackTransition=function IV(n,e,t){return new SO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function MO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const CV=new MI;class TV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=EM(this._driver,t,r,[]);if(r.length)throw function ML(n){return new p.vHH(3503,nn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=aO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=DM(this._driver,t,u,gM,yI,{},{},r,CV,i),c.forEach(S=>{const M=Uo(f,S.element,{});S.postStyleProps.forEach(F=>M[F]=null)})):(i.push(function xL(){return new p.vHH(3300,nn)}()),c=[]),i.length)throw function RL(n){return new p.vHH(3504,nn)}();f.forEach((S,M)=>{Object.keys(S).forEach(F=>{S[F]=this._driver.computeStyle(M,F,Tc)})});const b=yh(c.map(S=>{const M=f.get(S.element);return this._buildPlayer(S,{},M)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function NL(n){return new p.vHH(3301,nn)}();return t}listen(e,t,r,i){const u=dM(t,"","","");return lM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const xO="ng-animate-queued",AM="ng-animate-disabled",RV=[],RO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ba="__ng_removed";class SM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function FV(n){return null!=n?n:null}(r?e.value:e),r){const u=ny(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const hE="void",MM=new SM(hE);class OV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Da(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function OL(n,e){return new p.vHH(3302,nn)}();if(null==r||0==r.length)throw function kL(n){return new p.vHH(3303,nn)}();if(!function LV(n){return"start"==n||"done"==n}(r))throw function PL(n,e){return new p.vHH(3400,nn)}();const u=Uo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Uo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Da(e,_I),Da(e,_I+"-"+t),f[t]=MM),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function FL(n){return new p.vHH(3401,nn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new xM(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Da(e,_I),Da(e,_I+"-"+t),this._engine.statesByElement.set(e,f={}));let y=f[t];const b=new SM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),f[t]=b,y||(y=MM),b.value!==hE&&y.value===b.value){if(!function UV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const te=[],we=u.matchStyles(y.value,y.params,te),We=u.matchStyles(b.value,b.params,te);te.length?this._engine.reportError(te):this._engine.afterFlush(()=>{Rp(e,we),el(e,We)})}return}const F=Uo(this._engine.playersByElement,e,[]);F.forEach(te=>{te.namespaceId==this.id&&te.triggerName==t&&te.queued&&te.destroy()});let B=u.matchTransition(y.value,b.value,e,b.params),G=!1;if(!B){if(!i)return;B=u.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:y,toState:b,player:c,isFallbackTransition:G}),G||(Da(e,xO),c.onStart(()=>{ry(e,xO)})),c.onDone(()=>{let te=this.players.indexOf(c);te>=0&&this.players.splice(te,1);const we=this._engine.playersByElement.get(e);if(we){let We=we.indexOf(c);We>=0&&we.splice(We,1)}}),this.players.push(c),F.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,vI,!0);r.forEach(i=>{if(i[ba])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,hE,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&yh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||MM,S=new SM(hE),M=new xM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:S,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ba];(!u||u===RO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Da(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=dM(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,lM(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new OV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(NI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!NI(t))return;const u=t[ba];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Da(e,AM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ry(e,AM))}removeNode(e,t,r,i){if(NI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[ba]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return NI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,vI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,mM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return yh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ba];if(r&&r.setForRemoval){if(e[ba]=RO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(AM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Da(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?yh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function LL(n){return new p.vHH(3402,nn)}()}_flushAnimations(e,t){const r=new MI,i=[],u=new Map,c=[],f=new Map,y=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const pt=this.driver.query(st,".ng-animate-queued",!0);for(let At=0;At<pt.length;At++)S.add(pt[At])});const M=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=kO(F,this.collectedEnterElements),G=new Map;let te=0;B.forEach((st,pt)=>{const At=gM+te++;G.set(pt,At),st.forEach(hn=>Da(hn,At))});const we=[],We=new Set,Ke=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const pt=this.collectedLeaveElements[st],At=pt[ba];At&&At.setForRemoval&&(we.push(pt),We.add(pt),At.hasAnimation?this.driver.query(pt,".ng-star-inserted",!0).forEach(hn=>We.add(hn)):Ke.add(pt))}const Ue=new Map,Je=kO(F,Array.from(We));Je.forEach((st,pt)=>{const At=yI+te++;Ue.set(pt,At),st.forEach(hn=>Da(hn,At))}),e.push(()=>{B.forEach((st,pt)=>{const At=G.get(pt);st.forEach(hn=>ry(hn,At))}),Je.forEach((st,pt)=>{const At=Ue.get(pt);st.forEach(hn=>ry(hn,At))}),we.forEach(st=>{this.processLeaveNode(st)})});const yt=[],Dt=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(At=>{const hn=At.player,Mi=At.element;if(yt.push(hn),this.collectedEnterElements.length){const Rs=Mi[ba];if(Rs&&Rs.setForMove){if(Rs.previousTriggersValues&&Rs.previousTriggersValues.has(At.triggerName)){const Op=Rs.previousTriggersValues.get(At.triggerName),wh=this.statesByElement.get(At.element);wh&&wh[At.triggerName]&&(wh[At.triggerName].value=Op)}return void hn.destroy()}}const nl=!M||!this.driver.containsElement(M,Mi),Ho=Ue.get(Mi),Eh=G.get(Mi),ar=this._buildInstruction(At,r,Eh,Ho,nl);if(ar.errors&&ar.errors.length)return void Dt.push(ar);if(nl)return hn.onStart(()=>Rp(Mi,ar.fromStyles)),hn.onDestroy(()=>el(Mi,ar.toStyles)),void i.push(hn);if(At.isFallbackTransition)return hn.onStart(()=>Rp(Mi,ar.fromStyles)),hn.onDestroy(()=>el(Mi,ar.toStyles)),void i.push(hn);const GO=[];ar.timelines.forEach(Rs=>{Rs.stretchStartingKeyframe=!0,this.disabledNodes.has(Rs.element)||GO.push(Rs)}),ar.timelines=GO,r.append(Mi,ar.timelines),c.push({instruction:ar,player:hn,element:Mi}),ar.queriedElements.forEach(Rs=>Uo(f,Rs,[]).push(hn)),ar.preStyleProps.forEach((Rs,Op)=>{const wh=Object.keys(Rs);if(wh.length){let kp=y.get(Op);kp||y.set(Op,kp=new Set),wh.forEach(NM=>kp.add(NM))}}),ar.postStyleProps.forEach((Rs,Op)=>{const wh=Object.keys(Rs);let kp=b.get(Op);kp||b.set(Op,kp=new Set),wh.forEach(NM=>kp.add(NM))})});if(Dt.length){const st=[];Dt.forEach(pt=>{st.push(function VL(n,e){return new p.vHH(3505,nn)}())}),yt.forEach(pt=>pt.destroy()),this.reportError(st)}const Ht=new Map,Xn=new Map;c.forEach(st=>{const pt=st.element;r.has(pt)&&(Xn.set(pt,pt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,Ht))}),i.forEach(st=>{const pt=st.element;this._getPreviousPlayers(pt,!1,st.namespaceId,st.triggerName,null).forEach(hn=>{Uo(Ht,pt,[]).push(hn),hn.destroy()})});const or=we.filter(st=>FO(st,y,b)),si=new Map;OO(si,this.driver,Ke,b,Tc).forEach(st=>{FO(st,y,b)&&or.push(st)});const vh=new Map;B.forEach((st,pt)=>{OO(vh,this.driver,new Set(st),y,"!")}),or.forEach(st=>{const pt=si.get(st),At=vh.get(st);si.set(st,Object.assign(Object.assign({},pt),At))});const tl=[],pE=[],gE={};c.forEach(st=>{const{element:pt,player:At,instruction:hn}=st;if(r.has(pt)){if(S.has(pt))return At.onDestroy(()=>el(pt,hn.toStyles)),At.disabled=!0,At.overrideTotalTime(hn.totalTime),void i.push(At);let Mi=gE;if(Xn.size>1){let Ho=pt;const Eh=[];for(;Ho=Ho.parentNode;){const ar=Xn.get(Ho);if(ar){Mi=ar;break}Eh.push(Ho)}Eh.forEach(ar=>Xn.set(ar,Mi))}const nl=this._buildAnimation(At.namespaceId,hn,Ht,u,vh,si);if(At.setRealPlayer(nl),Mi===gE)tl.push(At);else{const Ho=this.playersByElement.get(Mi);Ho&&Ho.length&&(At.parentPlayer=yh(Ho)),i.push(At)}}else Rp(pt,hn.fromStyles),At.onDestroy(()=>el(pt,hn.toStyles)),pE.push(At),S.has(pt)&&i.push(At)}),pE.forEach(st=>{const pt=u.get(st.element);if(pt&&pt.length){const At=yh(pt);st.setRealPlayer(At)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<we.length;st++){const pt=we[st],At=pt[ba];if(ry(pt,yI),At&&At.hasAnimation)continue;let hn=[];if(f.size){let nl=f.get(pt);nl&&nl.length&&hn.push(...nl);let Ho=this.driver.query(pt,mM,!0);for(let Eh=0;Eh<Ho.length;Eh++){let ar=f.get(Ho[Eh]);ar&&ar.length&&hn.push(...ar)}}const Mi=hn.filter(nl=>!nl.destroyed);Mi.length?VV(this,pt,Mi):this.processLeaveNode(pt)}return we.length=0,tl.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const pt=this.players.indexOf(st);this.players.splice(pt,1)}),st.play()}),tl}elementContainsData(e,t){let r=!1;const i=t[ba];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==hE;f.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,S=b!==u,M=Uo(r,b,[]);this._getPreviousPlayers(b,S,c,f,t.toState).forEach(B=>{const G=B.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),B.destroy(),M.push(B)})}Rp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,b=[],S=new Set,M=new Set,F=t.timelines.map(G=>{const te=G.element;S.add(te);const we=te[ba];if(we&&we.removedBeforeQueried)return new cE(G.duration,G.delay);const We=te!==y,Ke=function BV(n){const e=[];return PO(n,e),e}((r.get(te)||RV).map(Ht=>Ht.getRealPlayer())).filter(Ht=>!!Ht.element&&Ht.element===te),Ue=u.get(te),Je=c.get(te),yt=aO(0,this._normalizer,0,G.keyframes,Ue,Je),Dt=this._buildPlayer(G,yt,Ke);if(G.subTimeline&&i&&M.add(te),We){const Ht=new xM(e,f,te);Ht.setRealPlayer(Dt),b.push(Ht)}return Dt});b.forEach(G=>{Uo(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function PV(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,G.element,G))}),S.forEach(G=>Da(G,yO));const B=yh(F);return B.onDestroy(()=>{S.forEach(G=>ry(G,yO)),el(y,t.toStyles)}),M.forEach(G=>{Uo(i,G,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new cE(e.duration,e.delay)}}class xM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new cE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>lM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function NI(n){return n&&1===n.nodeType}function NO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function OO(n,e,t,r,i){const u=[];t.forEach(y=>u.push(NO(y)));const c=[];r.forEach((y,b)=>{const S={};y.forEach(M=>{const F=S[M]=e.computeStyle(b,M,i);(!F||0==F.length)&&(b[ba]=NV,c.push(b))}),n.set(b,S)});let f=0;return t.forEach(y=>NO(y,u[f++])),c}function kO(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const b=f.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function Da(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function ry(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function VV(n,e,t){yh(t).onDone(()=>n.processLeaveNode(e))}function PO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof sO?PO(r.players,e):e.push(r)}}function FO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class OI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new kV(e,t,r),this._timelineEngine=new TV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],S=EM(this._driver,u,y,[]);if(y.length)throw function AL(n,e){return new p.vHH(3404,nn)}();f=function bV(n,e,t){return new DV(n,e,t)}(i,S,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=uO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=uO(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let HV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&el(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(el(this._element,this._initialStyles),this._endStyles&&(el(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Rp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rp(this._element,this._endStyles),this._endStyles=null),el(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function RM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];$V(i)&&(e=e||{},e[i]=n[i])}return e}function $V(n){return"display"===n||"position"===n}class LO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:bO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class GV{validateStyleProperty(e){return hO(e)}matchesElement(e,t){return!1}containsElement(e,t){return fO(e,t)}getParentElement(e){return fM(e)}query(e,t,r){return pO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},S=c.filter(F=>F instanceof LO);(function KL(n,e){return 0===n||0===e})(r,i)&&S.forEach(F=>{let B=F.currentSnapshot;Object.keys(B).forEach(G=>b[G]=B[G])}),t=function ZL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(y){f[y]=bO(n,y)})}}return e}(e,t=t.map(F=>_h(F,!1)),b);const M=function jV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=RM(e[0]),e.length>1&&(r=RM(e[e.length-1]))):e&&(t=RM(e)),t||r?new HV(n,t,r):null}(e,t);return new LO(e,t,y,M)}}let qV=(()=>{class n extends tO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:p.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?nO(t):t;return VO(this._renderer,null,r,"register",[i]),new zV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(re))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class zV extends class sL{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new WV(this._id,e,t||{},this._renderer)}}class WV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return VO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function VO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const BO="@.disabled";let KV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new UO("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=S=>{Array.isArray(S)?S.forEach(y):this.engine.registerTrigger(c,f,t,S.name,S)};return r.data.animation.forEach(y),new ZV(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.FYo),p.LFG(OI),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class UO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==BO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZV extends UO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==BO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function YV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function QV(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let JV=(()=>{class n extends OI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(re),p.LFG(pM),p.LFG(CM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const jO=new p.OlP("AnimationModuleType"),HO=[{provide:tO,useClass:qV},{provide:CM,useFactory:function XV(){return new yV}},{provide:OI,useClass:JV},{provide:p.FYo,useFactory:function eB(n,e,t){return new KV(n,e,t)},deps:[wn,OI,p.R0b]}],$O=[{provide:pM,useFactory:()=>new GV},{provide:jO,useValue:"BrowserAnimations"},...HO],tB=[{provide:pM,useClass:gO},{provide:jO,useValue:"NoopAnimations"},...HO];let nB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tB:$O}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:$O,imports:[Zo]}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[iL]}),n.\u0275inj=p.cJS({providers:[],imports:[[Zo,rL,io.hO.initializeApp(eO_firebaseConfig),nB]]}),n})();(0,p.G48)(),pl().bootstrapModule(rB).catch(n=>console.error(n))},5867:(ut,Ae,k)=>{k.d(Ae,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=k(9681);(0,p.registerVersion)("firebase","9.6.11","app")},127:(ut,Ae,k)=>{k.d(Ae,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.6.11","app-compat")},820:(ut,Ae,k)=>{k.r(Ae);var p=k(5861),Y=k(3942),O=k(2090),le=k(9681),X=k(655),ge=k(1877),re=k(4859);const Oe=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rt=new ge.Yd("@firebase/auth");function Ze(_,...h){rt.logLevel<=ge.in.ERROR&&rt.error(`Auth (${le.SDK_VERSION}): ${_}`,...h)}function Ce(_,...h){throw je(_,...h)}function _e(_,...h){return je(_,...h)}function Ee(_,h,m){const E=Object.assign(Object.assign({},Le()),{[h]:m});return new O.LL("auth","Firebase",E).create(h,{appName:_.name})}function Ge(_,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Ce(_,"argument-error"),Ee(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(_,...h){if("string"!=typeof _){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return fe.create(_,...h)}function ne(_,h,...m){if(!_)throw je(h,...m)}function W(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Ze(h),new Error(h)}function ie(_,h){_||W(h)}const me=new Map;function se(_){ie(_ instanceof Function,"Expected a class definition");let h=me.get(_);return h?(ie(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,me.set(_,h),h)}function Tt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Xt(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class cn{constructor(h,m){this.shortDelay=h,this.longDelay=m,ie(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dn(_,h){ie(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class xi{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void W("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void W("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void W("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ss=new cn(3e4,6e4);function en(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function qt(_,h,m,E){return ur.apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(_,h,m,E,T={}){return oi(_,T,(0,p.Z)(function*(){let N={},z={};E&&("GET"===h?z=E:N={body:JSON.stringify(E)});const oe=(0,O.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Be=yield _._getAdditionalHeaders();return Be["Content-Type"]="application/json",_.languageCode&&(Be["X-Firebase-Locale"]=_.languageCode),xi.fetch()(Pr(_,_.config.apiHost,m,oe),Object.assign({method:h,headers:Be,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function oi(_,h,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,p.Z)(function*(_,h,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},on),h);try{const T=new os(_),N=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw as(_,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const oe=N.ok?z.errorMessage:z.error.message,[Be,tt]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Be)throw as(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Be)throw as(_,"email-already-in-use",z);const Et=E[Be]||Be.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw Ee(_,Et,tt);Ce(_,Et)}}catch(T){if(T instanceof O.ZR)throw T;Ce(_,"network-request-failed")}})).apply(this,arguments)}function kr(_,h,m,E){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,p.Z)(function*(_,h,m,E,T={}){const N=yield qt(_,h,m,E,T);return"mfaPendingCredential"in N&&Ce(_,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Pr(_,h,m,E){const T=`${h}${m}?${E}`;return _.config.emulator?dn(_.config,T):`${_.config.apiScheme}://${T}`}class os{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(_e(this.auth,"network-request-failed")),ss.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function as(_,h,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const T=_e(_,h,E);return T.customData._tokenResponse=m,T}function zr(){return(zr=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function er(_,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ai(_,h){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function En(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Ia(){return(Ia=(0,p.Z)(function*(_,h=!1){const m=(0,O.m9)(_),E=yield m.getIdToken(h),T=ot(E);ne(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const N="object"==typeof T.firebase?T.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:T,token:E,authTime:En(zt(T.auth_time)),issuedAtTime:En(zt(T.iat)),expirationTime:En(zt(T.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(_){return 1e3*Number(_)}function ot(_){const[h,m,E]=_.split(".");if(void 0===h||void 0===m||void 0===E)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(m);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T),null}}function lr(_,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,p.Z)(function*(_,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof O.ZR&&Gt(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Gt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class ho{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,p.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class yr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(_){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.Z)(function*(_){var h;const m=_.auth,E=yield _.getIdToken(),T=yield lr(_,ai(m,{idToken:E}));ne(null==T?void 0:T.users.length,m,"internal-error");const N=T.users[0];_._notifyReloadListener(N);const z=(null===(h=N.providerUserInfo)||void 0===h?void 0:h.length)?Te(N.providerUserInfo):[],oe=Ye(_.providerData,z),Et=!!_.isAnonymous&&!(_.email&&N.passwordHash||(null==oe?void 0:oe.length)),at={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new yr(N.createdAt,N.lastLoginAt),isAnonymous:Et};Object.assign(_,at)})).apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(_){const h=(0,O.m9)(_);yield cr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ye(_,h){return[..._.filter(E=>!h.some(T=>T.providerId===E.providerId)),...h]}function Te(_){return _.map(h=>{var{providerId:m}=h,E=(0,X._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ht(){return(ht=(0,p.Z)(function*(_,h){const m=yield oi(_,{},(0,p.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:N}=_.config,z=Pr(_,T,"/v1/token",`key=${N}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",xi.fetch()(z,{method:"POST",headers:oe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(void 0!==h.idToken,"internal-error"),ne(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function bt(_){const h=ot(_);return ne(h,"internal-error"),ne(void 0!==h.exp,"internal-error"),ne(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,p.Z)(function*(){return ne(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,p.Z)(function*(){const{accessToken:T,refreshToken:N,expiresIn:z}=yield function et(_,h){return ht.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(T,N,Number(z))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:T,expirationTime:N}=m,z=new $t;return E&&(ne("string"==typeof E,"internal-error",{appName:h}),z.refreshToken=E),T&&(ne("string"==typeof T,"internal-error",{appName:h}),z.accessToken=T),N&&(ne("number"==typeof N,"internal-error",{appName:h}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return W("not implemented")}}function Bt(_,h){ne("string"==typeof _||void 0===_,"internal-error",{appName:h})}class j{constructor(h){var{uid:m,auth:E,stsTokenManager:T}=h,N=(0,X._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ho(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new yr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,p.Z)(function*(){const E=yield lr(m,m.stsTokenManager.getToken(m.auth,h));return ne(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function Os(_){return Ia.apply(this,arguments)}(this,h)}reload(){return function _r(_){return jt.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new j(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,p.Z)(function*(){let T=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),T=!0),m&&(yield cr(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,p.Z)(function*(){const m=yield h.getIdToken();return yield lr(h,function ct(_,h){return zr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,T,N,z,oe,Be,tt,Et;const at=null!==(E=m.displayName)&&void 0!==E?E:void 0,Mn=null!==(T=m.email)&&void 0!==T?T:void 0,rs=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Wl=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Fu=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,Lu=null!==(Be=m._redirectEventId)&&void 0!==Be?Be:void 0,ef=null!==(tt=m.createdAt)&&void 0!==tt?tt:void 0,Ny=null!==(Et=m.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:ua,emailVerified:ud,isAnonymous:ld,providerData:tf,stsTokenManager:cd}=m;ne(ua&&cd,h,"internal-error");const Xr=$t.fromJSON(this.name,cd);ne("string"==typeof ua,h,"internal-error"),Bt(at,h.name),Bt(Mn,h.name),ne("boolean"==typeof ud,h,"internal-error"),ne("boolean"==typeof ld,h,"internal-error"),Bt(rs,h.name),Bt(Wl,h.name),Bt(Fu,h.name),Bt(Lu,h.name),Bt(ef,h.name),Bt(Ny,h.name);const nf=new j({uid:ua,auth:h,email:Mn,emailVerified:ud,displayName:at,isAnonymous:ld,photoURL:Wl,phoneNumber:rs,tenantId:Fu,stsTokenManager:Xr,createdAt:ef,lastLoginAt:Ny});return tf&&Array.isArray(tf)&&(nf.providerData=tf.map(ug=>Object.assign({},ug))),Lu&&(nf._redirectEventId=Lu),nf}static _fromIdTokenResponse(h,m,E=!1){return(0,p.Z)(function*(){const T=new $t;T.updateFromServerResponse(m);const N=new j({uid:m.localId,auth:h,stsTokenManager:T,isAnonymous:E});return yield cr(N),N})()}}const q=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var T=this;return(0,p.Z)(function*(){T.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=E.storage[m];return void 0===T?null:T})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function de(_,h,m){return`firebase:${_}:${h}:${m}`}class Q{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:T,name:N}=this.auth;this.fullUserKey=de(this.userKey,T.apiKey,N),this.fullPersistenceKey=de("persistence",T.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,p.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?j._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,p.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Q(se(q),h,E);const T=(yield Promise.all(m.map(function(){var tt=(0,p.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let N=T[0]||se(q);const z=de(E,h.config.apiKey,h.name);let oe=null;for(const tt of m)try{const Et=yield tt._get(z);if(Et){const at=j._fromJSON(h,Et);tt!==N&&(oe=at),N=tt;break}}catch(Et){}const Be=T.filter(tt=>tt._shouldAllowMigration);return N._shouldAllowMigration&&Be.length?(N=Be[0],oe&&(yield N._set(z,oe.toJSON())),yield Promise.all(m.map(function(){var tt=(0,p.Z)(function*(Et){if(Et!==N)try{yield Et._remove(z)}catch(at){}});return function(Et){return tt.apply(this,arguments)}}())),new Q(N,h,E)):new Q(N,h,E)})()}}function Ve(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Wt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(vt(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ot(h))return"Blackberry";if(fn(h))return"Webos";if(Yt(h))return"Safari";if((h.includes("chrome/")||vr(h))&&!h.includes("edge/"))return"Chrome";if(Cn(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function vt(_=(0,O.z$)()){return/firefox\//i.test(_)}function Yt(_=(0,O.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function vr(_=(0,O.z$)()){return/crios\//i.test(_)}function Wt(_=(0,O.z$)()){return/iemobile/i.test(_)}function Cn(_=(0,O.z$)()){return/android/i.test(_)}function Ot(_=(0,O.z$)()){return/blackberry/i.test(_)}function fn(_=(0,O.z$)()){return/webos/i.test(_)}function nr(_=(0,O.z$)()){return/iphone|ipad|ipod/i.test(_)}function us(_=(0,O.z$)()){return nr(_)||Cn(_)||fn(_)||Ot(_)||/windows phone/i.test(_)||Wt(_)}function Ta(_,h=[]){let m;switch(_){case"Browser":m=Ve((0,O.z$)());break;case"Worker":m=`${Ve((0,O.z$)())}-${_}`;break;default:m=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${le.SDK_VERSION}/${E}`}class ui{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var T,N;if(!E._deleted&&(E.persistenceManager=yield Q.create(E,h),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,p.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m)}})()}initializeCurrentUser(h){var m=this;return(0,p.Z)(function*(){var E;let T=yield m.assertedPersistence.getCurrentUser();if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==T?void 0:T._redirectEventId,oe=yield m.tryRedirectSignIn(h);(!N||N===z)&&(null==oe?void 0:oe.user)&&(T=oe.user)}return T?T._redirectEventId?(ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===T._redirectEventId?m.directlySetCurrentUser(T):m.reloadAndSetCurrentUserOrClear(T)):m.reloadAndSetCurrentUserOrClear(T):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(T){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,p.Z)(function*(){try{yield cr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function _t(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,p.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,p.Z)(function*(){const E=h?(0,O.m9)(h):null;return E&&ne(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h){var m=this;return(0,p.Z)(function*(){if(!m._deleted)return h&&ne(m.tenantId===h.tenantId,m,"tenant-id-mismatch"),m.queue((0,p.Z)(function*(){yield m.directlySetCurrentUser(h),m.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,p.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(se(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,p.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(m);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&se(h)||m._popupRedirectResolver;ne(E,m,"argument-error"),m.redirectPersistenceManager=yield Q.create(m,[se(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,p.Z)(function*(){var E,T;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,p.Z)(function*(){if(h===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,T){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?h.addObserver(m,E,T):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function ke(_){return(0,O.m9)(_)}class Ft{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dr(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Bn(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class an{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return W("not implemented")}_getIdTokenResponse(h){return W("not implemented")}_linkToIdToken(h,m){return W("not implemented")}_getReauthenticationResolver(h){return W("not implemented")}}function Nn(_,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:resetPassword",en(_,h))})).apply(this,arguments)}function Rt(_,h){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function po(_,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:update",en(_,h))})).apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPassword",en(_,h))})).apply(this,arguments)}function ls(_,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:sendOobCode",en(_,h))})).apply(this,arguments)}function Ri(_,h){return un.apply(this,arguments)}function un(){return(un=(0,p.Z)(function*(_,h){return ls(_,h)})).apply(this,arguments)}function ou(_,h){return au.apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(_,h){return ls(_,h)})).apply(this,arguments)}function Ni(_,h){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(_,h){return ls(_,h)})).apply(this,arguments)}function Ac(_,h){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,p.Z)(function*(_,h){return ls(_,h)})).apply(this,arguments)}function Wr(){return(Wr=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,h))})).apply(this,arguments)}function Sc(){return(Sc=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithEmailLink",en(_,h))})).apply(this,arguments)}class lu extends an{constructor(h,m,E,T=null){super("password",E),this._email=h,this._password=m,this._tenantId=T}static _fromEmailAndPassword(h,m){return new lu(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new lu(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Fs(_,h){return hr.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function uu(_,h){return Wr.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Rt(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function bh(_,h){return Sc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Un(_,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithIdp",en(_,h))})).apply(this,arguments)}class ds extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new ds(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Ce("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T}=m,N=(0,X._T)(m,["providerId","signInMethod"]);if(!E||!T)return null;const z=new ds(E,T);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(h){return Un(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Un(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Un(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,O.xO)(m)}return h}}function Fp(_,h){return rl.apply(this,arguments)}function rl(){return(rl=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:sendVerificationCode",en(_,h))})).apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,h))})).apply(this,arguments)}function xc(){return(xc=(0,p.Z)(function*(_,h){const m=yield kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,h));if(m.temporaryProof)throw as(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Vp={USER_NOT_FOUND:"user-not-found"};function Rc(){return(Rc=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithPhoneNumber",en(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Vp)})).apply(this,arguments)}class Go extends an{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Go({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Go({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function il(_,h){return Vs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function Lp(_,h){return xc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Bp(_,h){return Rc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:T}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}=h;return E||m||T||N?new Go({verificationId:m,verificationCode:E,phoneNumber:T,temporaryProof:N}):null}}class go{constructor(h){var m,E,T,N,z,oe;const Be=(0,O.zd)((0,O.pd)(h)),tt=null!==(m=Be.apiKey)&&void 0!==m?m:null,Et=null!==(E=Be.oobCode)&&void 0!==E?E:null,at=function iy(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Be.mode)&&void 0!==T?T:null);ne(tt&&Et&&at,"argument-error"),this.apiKey=tt,this.operation=at,this.code=Et,this.continueUrl=null!==(N=Be.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Be.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(oe=Be.tenantId)&&void 0!==oe?oe:null}static parseLink(h){const m=function cu(_){const h=(0,O.zd)((0,O.pd)(_)).link,m=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(_)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||h||_}(h);try{return new go(m)}catch(E){return null}}}let sl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return lu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const T=go.parseLink(E);return ne(T,"argument-error"),lu._fromEmailAndCode(m,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Bs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Kr extends Bs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qo extends Kr{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),ds._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:N,nonce:z,providerId:oe}=h;if(!E&&!T&&!m&&!N||!oe)return null;try{return new qo(oe)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:N})}catch(Be){return null}}}let mo=(()=>{class _ extends Kr{constructor(){super("facebook.com")}static credential(m){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Sa=(()=>{class _ extends Kr{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:T}=m;if(!E&&!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Nc=(()=>{class _ extends Kr{constructor(){super("github.com")}static credential(m){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Oi extends an{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return Un(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Un(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Un(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:T,pendingToken:N}=m;return E&&T&&N&&E===T?new Oi(E,N):null}static _create(h,m){return new Oi(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ci extends Bs{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ci.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ci.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=Oi.fromJSON(h);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return Oi._create(E,m)}catch(T){return null}}}let du=(()=>{class _ extends Kr{constructor(){super("twitter.com")}static credential(m,E){return ds._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=m;if(!E||!T)return null;try{return _.credential(E,T)}catch(N){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function hu(_,h){return Er.apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signUp",en(_,h))})).apply(this,arguments)}class fr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,T=!1){return(0,p.Z)(function*(){const N=yield j._fromIdTokenResponse(h,E,T),z=Ih(E);return new fr({user:N,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,p.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const T=Ih(E);return new fr({user:h,providerId:T,_tokenResponse:E,operationType:m})})()}}function Ih(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Oc(){return(Oc=(0,p.Z)(function*(_){var h;const m=ke(_);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new fr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield hu(m,{returnSecureToken:!0}),T=yield fr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class pu extends O.ZR{constructor(h,m,E,T){var N;super(m.code,m.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,pu.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,T){return new pu(h,m,E,T)}}function gu(_,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?pu._fromErrorAndOperation(_,N,h,E):N})}function hs(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function ol(){return(ol=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);yield js(!0,m,h);const{providerUserInfo:E}=yield er(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),T=hs(E||[]);return m.providerData=m.providerData.filter(N=>T.has(N.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function _n(_,h){return zo.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(_,h,m=!1){const E=yield lr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),m);return fr._forOperation(_,"link",E)})).apply(this,arguments)}function js(_,h,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(_,h,m){yield cr(h);const T=!1===_?"provider-already-linked":"no-such-provider";ne(hs(h.providerData).has(m)===_,h.auth,T)})).apply(this,arguments)}function kc(_,h){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(_,h,m=!1){const{auth:E}=_,T="reauthenticate";try{const N=yield lr(_,gu(E,T,h,_),m);ne(N.idToken,E,"internal-error");const z=ot(N.idToken);ne(z,E,"internal-error");const{sub:oe}=z;return ne(_.uid===oe,E,"user-mismatch"),fr._forOperation(_,T,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Ce(E,"user-mismatch"),N}})).apply(this,arguments)}function _o(_,h){return wr.apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(_,h,m=!1){const E="signIn",T=yield gu(_,E,h),N=yield fr._fromIdTokenResponse(_,E,T);return m||(yield _._updateCurrentUser(N.user)),N})).apply(this,arguments)}function On(_,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(_,h){return _o(ke(_),h)})).apply(this,arguments)}function ki(_,h){return br.apply(this,arguments)}function br(){return(br=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_);return yield js(!1,m,h.providerId),_n(m,h)})).apply(this,arguments)}function Hs(_,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(_,h){return kc((0,O.m9)(_),h)})).apply(this,arguments)}function mu(_,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(_,h){return kr(_,"POST","/v1/accounts:signInWithCustomToken",en(_,h))})).apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(_,h){const m=ke(_),E=yield mu(m,{token:h,returnSecureToken:!0}),T=yield fr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class ft{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?yu._fromServerResponse(h,m):Ce(h,"internal-error")}}class yu extends ft{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new yu(m)}}function Ra(_,h,m){var E;ne((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function vu(){return(vu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"PASSWORD_RESET",email:h};m&&Ra(E,T,m),yield ou(E,T)})).apply(this,arguments)}function al(){return(al=(0,p.Z)(function*(_,h,m){yield Nn((0,O.m9)(_),{oobCode:h,newPassword:m})})).apply(this,arguments)}function De(){return(De=(0,p.Z)(function*(_,h){yield po((0,O.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ut(_,h){return ll.apply(this,arguments)}function ll(){return(ll=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),E=yield Nn(m,{oobCode:h}),T=E.requestType;switch(ne(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(E.mfaInfo,m,"internal-error");default:ne(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=ft._fromServerResponse(ke(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:T}})).apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(_,h){const{data:m}=yield Ut((0,O.m9)(_),h);return m.email})).apply(this,arguments)}function Yr(){return(Yr=(0,p.Z)(function*(_,h,m){const E=ke(_),T=yield hu(E,{returnSecureToken:!0,email:h,password:m}),N=yield fr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function Pc(){return(Pc=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T={requestType:"EMAIL_SIGNIN",email:h};ne(m.handleCodeInApp,E,"argument-error"),m&&Ra(E,T,m),yield Ni(E,T)})).apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=sl.credentialWithLink(h,m||Tt());return ne(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),On(E,T)})).apply(this,arguments)}function pr(_,h){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:createAuthUri",en(_,h))})).apply(this,arguments)}function zs(){return(zs=(0,p.Z)(function*(_,h){const E={identifier:h,continueUri:Xt()?Tt():"http://localhost"},{signinMethods:T}=yield pr((0,O.m9)(_),E);return T||[]})).apply(this,arguments)}function fl(){return(fl=(0,p.Z)(function*(_,h){const m=(0,O.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Ra(m.auth,T,h);const{email:N}=yield Ri(m.auth,T);N!==_.email&&(yield _.reload())})).apply(this,arguments)}function Iu(){return(Iu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};m&&Ra(E.auth,N,m);const{email:z}=yield Ac(E.auth,N);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function pl(_,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(_,h){return qt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function gl(){return(gl=(0,p.Z)(function*(_,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,O.m9)(_),N={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},z=yield lr(E,pl(E.auth,N));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const oe=E.providerData.find(({providerId:Be})=>"password"===Be);oe&&(oe.displayName=E.displayName,oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function yl(_,h,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(_,h,m){const{auth:E}=_,N={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(N.email=h),m&&(N.password=m);const z=yield lr(_,Rt(E,N));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Eo{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class Vc extends Eo{constructor(h,m,E,T){super(h,m,E),this.username=T}}class Bc extends Eo{constructor(h,m){super(h,"facebook.com",m)}}class wo extends Vc{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Ws extends Eo{constructor(h,m){super(h,"google.com",m)}}class _l extends Vc{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Dr(_){const{user:h,_tokenResponse:m}=_;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Lc(_){var h,m;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},N=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(m=null===(h=ot(_.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new Eo(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new Bc(N,T);case"github.com":return new wo(N,T);case"google.com":return new Ws(N,T);case"twitter.com":return new _l(N,T,_.screenName||null);case"custom":case"anonymous":return new Eo(N,null);default:return new Eo(N,E,T)}}(m)}class ps{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new ps("enroll",h)}static _fromMfaPendingCredential(h){return new ps("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ps._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ps._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Oa{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=ke(h),T=m.customData._serverResponse,N=(T.mfaInfo||[]).map(oe=>ft._fromServerResponse(E,oe));ne(T.mfaPendingCredential,E,"internal-error");const z=ps._fromMfaPendingCredential(T.mfaPendingCredential);return new Oa(z,N,function(){var oe=(0,p.Z)(function*(Be){const tt=yield Be._process(E,z);delete T.mfaInfo,delete T.mfaPendingCredential;const Et=Object.assign(Object.assign({},T),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(m.operationType){case"signIn":const at=yield fr._fromIdTokenResponse(E,m.operationType,Et);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return ne(m.user,E,"internal-error"),fr._forOperation(m.user,m.operationType,Et);default:Ce(E,"internal-error")}});return function(Be){return oe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,p.Z)(function*(){return m.signInResolver(h)})()}}function jn(_,h){return qt(_,"POST","/v2/accounts/mfaEnrollment:start",en(_,h))}class gs{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ft._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new gs(h)}getSession(){var h=this;return(0,p.Z)(function*(){return ps._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,p.Z)(function*(){const T=h,N=yield E.getSession(),z=yield lr(E.user,T._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(h){var m=this;return(0,p.Z)(function*(){const E="string"==typeof h?h:h.uid,T=yield m.user.getIdToken(),N=yield lr(m.user,function jp(_,h){return qt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",en(_,h))}(m.user.auth,{idToken:T,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Yo=new WeakMap,wl="__sak";class bo{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(wl,"1"),this.storage.removeItem(wl),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pn=(()=>{class _ extends bo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hc(){const _=(0,O.z$)();return Yt(_)||nr(_)}()&&function Kn(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=us(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),N=this.localCache[E];T!==N&&m(E,N,T)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((oe,Be,tt)=>{this.notifyListeners(oe,tt)});const T=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(T);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!E)return}const N=()=>{const oe=this.storage.getItem(T);!E&&this.localCache[T]===oe||this.notifyListeners(T,oe)},z=this.storage.getItem(T);!function Ca(){return(0,O.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var T=()=>super._set,N=this;return(0,p.Z)(function*(){yield T().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,T=this;return(0,p.Z)(function*(){const N=yield E().call(T,m);return T.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,T=this;return(0,p.Z)(function*(){yield E().call(T,m),delete T.localCache[m]})()}}return _.type="LOCAL",_})(),rr=(()=>{class _ extends bo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Fr=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const T=new _(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const T=m,{eventId:N,eventType:z,data:oe}=T.data,Be=E.handlersMap[z];if(!(null==Be?void 0:Be.size))return;T.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const tt=Array.from(Be).map(function(){var at=(0,p.Z)(function*(Mn){return Mn(T.origin,oe)});return function(Mn){return at.apply(this,arguments)}}()),Et=yield function Qr(_){return Promise.all(_.map(function(){var h=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(tt);T.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:Et})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Qo(_="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return _+m}class $c{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var T=this;return(0,p.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,oe;return new Promise((Be,tt)=>{const Et=Qo("",20);N.port1.start();const at=setTimeout(()=>{tt(new Error("unsupported_event"))},E);oe={messageChannel:N,onMessage(Mn){const rs=Mn;if(rs.data.eventId===Et)switch(rs.data.status){case"ack":clearTimeout(at),z=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Be(rs.data.response);break;default:clearTimeout(at),clearTimeout(z),tt(new Error("invalid_response"))}}},T.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),T.target.postMessage({eventType:h,eventId:Et,data:m},[N.port2])}).finally(()=>{oe&&T.removeMessageHandler(oe)})})()}}function gn(){return window}function Fi(){return void 0!==gn().WorkerGlobalScope&&"function"==typeof gn().importScripts}function hi(){return(hi=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const bl="firebaseLocalStorageDb",Do="firebaseLocalStorage",Hn="fbase_key";class ms{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Jo(_,h){return _.transaction([Do],h?"readwrite":"readonly").objectStore(Do)}function Zs(){const _=indexedDB.open(bl,1);return new Promise((h,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Do,{keyPath:Hn})}catch(T){m(T)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Do)?h(E):(E.close(),yield function fi(){const _=indexedDB.deleteDatabase(bl);return new ms(_).toPromise()}(),h(yield Zs()))}))})}function pi(_,h,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(_,h,m){const E=Jo(_,!0).put({[Hn]:h,value:m});return new ms(E).toPromise()})).apply(this,arguments)}function Ys(){return(Ys=(0,p.Z)(function*(_,h){const m=Jo(_,!1).get(h),E=yield new ms(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Qi(_,h){const m=Jo(_,!0).delete(h);return new ms(m).toPromise()}const Li=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Zs()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let T=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(T++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return Fi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Fr._getInstance(function Gc(){return Fi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(T,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(T,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(T,N){return["keyChanged"]});return function(T,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,T;if(m.activeServiceWorker=yield function Tu(){return hi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new $c(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=N[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Lt(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Zs();return yield pi(m,wl,"1"),yield Qi(m,wl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(N=>pi(N,m,E)),T.localCache[m]=E,T.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const T=yield E._withRetries(N=>function Il(_,h){return Ys.apply(this,arguments)}(N,m));return E.localCache[m]=T,T})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(T=>Qi(T,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(z=>{const oe=Jo(z,!1).getAll();return new ms(oe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const T=[],N=new Set;for(const{fbase_key:z,value:oe}of E)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(oe)&&(m.notifyListeners(z,oe),T.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(m,E){this.localCache[m]=E;const T=this.listeners[m];if(T)for(const N of Array.from(T))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Xo(_,h){return qt(_,"POST","/v2/accounts/mfaSignIn:start",en(_,h))}function Vi(){return(Vi=(0,p.Z)(function*(_){return(yield qt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fn(_){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=T=>{const N=_e("internal-error");N.customData=T,m(N)},E.type="text/javascript",E.charset="UTF-8",function zc(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function Co(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ir=1e12;class ys{constructor(h){this.auth=h,this.counter=Ir,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new Ji(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||Ir;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||Ir))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(h||Ir))||void 0===E||E.execute(),""})()}}class Ji{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dn(_){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qs=Co("rcb"),Wc=new cn(3e4,6e4);class $p{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!gn().grecaptcha}load(h,m=""){return ne(function Gp(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(gn().grecaptcha):new Promise((E,T)=>{const N=gn().setTimeout(()=>{T(_e(h,"network-request-failed"))},Wc.get());gn()[Qs]=()=>{gn().clearTimeout(N),delete gn()[Qs];const oe=gn().grecaptcha;if(!oe)return void T(_e(h,"internal-error"));const Be=oe.render;oe.render=(tt,Et)=>{const at=Be(tt,Et);return this.counter++,at},this.hostLanguage=m,E(oe)},Fn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Qs,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!gn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qp{load(h){return(0,p.Z)(function*(){return new ys(h)})()}clearedOneInstance(){}}const Js="recaptcha",Jr={theme:"light",type:"image"};class zp{constructor(h,m=Object.assign({},Jr),E){this.parameters=m,this.type=Js,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(E),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qp:new $p,this.validateStartingState()}verify(){var h=this;return(0,p.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const z=oe=>{!oe||(h.tokenChangeListeners.delete(z),N(oe))};h.tokenChangeListeners.add(z),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=gn()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,p.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,p.Z)(function*(){ne(Xt()&&!Fi(),h.auth,"internal-error"),yield function Xs(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Lr(_){return Vi.apply(this,arguments)}(h.auth);ne(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _s{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Go._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function In(){return(In=(0,p.Z)(function*(_,h,m){const E=ke(_),T=yield Cr(E,h,(0,O.m9)(m));return new _s(T,N=>On(E,N))})).apply(this,arguments)}function na(){return(na=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);yield js(!1,E,"phone");const T=yield Cr(E.auth,h,(0,O.m9)(m));return new _s(T,N=>ki(E,N))})).apply(this,arguments)}function Al(){return(Al=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_),T=yield Cr(E.auth,h,(0,O.m9)(m));return new _s(T,N=>Hs(E,N))})).apply(this,arguments)}function Cr(_,h,m){return gi.apply(this,arguments)}function gi(){return(gi=(0,p.Z)(function*(_,h,m){var E;const T=yield m.verify();try{let N;if(ne("string"==typeof T,_,"argument-error"),ne(m.type===Js,_,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const z=N.session;if("phoneNumber"in N)return ne("enroll"===z.type,_,"internal-error"),(yield jn(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===z.type,_,"internal-error");const oe=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return ne(oe,_,"missing-multi-factor-info"),(yield Xo(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Fp(_,{phoneNumber:N.phoneNumber,recaptchaToken:T});return z}}finally{m._reset()}})).apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(_,h){yield _n((0,O.m9)(_),h)})).apply(this,arguments)}let Ui=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=ke(m)}verifyPhoneNumber(m,E){return Cr(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Go._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:T}=m;return E&&T?Go._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Xi(_,h){return h?se(h):(ne(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ka extends an{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Un(h,this._buildIdpRequest())}_linkToIdToken(h,m){return Un(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return Un(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Ml(_){return _o(_.auth,new ka(_),_.bypassAuthState)}function xl(_){const{auth:h,user:m}=_;return ne(m,h,"internal-error"),kc(m,new ka(_),_.bypassAuthState)}function Vt(_){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,p.Z)(function*(_){const{auth:h,user:m}=_;return ne(m,h,"internal-error"),_n(m,new ka(_),_.bypassAuthState)})).apply(this,arguments)}class Zn{constructor(h,m,E,T,N=!1){this.auth=h,this.resolver=E,this.user=T,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,p.Z)(function*(E,T){h.pendingPromise={resolve:E,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(E,T){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:N,tenantId:z,error:oe,type:Be}=h;if(oe)return void m.reject(oe);const tt={auth:m.auth,requestUri:E,sessionId:T,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Be)(tt))}catch(Et){m.reject(Et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ml;case"linkViaPopup":case"linkViaRedirect":return Vt;case"reauthViaPopup":case"reauthViaRedirect":return xl;default:Ce(this.auth,"internal-error")}}resolve(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nl=new cn(2e3,1e4);function Kc(){return(Kc=(0,p.Z)(function*(_,h,m){const E=ke(_);Ge(_,h,Bs);const T=Xi(E,m);return new ts(E,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Su(){return(Su=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Bs);const T=Xi(E.auth,m);return new ts(E.auth,"reauthViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Bs);const T=Xi(E.auth,m);return new ts(E.auth,"linkViaPopup",h,T,E).executeNotNull()})).apply(this,arguments)}let ts=(()=>{class _ extends Zn{constructor(m,E,T,N,z){super(m,E,N,z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return ne(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){ie(1===m.filter.length,"Popup operations only handle one event");const E=Qo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(_e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Nl.get())};m()}}return _.currentPopupAction=null,_})();const ns=new Map;class Yn extends Zn{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=ns.get(m.auth._key());if(!E){try{const N=(yield function mi(_,h){return Ol.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(N)}catch(T){E=()=>Promise.reject(T)}ns.set(m.auth._key(),E)}return m.bypassAuthState||ns.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const T=yield E.auth._redirectUserForId(h.eventId);if(T)return E.user=T,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Ol(){return(Ol=(0,p.Z)(function*(_,h){const m=C(h),E=I(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(m));return yield E._remove(m),T})).apply(this,arguments)}function Ao(_,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,p.Z)(function*(_,h){return I(_)._set(C(h),"true")})).apply(this,arguments)}function I(_){return se(_._redirectPersistence)}function C(_){return de("pendingRedirect",_.config.apiKey,_.name)}function K(){return(K=(0,p.Z)(function*(_,h,m){const E=ke(_);Ge(_,h,Bs);const T=Xi(E,m);return yield Ao(T,E),T._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function Re(){return(Re=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Bs);const T=Xi(E.auth,m);yield Ao(T,E.auth);const N=yield So(E);return T._openRedirect(E.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(_,h,m){const E=(0,O.m9)(_);Ge(E.auth,h,Bs);const T=Xi(E.auth,m);yield js(!1,E,h.providerId),yield Ao(T,E.auth);const N=yield So(E);return T._openRedirect(E.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(_,h){return yield ke(_)._initializationPromise,Sn(_,h,!1)})).apply(this,arguments)}function Sn(_,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,p.Z)(function*(_,h,m=!1){const E=ke(_),T=Xi(E,h),z=yield new Yn(E,T,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,h)),z})).apply(this,arguments)}function So(_){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(_){const h=Qo(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class ji{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function kl(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yc(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!Yc(h)){const T=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(_e(this.auth,T))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mo(h))}saveEventToCache(h){this.cachedEventUids.add(Mo(h)),this.lastProcessedEventTime=Date.now()}}function Mo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function Yc({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Pl(_){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(_,h={}){return qt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const Kp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oy=/^https?/;function Es(){return(Es=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Pl(_);for(const m of h)try{if(Fl(m))return}catch(E){}Ce(_,"unauthorized-domain")})).apply(this,arguments)}function Fl(_){const h=Tt(),{protocol:m,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!oy.test(m))return!1;if(Kp.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const uy=new cn(3e4,6e4);function ly(){const _=gn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let Qc=null;function cy(_){return Qc=Qc||function Zp(_){return new Promise((h,m)=>{var E,T,N;function z(){ly(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ly(),m(_e(_,"network-request-failed"))},timeout:uy.get()})}if(null===(T=null===(E=gn().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(N=gn().gapi)||void 0===N?void 0:N.load)){const oe=Co("iframefcb");return gn()[oe]=()=>{gapi.load?z():m(_e(_,"network-request-failed"))},Fn(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Be=>m(Be))}z()}}).catch(h=>{throw Qc=null,h})}(_),Qc}const Sh=new cn(5e3,15e3),Ro={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fa(_){const h=_.config;ne(h.authDomain,_,"auth-domain-config-required");const m=h.emulator?dn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:le.SDK_VERSION},T=Jc.get(_.config.apiHost);T&&(E.eid=T);const N=_._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function No(){return No=(0,p.Z)(function*(_){const h=yield cy(_),m=gn().gapi;return ne(m,_,"internal-error"),h.open({where:document.body,url:Fa(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ro,dontclear:!0},E=>new Promise(function(){var T=(0,p.Z)(function*(N,z){yield E.restyle({setHideOnLeave:!1});const oe=_e(_,"network-request-failed"),Be=gn().setTimeout(()=>{z(oe)},Sh.get());function tt(){gn().clearTimeout(Be),N(E)}E.ping(tt).then(tt,()=>{z(oe)})});return function(N,z){return T.apply(this,arguments)}}()))}),No.apply(this,arguments)}const hy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class td{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Nh(_,h,m,E,T,N){ne(_.config.authDomain,_,"auth-domain-config-required"),ne(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:le.SDK_VERSION,eventId:T};if(h instanceof Bs){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Be,tt]of Object.entries(N||{}))z[Be]=tt}if(h instanceof Kr){const Be=h.getScopes().filter(tt=>""!==tt);Be.length>0&&(z.scopes=Be.join(","))}_.tenantId&&(z.tid=_.tenantId);const oe=z;for(const Be of Object.keys(oe))void 0===oe[Be]&&delete oe[Be];return`${function py({config:_}){return _.emulator?dn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,O.xO)(oe).slice(1)}`}const to="webStorageSupport";class Oh extends class Yp{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return W("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Oh(h)}_finalizeEnroll(h,m,E){return function Uc(_,h){return qt(_,"POST","/v2/accounts/mfaEnrollment:finalize",en(_,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function ea(_,h){return qt(_,"POST","/v2/accounts/mfaSignIn:finalize",en(_,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gy=(()=>{class _{constructor(){}static assertion(m){return Oh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var my="@firebase/auth",kh="0.19.12";class Qp{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var T;h((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function no(){return window}function Ou(){return(Ou=(0,p.Z)(function*(_,h,m){var E;const{BuildInfo:T}=no();ie(h.sessionId,"AuthEvent did not contain a session ID");const N=yield La(h.sessionId),z={};return nr()?z.ibi=T.packageName:Cn()?z.apn=T.packageName:Ce(_,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=N,Nh(_,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(_){const{BuildInfo:h}=no(),m={};nr()?m.iosBundleId=h.packageName:Cn()?m.androidPackageName=h.packageName:Ce(_,"operation-not-supported-in-this-environment"),yield Pl(_,m)})).apply(this,arguments)}function rd(){return(rd=(0,p.Z)(function*(_,h,m){const{cordova:E}=no();let T=()=>{};try{yield new Promise((N,z)=>{let oe=null;function Be(){var at;N();const Mn=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Mn&&Mn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function tt(){oe||(oe=window.setTimeout(()=>{z(_e(_,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===(null==document?void 0:document.visibilityState)&&tt()}h.addPassiveListener(Be),document.addEventListener("resume",tt,!1),Cn()&&document.addEventListener("visibilitychange",Et,!1),T=()=>{h.removePassiveListener(Be),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",Et,!1),oe&&window.clearTimeout(oe)}})}finally{T()}})).apply(this,arguments)}function La(_){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,p.Z)(function*(_){const h=ku(_),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ku(_){if(ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),m=new Uint8Array(h);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}!function _y(_){(0,le._registerComponent)(new re.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:N,authDomain:z}=E.options;return((oe,Be)=>{ne(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),ne(!(null==z?void 0:z.includes(":")),"argument-error",{appName:oe.name});const tt={apiKey:N,authDomain:z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ta(_)},Et=new ui(oe,Be,tt);return function ue(_,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(se);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Et,m),Et})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new re.wA("auth-internal",h=>{const m=ke(h.getProvider("auth").getImmediate());return new Qp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(my,kh,function yy(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,le.registerVersion)(my,kh,"esm2017")}("Browser");class Vh extends ji{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,p.Z)(function*(){yield h.initPromise})()}}function Bl(_){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(_){const h=yield jl()._get(Uh(_));return h&&(yield jl()._remove(Uh(_))),h})).apply(this,arguments)}function Ul(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function jl(){return se(Pn)}function Uh(_){return de("authEvent",_.config.apiKey,_.name)}function sd(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...m]=_.split("?");return(0,O.zd)(m.join("?"))}function Gh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function od(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function tg(_=(0,O.z$)()){return!("file:"!==od()&&"ionic:"!==od()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){try{const _=self.localStorage,h=Qo();if(_)return _.setItem(h,"1"),_.removeItem(h),!function aa(_=(0,O.z$)()){return function Dy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Iy(_=(0,O.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,O.hl)()}catch(_){return Oo()&&(0,O.hl)()}return!1}function Oo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gl(){return(function by(){return"http:"===od()||"https:"===od()}()||(0,O.ru)()||tg())&&!function ad(){return(0,O.b$)()||(0,O.UG)()}()&&Tr()&&!Oo()}function qh(){return tg()&&"undefined"!=typeof document}function Va(){return(Va=(0,p.Z)(function*(){return!!qh()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const $i={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=ne,Wh="persistence";function Ua(_){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,p.Z)(function*(_){yield _._initializationPromise;const h=ql(),m=de(Wh,_.config.apiKey,_.name);h&&h.setItem(m,_._getPersistence())})).apply(this,arguments)}function ql(){var _;try{return(null===(_=function zh(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(h){return null}}const Cy=ne;class _i{constructor(){this.browserResolver=se(class sa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rr,this._completeRedirectFn=Sn}_openPopup(h,m,E,T){var N=this;return(0,p.Z)(function*(){var z;ie(null===(z=N.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const oe=Nh(h,m,E,Tt(),T);return function nd(_,h,m,E=500,T=600){const N=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let oe="";const Be=Object.assign(Object.assign({},hy),{width:E.toString(),height:T.toString(),top:N,left:z}),tt=(0,O.z$)().toLowerCase();m&&(oe=vr(tt)?"_blank":m),vt(tt)&&(h=h||"http://localhost",Be.scrollbars="yes");const Et=Object.entries(Be).reduce((Mn,[rs,Wl])=>`${Mn}${rs}=${Wl},`,"");if(function su(_=(0,O.z$)()){var h;return nr(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(tt)&&"_self"!==oe)return function Rh(_,h){const m=document.createElement("a");m.href=_,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",oe),new td(null);const at=window.open(h||"",oe,Et);ne(at,_,"popup-blocked");try{at.focus()}catch(Mn){}return new td(at)}(h,oe,Qo())})()}_openRedirect(h,m,E,T){var N=this;return(0,p.Z)(function*(){return yield N._originValidation(h),function Ah(_){gn().location.href=_}(Nh(h,m,E,Tt(),T)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:T,promise:N}=this.eventManagers[m];return T?Promise.resolve(T):(ie(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,p.Z)(function*(){const E=yield function dy(_){return No.apply(this,arguments)}(h),T=new ji(h);return E.register("authEvent",N=>(ne(null==N?void 0:N.authEvent,h,"invalid-auth-event"),{status:T.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:T},m.iframes[h._key()]=E,T})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(to,{type:to},T=>{var N;const z=null===(N=null==T?void 0:T[0])||void 0===N?void 0:N[to];void 0!==z&&m(!!z),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ay(_){return Es.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return us()||Yt()||nr()}}),this.cordovaResolver=se(class $h{constructor(){this._redirectPersistence=rr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sn}_initialize(h){var m=this;return(0,p.Z)(function*(){const E=h._key();let T=m.eventManagers.get(E);return T||(T=new Vh(h),m.eventManagers.set(E,T),m.attachCallbackListeners(h,T)),T})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,T){var N=this;return(0,p.Z)(function*(){!function id(_){var h,m,E,T,N,z,oe,Be,tt,Et;const at=no();ne("function"==typeof(null===(h=null==at?void 0:at.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(m=null==at?void 0:at.BuildInfo)||void 0===m?void 0:m.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(N=null===(T=null===(E=null==at?void 0:at.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===N?void 0:N.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Be=null===(oe=null===(z=null==at?void 0:at.cordova)||void 0===z?void 0:z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Be?void 0:Be.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Et=null===(tt=null==at?void 0:at.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===Et?void 0:Et.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield N._initialize(h);yield z.initialized(),z.resetRedirect(),function xu(){ns.clear()}(),yield N._originValidation(h);const oe=function Bh(_,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:Ul(),postBody:null,tenantId:_.tenantId,error:_e(_,"no-auth-event")}}(h,E,T);yield function vE(_,h){return jl()._set(Uh(_),h)}(h,oe);const Be=yield function Ph(_,h,m){return Ou.apply(this,arguments)}(h,oe,m),tt=yield function Vl(_){const{cordova:h}=no();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let T=null;E?h.plugins.browsertab.openUrl(_):T=h.InAppBrowser.open(_,function fo(_=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(T)})})}(Be);return function Jp(_,h,m){return rd.apply(this,arguments)}(h,z,tt)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Fh(_){return Hi.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:T,BuildInfo:N}=no(),z=setTimeout((0,p.Z)(function*(){yield Bl(h),m.onEvent(Gh())}),500),oe=function(){var Et=(0,p.Z)(function*(at){clearTimeout(z);const Mn=yield Bl(h);let rs=null;Mn&&(null==at?void 0:at.url)&&(rs=function Ey(_,h){var m,E;const T=function Hl(_){const h=sd(_),m=h.link?decodeURIComponent(h.link):void 0,E=sd(m).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return sd(T).link||T||E||m||_}(h);if(T.includes("/__/auth/callback")){const N=sd(T),z=N.firebaseError?function jh(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Be=oe?_e(oe):null;return Be?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(Mn,at.url)),m.onEvent(rs||Gh())});return function(Mn){return Et.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,oe);const Be=T,tt=`${N.packageName.toLowerCase()}://`;no().handleOpenURL=function(){var Et=(0,p.Z)(function*(at){if(at.toLowerCase().startsWith(tt)&&oe({url:at}),"function"==typeof Be)try{Be(at)}catch(Mn){console.error(Mn)}});return function(at){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=rr,this._completeRedirectFn=Sn}_initialize(h){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,T){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,m,E,T)})()}_openRedirect(h,m,E,T){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,m,E,T)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return qh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,p.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Br(){return Va.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function ig(_){return _.unwrap()}function ja(_){return sg(_)}function sg(_){const{_tokenResponse:h}=_ instanceof O.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ui.credentialFromResult(_);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Sa;break;case"facebook.com":E=mo;break;case"github.com":E=Nc;break;case"twitter.com":E=du;break;default:const{oauthIdToken:T,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:oe,nonce:Be}=h;return N||z||T||oe?oe?m.startsWith("saml.")?Oi._create(m,oe):ds._fromParams({providerId:m,signInMethod:m,pendingToken:oe,idToken:T,accessToken:N}):new qo(m).credential({idToken:T,accessToken:N,rawNonce:Be}):null}return _ instanceof O.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Ar(_,h){return h.catch(m=>{throw m instanceof O.ZR&&function Ay(_,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Sy(_,function Cu(_,h){var m;const E=(0,O.m9)(_),T=h;return ne(h.customData.operationType,E,"argument-error"),ne(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Oa._fromError(E,T)}(_,h));else if(E){const T=sg(h),N=h;T&&(N.credential=T,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(_,m),m}).then(m=>{const T=m.user;return{operationType:m.operationType,credential:ja(m),additionalUserInfo:Dr(m),user:ko.getOrCreate(T)}})}function Zh(_,h){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,p.Z)(function*(_,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>Ar(_,m.confirm(E))}})).apply(this,arguments)}class Sy{constructor(h,m){this.resolver=m,this.auth=function Ty(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ar(ig(this.auth),this.resolver.resolveSignIn(h))}}class ko{constructor(h){this._delegate=h,this.multiFactor=function jc(_){const h=(0,O.m9)(_);return Yo.has(h)||Yo.set(h,gs._fromUser(h)),Yo.get(h)}(h)}static getOrCreate(h){return ko.USER_MAP.has(h)||ko.USER_MAP.set(h,new ko(h)),ko.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,p.Z)(function*(){return Ar(m.auth,ki(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,p.Z)(function*(){return Zh(E.auth,function Tl(_,h,m){return na.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,p.Z)(function*(){return Ar(m.auth,function es(_,h,m){return Mu.apply(this,arguments)}(m._delegate,h,_i))})()}linkWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield Ua(ke(m.auth)),function Xe(_,h,m){return function It(_,h,m){return kt.apply(this,arguments)}(_,h,m)}(m._delegate,h,_i)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,p.Z)(function*(){return Ar(m.auth,Hs(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return Zh(this.auth,function Wp(_,h,m){return Al.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return Ar(this.auth,function To(_,h,m){return Su.apply(this,arguments)}(this._delegate,h,_i))}reauthenticateWithRedirect(h){var m=this;return(0,p.Z)(function*(){return yield Ua(ke(m.auth)),function ee(_,h,m){return function xe(_,h,m){return Re.apply(this,arguments)}(_,h,m)}(m._delegate,h,_i)})()}sendEmailVerification(h){return function Pi(_,h){return fl.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,p.Z)(function*(){return yield function Ma(_,h){return ol.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function ml(_,h){return yl((0,O.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function Fc(_,h){return yl((0,O.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Sl(_,h){return vs.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Zo(_,h){return gl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function Du(_,h,m){return Iu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ko.USER_MAP=new WeakMap;const zl=ne;let Qh=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=m.options;zl(T,"invalid-api-key",{appName:m.name}),zl(T,"invalid-api-key",{appName:m.name});const N="undefined"!=typeof window?_i:void 0;this._delegate=E.initialize({options:{persistence:My(T,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function pn(_,h,m){const E=ke(_);ne(E._canInitEmulator,E,"emulator-config-failed"),ne(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const T=!!(null==m?void 0:m.disableWarnings),N=dr(h),{host:z,port:oe}=function ks(_){const h=dr(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const N=T[1];return{host:N,port:Bn(E.substr(N.length+1))}}{const[N,z]=E.split(":");return{host:N,port:Bn(z)}}}(h);E.config.emulator={url:`${N}//${z}${null===oe?"":`:${oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Zi(){function _(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function ul(_,h){return De.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ut(this._delegate,m)}confirmPasswordReset(m,E){return function Eu(_,h,m){return al.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var T=this;return(0,p.Z)(function*(){return Ar(T._delegate,function Ko(_,h,m){return Yr.apply(this,arguments)}(T._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function bu(_,h){return zs.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function hl(_,h){const m=go.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){zl(Gl(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function St(_,h){return $n.apply(this,arguments)}(m._delegate,_i);return E?Ar(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function eg(_,h){ke(_)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,T){const{next:N,error:z,complete:oe}=Jh(m,E,T);return this._delegate.onAuthStateChanged(N,z,oe)}onIdTokenChanged(m,E,T){const{next:N,error:z,complete:oe}=Jh(m,E,T);return this._delegate.onIdTokenChanged(N,z,oe)}sendSignInLinkToEmail(m,E){return function dl(_,h,m){return Pc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function _u(_,h,m){return vu.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let T;switch(function ng(_,h){Ba(Object.values($i).includes(h),_,"invalid-persistence-type"),(0,O.b$)()?Ba(h!==$i.SESSION,_,"unsupported-persistence-type"):(0,O.UG)()?Ba(h===$i.NONE,_,"unsupported-persistence-type"):Oo()?Ba(h===$i.NONE||h===$i.LOCAL&&(0,O.hl)(),_,"unsupported-persistence-type"):Ba(h===$i.NONE||Tr(),_,"unsupported-persistence-type")}(E._delegate,m),m){case $i.SESSION:T=rr;break;case $i.LOCAL:T=(yield se(Li)._isAvailable())?Li:Pn;break;case $i.NONE:T=q;break;default:return Ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Ar(this._delegate,function fu(_){return Oc.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Ar(this._delegate,On(this._delegate,m))}signInWithCustomToken(m){return Ar(this._delegate,function $s(_,h){return Gs.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Ar(this._delegate,function cl(_,h,m){return On((0,O.m9)(_),sl.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Ar(this._delegate,function wu(_,h,m){return qs.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Zh(this._delegate,function Au(_,h,m){return In.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return zl(Gl(),E._delegate,"operation-not-supported-in-this-environment"),Ar(E._delegate,function eo(_,h,m){return Kc.apply(this,arguments)}(E._delegate,m,_i))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return zl(Gl(),E._delegate,"operation-not-supported-in-this-environment"),yield Ua(E._delegate),function R(_,h,m){return function L(_,h,m){return K.apply(this,arguments)}(_,h,m)}(E._delegate,m,_i)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function wn(_,h){return Wo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=$i,_})();function Jh(_,h,m){let E=_;"function"!=typeof _&&({next:E,error:h,complete:m}=_);const T=E;return{next:z=>T(z&&ko.getOrCreate(z)),error:h,complete:m}}function My(_,h){const m=function rg(_,h){const m=ql();if(!m)return[];const E=de(Wh,_,h);switch(m.getItem(E)){case $i.NONE:return[q];case $i.LOCAL:return[Li,rr];case $i.SESSION:return[rr];default:return[]}}(_,h);if("undefined"!=typeof self&&!m.includes(Li)&&m.push(Li),"undefined"!=typeof window)for(const E of[Pn,rr])m.includes(E)||m.push(E);return m.includes(q)||m.push(q),m}class Xh{constructor(){this.providerId="phone",this._delegate=new Ui(ig(Y.Z.auth()))}static credential(h,m){return Ui.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}Xh.PHONE_SIGN_IN_METHOD=Ui.PHONE_SIGN_IN_METHOD,Xh.PROVIDER_ID=Ui.PROVIDER_ID;const xy=ne;class Ry{constructor(h,m,E=Y.Z.app()){var T;xy(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new zp(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ag(_){_.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Qh(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:sl,FacebookAuthProvider:mo,GithubAuthProvider:Nc,GoogleAuthProvider:Sa,OAuthProvider:qo,SAMLAuthProvider:ci,PhoneAuthProvider:Xh,PhoneMultiFactorGenerator:gy,RecaptchaVerifier:Ry,TwitterAuthProvider:du,Auth:Qh,AuthCredential:an,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.12")}(Y.Z)},8306:(ut,Ae,k)=>{k.d(Ae,{y:()=>H});var p=k(2961),Y=k(727),O=k(8822),le=k(4671);var re=k(2416),he=k(576),ce=k(2806);let H=(()=>{class Se{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const fe=new Se;return fe.source=this,fe.operator=Le,fe}subscribe(Le,fe,be){const rt=function qe(Se){return Se&&Se instanceof p.Lv||function J(Se){return Se&&(0,he.m)(Se.next)&&(0,he.m)(Se.error)&&(0,he.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(Le)?Le:new p.Hp(Le,fe,be);return(0,ce.x)(()=>{const{operator:Ze,source:Ce}=this;rt.add(Ze?Ze.call(rt,Ce):Ce?this._subscribe(rt):this._trySubscribe(rt))}),rt}_trySubscribe(Le){try{return this._subscribe(Le)}catch(fe){Le.error(fe)}}forEach(Le,fe){return new(fe=$(fe))((be,rt)=>{const Ze=new p.Hp({next:Ce=>{try{Le(Ce)}catch(_e){rt(_e),Ze.unsubscribe()}},error:rt,complete:be});this.subscribe(Ze)})}_subscribe(Le){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Le)}[O.L](){return this}pipe(...Le){return function ge(Se){return 0===Se.length?le.y:1===Se.length?Se[0]:function(Le){return Se.reduce((fe,be)=>be(fe),Le)}}(Le)(this)}toPromise(Le){return new(Le=$(Le))((fe,be)=>{let rt;this.subscribe(Ze=>rt=Ze,Ze=>be(Ze),()=>fe(rt))})}}return Se.create=Oe=>new Se(Oe),Se})();function $(Se){var Oe;return null!==(Oe=null!=Se?Se:re.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(ut,Ae,k)=>{k.d(Ae,{x:()=>re});var p=k(8306),Y=k(727);const le=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),ge=k(2806);let re=(()=>{class ce extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const J=new he(this,this);return J.operator=$,J}_throwIfClosed(){if(this.closed)throw new le}next($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next($)}})}error($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:J}=this;for(;J.length;)J.shift().error($)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:J,isStopped:qe,observers:Se}=this;return J||qe?Y.Lc:(this.currentObservers=null,Se.push($),new Y.w0(()=>{this.currentObservers=null,(0,X.P)(Se,$)}))}_checkFinalizedStatuses($){const{hasError:J,thrownError:qe,isStopped:Se}=this;J?$.error(qe):Se&&$.complete()}asObservable(){const $=new p.y;return $.source=this,$}}return ce.create=(H,$)=>new he(H,$),ce})();class he extends re{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===J||J.call($,H)}error(H){var $,J;null===(J=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===J||J.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,J;return null!==(J=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==J?J:Y.Lc}}},2961:(ut,Ae,k)=>{k.d(Ae,{Hp:()=>Le,Lv:()=>J});var p=k(576),Y=k(727),O=k(2416),le=k(7849);function X(){}const ge=ce("C",void 0,void 0);function ce(Ce,_e,Ee){return{kind:Ce,value:_e,error:Ee}}var H=k(3410),$=k(2806);class J extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ze}static create(_e,Ee,Ge){return new Le(_e,Ee,Ge)}next(_e){this.isStopped?rt(function he(Ce){return ce("N",Ce,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?rt(function re(Ce){return ce("E",void 0,Ce)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?rt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Se(Ce,_e){return qe.call(Ce,_e)}class Oe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ge){fe(Ge)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ge){fe(Ge)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){fe(Ee)}}}class Le extends J{constructor(_e,Ee,Ge){let je;if(super(),(0,p.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ge?Ge:void 0};else{let ne;this&&O.v.useDeprecatedNextContext?(ne=Object.create(_e),ne.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Se(_e.next,ne),error:_e.error&&Se(_e.error,ne),complete:_e.complete&&Se(_e.complete,ne)}):je=_e}this.destination=new Oe(je)}}function fe(Ce){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ce):(0,le.h)(Ce)}function rt(Ce,_e){const{onStoppedNotification:Ee}=O.v;Ee&&H.z.setTimeout(()=>Ee(Ce,_e))}const Ze={closed:!0,next:X,error:function be(Ce){throw Ce},complete:X}},727:(ut,Ae,k)=>{k.d(Ae,{Lc:()=>ge,w0:()=>X,Nn:()=>re});var p=k(576);const O=(0,k(3888).d)(ce=>function($){ce(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((J,qe)=>`${qe+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var le=k(8737);class X{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Se of $)Se.remove(this);else $.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Se){H=Se instanceof O?Se.errors:[Se]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Se of qe)try{he(Se)}catch(Oe){H=null!=H?H:[],Oe instanceof O?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new O(H)}}add(H){var $;if(H&&H!==this)if(this.closed)he(H);else{if(H instanceof X){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,le.P)($,H)}remove(H){const{_finalizers:$}=this;$&&(0,le.P)($,H),H instanceof X&&H._removeParent(this)}}X.EMPTY=(()=>{const ce=new X;return ce.closed=!0,ce})();const ge=X.EMPTY;function re(ce){return ce instanceof X||ce&&"closed"in ce&&(0,p.m)(ce.remove)&&(0,p.m)(ce.add)&&(0,p.m)(ce.unsubscribe)}function he(ce){(0,p.m)(ce)?ce():ce.unsubscribe()}},2416:(ut,Ae,k)=>{k.d(Ae,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,Ae,k)=>{k.d(Ae,{E:()=>Y});const Y=new(k(8306).y)(X=>X.complete())},8996:(ut,Ae,k)=>{k.d(Ae,{D:()=>_e});var p=k(8421),Y=k(5363),O=k(9468),ge=k(8306),he=k(2202),ce=k(576),H=k(9672);function J(Ee,Ge){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(je=>{(0,H.f)(je,Ge,()=>{const ne=Ee[Symbol.asyncIterator]();(0,H.f)(je,Ge,()=>{ne.next().then(W=>{W.done?je.complete():je.next(W.value)})},0,!0)})})}var qe=k(3670),Se=k(8239),Oe=k(1144),Le=k(6495),fe=k(2206),be=k(4532),rt=k(3260);function _e(Ee,Ge){return Ge?function Ce(Ee,Ge){if(null!=Ee){if((0,qe.c)(Ee))return function le(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,Oe.z)(Ee))return function re(Ee,Ge){return new ge.y(je=>{let ne=0;return Ge.schedule(function(){ne===Ee.length?je.complete():(je.next(Ee[ne++]),je.closed||this.schedule())})})}(Ee,Ge);if((0,Se.t)(Ee))return function X(Ee,Ge){return(0,p.Xf)(Ee).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(Ee,Ge);if((0,fe.D)(Ee))return J(Ee,Ge);if((0,Le.T)(Ee))return function $(Ee,Ge){return new ge.y(je=>{let ne;return(0,H.f)(je,Ge,()=>{ne=Ee[he.h](),(0,H.f)(je,Ge,()=>{let W,ie;try{({value:W,done:ie}=ne.next())}catch(me){return void je.error(me)}ie?je.complete():je.next(W)},0,!0)}),()=>(0,ce.m)(null==ne?void 0:ne.return)&&ne.return()})}(Ee,Ge);if((0,rt.L)(Ee))return function Ze(Ee,Ge){return J((0,rt.Q)(Ee),Ge)}(Ee,Ge)}throw(0,be.z)(Ee)}(Ee,Ge):(0,p.Xf)(Ee)}},8421:(ut,Ae,k)=>{k.d(Ae,{Xf:()=>qe});var p=k(655),Y=k(1144),O=k(8239),le=k(8306),X=k(3670),ge=k(2206),re=k(4532),he=k(6495),ce=k(3260),H=k(576),$=k(7849),J=k(8822);function qe(Ce){if(Ce instanceof le.y)return Ce;if(null!=Ce){if((0,X.c)(Ce))return function Se(Ce){return new le.y(_e=>{const Ee=Ce[J.L]();if((0,H.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,Y.z)(Ce))return function Oe(Ce){return new le.y(_e=>{for(let Ee=0;Ee<Ce.length&&!_e.closed;Ee++)_e.next(Ce[Ee]);_e.complete()})}(Ce);if((0,O.t)(Ce))return function Le(Ce){return new le.y(_e=>{Ce.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,$.h)})}(Ce);if((0,ge.D)(Ce))return be(Ce);if((0,he.T)(Ce))return function fe(Ce){return new le.y(_e=>{for(const Ee of Ce)if(_e.next(Ee),_e.closed)return;_e.complete()})}(Ce);if((0,ce.L)(Ce))return function rt(Ce){return be((0,ce.Q)(Ce))}(Ce)}throw(0,re.z)(Ce)}function be(Ce){return new le.y(_e=>{(function Ze(Ce,_e){var Ee,Ge,je,ne;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,p.KL)(Ce);!(Ge=yield Ee.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(W){je={error:W}}finally{try{Ge&&!Ge.done&&(ne=Ee.return)&&(yield ne.call(Ee))}finally{if(je)throw je.error}}_e.complete()})})(Ce,_e).catch(Ee=>_e.error(Ee))})}},6451:(ut,Ae,k)=>{k.d(Ae,{T:()=>ge});var p=k(8189),Y=k(8421),O=k(515),le=k(7669),X=k(8996);function ge(...re){const he=(0,le.yG)(re),ce=(0,le._6)(re,1/0),H=re;return H.length?1===H.length?(0,Y.Xf)(H[0]):(0,p.J)(ce)((0,X.D)(H,he)):O.E}},5403:(ut,Ae,k)=>{k.d(Ae,{x:()=>Y});var p=k(2961);function Y(le,X,ge,re,he){return new O(le,X,ge,re,he)}class O extends p.Lv{constructor(X,ge,re,he,ce,H){super(X),this.onFinalize=ce,this.shouldUnsubscribe=H,this._next=ge?function($){try{ge($)}catch(J){X.error(J)}}:super._next,this._error=he?function($){try{he($)}catch(J){X.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch($){X.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(ut,Ae,k)=>{k.d(Ae,{U:()=>O});var p=k(4482),Y=k(5403);function O(le,X){return(0,p.e)((ge,re)=>{let he=0;ge.subscribe((0,Y.x)(re,ce=>{re.next(le.call(X,ce,he++))}))})}},8189:(ut,Ae,k)=>{k.d(Ae,{J:()=>O});var p=k(5577),Y=k(4671);function O(le=1/0){return(0,p.z)(Y.y,le)}},5577:(ut,Ae,k)=>{k.d(Ae,{z:()=>he});var p=k(4004),Y=k(8421),O=k(4482),le=k(9672),X=k(5403),re=k(576);function he(ce,H,$=1/0){return(0,re.m)(H)?he((J,qe)=>(0,p.U)((Se,Oe)=>H(J,Se,qe,Oe))((0,Y.Xf)(ce(J,qe))),$):("number"==typeof H&&($=H),(0,O.e)((J,qe)=>function ge(ce,H,$,J,qe,Se,Oe,Le){const fe=[];let be=0,rt=0,Ze=!1;const Ce=()=>{Ze&&!fe.length&&!be&&H.complete()},_e=Ge=>be<J?Ee(Ge):fe.push(Ge),Ee=Ge=>{Se&&H.next(Ge),be++;let je=!1;(0,Y.Xf)($(Ge,rt++)).subscribe((0,X.x)(H,ne=>{null==qe||qe(ne),Se?_e(ne):H.next(ne)},()=>{je=!0},void 0,()=>{if(je)try{for(be--;fe.length&&be<J;){const ne=fe.shift();Oe?(0,le.f)(H,Oe,()=>Ee(ne)):Ee(ne)}Ce()}catch(ne){H.error(ne)}}))};return ce.subscribe((0,X.x)(H,_e,()=>{Ze=!0,Ce()})),()=>{null==Le||Le()}}(J,qe,ce,$)))}},5363:(ut,Ae,k)=>{k.d(Ae,{Q:()=>le});var p=k(9672),Y=k(4482),O=k(5403);function le(X,ge=0){return(0,Y.e)((re,he)=>{re.subscribe((0,O.x)(he,ce=>(0,p.f)(he,X,()=>he.next(ce),ge),()=>(0,p.f)(he,X,()=>he.complete(),ge),ce=>(0,p.f)(he,X,()=>he.error(ce),ge)))})}},3099:(ut,Ae,k)=>{k.d(Ae,{B:()=>ge});var p=k(8996),Y=k(5698),O=k(7579),le=k(2961),X=k(4482);function ge(he={}){const{connector:ce=(()=>new O.x),resetOnError:H=!0,resetOnComplete:$=!0,resetOnRefCountZero:J=!0}=he;return qe=>{let Se=null,Oe=null,Le=null,fe=0,be=!1,rt=!1;const Ze=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Ce=()=>{Ze(),Se=Le=null,be=rt=!1},_e=()=>{const Ee=Se;Ce(),null==Ee||Ee.unsubscribe()};return(0,X.e)((Ee,Ge)=>{fe++,!rt&&!be&&Ze();const je=Le=null!=Le?Le:ce();Ge.add(()=>{fe--,0===fe&&!rt&&!be&&(Oe=re(_e,J))}),je.subscribe(Ge),Se||(Se=new le.Hp({next:ne=>je.next(ne),error:ne=>{rt=!0,Ze(),Oe=re(Ce,H,ne),je.error(ne)},complete:()=>{be=!0,Ze(),Oe=re(Ce,$),je.complete()}}),(0,p.D)(Ee).subscribe(Se))})(qe)}}function re(he,ce,...H){return!0===ce?(he(),null):!1===ce?null:ce(...H).pipe((0,Y.q)(1)).subscribe(()=>he())}},9468:(ut,Ae,k)=>{k.d(Ae,{R:()=>Y});var p=k(4482);function Y(O,le=0){return(0,p.e)((X,ge)=>{ge.add(O.schedule(()=>X.subscribe(ge),le))})}},5698:(ut,Ae,k)=>{k.d(Ae,{q:()=>le});var p=k(515),Y=k(4482),O=k(5403);function le(X){return X<=0?()=>p.E:(0,Y.e)((ge,re)=>{let he=0;ge.subscribe((0,O.x)(re,ce=>{++he<=X&&(re.next(ce),X<=he&&re.complete())}))})}},8505:(ut,Ae,k)=>{k.d(Ae,{b:()=>X});var p=k(576),Y=k(4482),O=k(5403),le=k(4671);function X(ge,re,he){const ce=(0,p.m)(ge)||re||he?{next:ge,error:re,complete:he}:ge;return ce?(0,Y.e)((H,$)=>{var J;null===(J=ce.subscribe)||void 0===J||J.call(ce);let qe=!0;H.subscribe((0,O.x)($,Se=>{var Oe;null===(Oe=ce.next)||void 0===Oe||Oe.call(ce,Se),$.next(Se)},()=>{var Se;qe=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),$.complete()},Se=>{var Oe;qe=!1,null===(Oe=ce.error)||void 0===Oe||Oe.call(ce,Se),$.error(Se)},()=>{var Se,Oe;qe&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(Oe=ce.finalize)||void 0===Oe||Oe.call(ce)}))}):le.y}},4408:(ut,Ae,k)=>{k.d(Ae,{o:()=>X});var p=k(727);class Y extends p.w0{constructor(re,he){super()}schedule(re,he=0){return this}}const O={setInterval(ge,re,...he){const{delegate:ce}=O;return(null==ce?void 0:ce.setInterval)?ce.setInterval(ge,re,...he):setInterval(ge,re,...he)},clearInterval(ge){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(ge)},delegate:void 0};var le=k(8737);class X extends Y{constructor(re,he){super(re,he),this.scheduler=re,this.work=he,this.pending=!1}schedule(re,he=0){if(this.closed)return this;this.state=re;const ce=this.id,H=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(H,ce,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(H,this.id,he),this}requestAsyncId(re,he,ce=0){return O.setInterval(re.flush.bind(re,this),ce)}recycleAsyncId(re,he,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return he;O.clearInterval(he)}execute(re,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(re,he);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,he){let H,ce=!1;try{this.work(re)}catch($){ce=!0,H=$||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:re,scheduler:he}=this,{actions:ce}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ce,this),null!=re&&(this.id=this.recycleAsyncId(he,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,Ae,k)=>{k.d(Ae,{v:()=>O});var p=k(6063);class Y{constructor(X,ge=Y.now){this.schedulerActionCtor=X,this.now=ge}schedule(X,ge=0,re){return new this.schedulerActionCtor(this,X).schedule(re,ge)}}Y.now=p.l.now;class O extends Y{constructor(X,ge=Y.now){super(X,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ge}=this;if(this._active)return void ge.push(X);let re;this._active=!0;do{if(re=X.execute(X.state,X.delay))break}while(X=ge.shift());if(this._active=!1,re){for(;X=ge.shift();)X.unsubscribe();throw re}}}},4986:(ut,Ae,k)=>{k.d(Ae,{z:()=>O});var p=k(4408);const O=new(k(7565).v)(p.o)},6063:(ut,Ae,k)=>{k.d(Ae,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ut,Ae,k)=>{k.d(Ae,{z:()=>p});const p={setTimeout(Y,O,...le){const{delegate:X}=p;return(null==X?void 0:X.setTimeout)?X.setTimeout(Y,O,...le):setTimeout(Y,O,...le)},clearTimeout(Y){const{delegate:O}=p;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(ut,Ae,k)=>{k.d(Ae,{h:()=>Y});const Y=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,Ae,k)=>{k.d(Ae,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,Ae,k)=>{k.d(Ae,{_6:()=>ge,jO:()=>le,yG:()=>X});var p=k(576);function O(re){return re[re.length-1]}function le(re){return(0,p.m)(O(re))?re.pop():void 0}function X(re){return function Y(re){return re&&(0,p.m)(re.schedule)}(O(re))?re.pop():void 0}function ge(re,he){return"number"==typeof O(re)?re.pop():he}},8737:(ut,Ae,k)=>{function p(Y,O){if(Y){const le=Y.indexOf(O);0<=le&&Y.splice(le,1)}}k.d(Ae,{P:()=>p})},3888:(ut,Ae,k)=>{function p(Y){const le=Y(X=>{Error.call(X),X.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}k.d(Ae,{d:()=>p})},2806:(ut,Ae,k)=>{k.d(Ae,{x:()=>O,O:()=>le});var p=k(2416);let Y=null;function O(X){if(p.v.useDeprecatedSynchronousErrorHandling){const ge=!Y;if(ge&&(Y={errorThrown:!1,error:null}),X(),ge){const{errorThrown:re,error:he}=Y;if(Y=null,re)throw he}}else X()}function le(X){p.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=X)}},9672:(ut,Ae,k)=>{function p(Y,O,le,X=0,ge=!1){const re=O.schedule(function(){le(),ge?Y.add(this.schedule(null,X)):this.unsubscribe()},X);if(Y.add(re),!ge)return re}k.d(Ae,{f:()=>p})},4671:(ut,Ae,k)=>{function p(Y){return Y}k.d(Ae,{y:()=>p})},1144:(ut,Ae,k)=>{k.d(Ae,{z:()=>p});const p=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(ut,Ae,k)=>{k.d(Ae,{D:()=>Y});var p=k(576);function Y(O){return Symbol.asyncIterator&&(0,p.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(ut,Ae,k)=>{function p(Y){return"function"==typeof Y}k.d(Ae,{m:()=>p})},3670:(ut,Ae,k)=>{k.d(Ae,{c:()=>O});var p=k(8822),Y=k(576);function O(le){return(0,Y.m)(le[p.L])}},6495:(ut,Ae,k)=>{k.d(Ae,{T:()=>O});var p=k(2202),Y=k(576);function O(le){return(0,Y.m)(null==le?void 0:le[p.h])}},8239:(ut,Ae,k)=>{k.d(Ae,{t:()=>Y});var p=k(576);function Y(O){return(0,p.m)(null==O?void 0:O.then)}},3260:(ut,Ae,k)=>{k.d(Ae,{Q:()=>O,L:()=>le});var p=k(655),Y=k(576);function O(X){return(0,p.FC)(this,arguments,function*(){const re=X.getReader();try{for(;;){const{value:he,done:ce}=yield(0,p.qq)(re.read());if(ce)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(he)}}finally{re.releaseLock()}})}function le(X){return(0,Y.m)(null==X?void 0:X.getReader)}},4482:(ut,Ae,k)=>{k.d(Ae,{A:()=>Y,e:()=>O});var p=k(576);function Y(le){return(0,p.m)(null==le?void 0:le.lift)}function O(le){return X=>{if(Y(X))return X.lift(function(ge){try{return le(ge,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ut,Ae,k)=>{k.d(Ae,{h:()=>O});var p=k(2416),Y=k(3410);function O(le){Y.z.setTimeout(()=>{const{onUnhandledError:X}=p.v;if(!X)throw le;X(le)})}},4532:(ut,Ae,k)=>{function p(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ae,{z:()=>p})},655:(ut,Ae,k)=>{function le(W,ie){var me={};for(var se in W)Object.prototype.hasOwnProperty.call(W,se)&&ie.indexOf(se)<0&&(me[se]=W[se]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(se=Object.getOwnPropertySymbols(W);Ne<se.length;Ne++)ie.indexOf(se[Ne])<0&&Object.prototype.propertyIsEnumerable.call(W,se[Ne])&&(me[se[Ne]]=W[se[Ne]])}return me}function he(W,ie,me,se){return new(me||(me=Promise))(function(ue,Tt){function Xt(_t){try{lt(se.next(_t))}catch(cn){Tt(cn)}}function Rn(_t){try{lt(se.throw(_t))}catch(cn){Tt(cn)}}function lt(_t){_t.done?ue(_t.value):function Ne(ue){return ue instanceof me?ue:new me(function(Tt){Tt(ue)})}(_t.value).then(Xt,Rn)}lt((se=se.apply(W,ie||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function be(W,ie,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,se=me.apply(W,ie||[]),ue=[];return Ne={},Tt("next"),Tt("throw"),Tt("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function Tt(dn){se[dn]&&(Ne[dn]=function(xi){return new Promise(function(on,ss){ue.push([dn,xi,on,ss])>1||Xt(dn,xi)})})}function Xt(dn,xi){try{!function Rn(dn){dn.value instanceof fe?Promise.resolve(dn.value.v).then(lt,_t):cn(ue[0][2],dn)}(se[dn](xi))}catch(on){cn(ue[0][3],on)}}function lt(dn){Xt("next",dn)}function _t(dn){Xt("throw",dn)}function cn(dn,xi){dn(xi),ue.shift(),ue.length&&Xt(ue[0][0],ue[0][1])}}function Ze(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ie=W[Symbol.asyncIterator];return ie?ie.call(W):(W=function J(W){var ie="function"==typeof Symbol&&Symbol.iterator,me=ie&&W[ie],se=0;if(me)return me.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&se>=W.length&&(W=void 0),{value:W&&W[se++],done:!W}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(ue){me[ue]=W[ue]&&function(Tt){return new Promise(function(Xt,Rn){!function Ne(ue,Tt,Xt,Rn){Promise.resolve(Rn).then(function(lt){ue({value:lt,done:Xt})},Tt)}(Xt,Rn,(Tt=W[ue](Tt)).done,Tt.value)})}}}k.d(Ae,{_T:()=>le,mG:()=>he,qq:()=>fe,FC:()=>be,KL:()=>Ze})},5e3:(ut,Ae,k)=>{k.d(Ae,{deG:()=>$p,tb:()=>lD,AFp:()=>aD,ip1:()=>oD,CZH:()=>Sm,hGG:()=>KT,z2F:()=>Om,sBO:()=>tn,Sil:()=>E0,_Vd:()=>Kf,EJc:()=>Xd,SBq:()=>Yf,qLn:()=>Ar,vpe:()=>vn,tBr:()=>Vr,XFs:()=>ct,OlP:()=>An,zs3:()=>ha,ZZ4:()=>dp,aQg:()=>uo,soG:()=>Mm,YKP:()=>Zv,h0i:()=>Gd,PXZ:()=>yD,R0b:()=>Ts,FiY:()=>yi,Lbi:()=>yc,g9A:()=>Ja,Qsj:()=>wT,FYo:()=>Ib,JOm:()=>oe,tp0:()=>Mo,Rgc:()=>nt,dDg:()=>pD,q4F:()=>Wv,GfV:()=>zv,s_b:()=>Me,ifc:()=>zt,eFA:()=>_D,G48:()=>cp,Gpc:()=>$,X6Q:()=>ED,_c5:()=>ND,VLi:()=>th,c2e:()=>m0,zSh:()=>T_,wAp:()=>wt,vHH:()=>Oe,cg1:()=>Mr,kL8:()=>Xg,dqk:()=>Gt,sIi:()=>Jl,CqO:()=>BC,QGY:()=>K_,F4k:()=>Z_,RDi:()=>hs,AaK:()=>he,qOj:()=>Hu,TTD:()=>mo,_Bn:()=>bb,xp6:()=>zy,uIk:()=>k_,Tol:()=>jr,ekj:()=>X_,Suo:()=>Jt,Xpm:()=>Bt,lG2:()=>Yt,Yz7:()=>on,cJS:()=>en,oAB:()=>Q,Yjl:()=>vr,Y36:()=>xf,_UZ:()=>W_,qZA:()=>Fg,TgZ:()=>Pg,EpF:()=>Vg,n5z:()=>zc,LFG:()=>Xe,$8M:()=>Co,$Z:()=>Pw,NdJ:()=>Bg,CRH:()=>Yb,oxw:()=>Ug,ALo:()=>Bb,lcZ:()=>Ub,Hsn:()=>$C,F$t:()=>Bw,Q6J:()=>q_,iGM:()=>s0,MAs:()=>Td,Jf7:()=>og,CHM:()=>ll,LSH:()=>Pu,YNc:()=>Dw,W1O:()=>Ka,_uU:()=>iv,hij:()=>xd});var p=k(7579),Y=k(727),O=k(8306),le=k(6451),X=k(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function re(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ge({__forward_ref__:ge});function $(s){return s.__forward_ref__=$,s.toString=function(){return he(this())},s}function J(s){return qe(s)?s():s}function qe(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===$}class Oe extends Error{constructor(o,a){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function _e(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${be(s)} found${a}`)}function lt(s,o){null==s&&function _t(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function on(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return ur(s,Wi)||ur(s,os)}function ur(s,o){return s.hasOwnProperty(o)?s[o]:null}function kr(s){return s&&(s.hasOwnProperty(Pr)||s.hasOwnProperty(as))?s[Pr]:null}const Wi=ge({\u0275prov:ge}),Pr=ge({\u0275inj:ge}),os=ge({ngInjectableDef:ge}),as=ge({ngInjectorDef:ge});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let zr;function Wn(s){const o=zr;return zr=s,o}function ai(s,o,a){const l=qt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ct.Optional?null:void 0!==o?o:void _e(he(s),"Injector")}function En(s){return{toString:s}.toString()}var tr=(()=>((tr=tr||{})[tr.OnPush=0]="OnPush",tr[tr.Default=1]="Default",tr))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,bt="undefined"!=typeof window&&window,lr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Gt=ot||"undefined"!=typeof global&&global||bt||lr,cr={},dt=[],_r=ge({\u0275cmp:ge}),jt=ge({\u0275dir:ge}),Ye=ge({\u0275pipe:ge}),Te=ge({\u0275mod:ge}),et=ge({\u0275fac:ge}),ht=ge({__NG_ELEMENT_ID__:ge});let $t=0;function Bt(s){return En(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===tr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return l.id+=$t++,l.inputs=vt(s.inputs,a),l.outputs=vt(s.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(V):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(q):null,l})}function V(s){return Wt(s)||function Cn(s){return s[jt]||null}(s)}function q(s){return function Ot(s){return s[Ye]||null}(s)}const de={};function Q(s){return En(()=>{const o={type:s.type,bootstrap:s.bootstrap||dt,declarations:s.declarations||dt,imports:s.imports||dt,exports:s.exports||dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function vt(s,o){if(null==s)return cr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Yt=Bt;function vr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Wt(s){return s[_r]||null}function fn(s,o){const a=s[Te]||null;if(!a&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function Ni(s){return Array.isArray(s)&&"object"==typeof s[1]}function li(s){return Array.isArray(s)&&!0===s[1]}function Ac(s){return 0!=(8&s.flags)}function Ls(s){return 2==(2&s.flags)}function uu(s){return 1==(1&s.flags)}function Wr(s){return null!==s.template}function bh(s){return 0!=(512&s[2])}function Kr(s,o){return s.hasOwnProperty(et)?s[et]:null}class qo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function mo(){return Sa}function Sa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Up),Nc}function Nc(){const s=Us(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===cr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Up(s,o,a,l){const d=Us(s)||function ci(s,o){return s[Oi]=o}(s,{previous:cr,current:null}),g=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];g[w]=new qo(D&&D.currentValue,o,v===cr),s[l]=o}mo.ngInherit=!0;const Oi="__ngSimpleChanges__";function Us(s){return s[Oi]||null}let gu;function hs(s){gu=s}function _n(s){return!!s.listen}const zo={createRenderer:(s,o)=>function Ma(){return void 0!==gu?gu:"undefined"!=typeof document?document:void 0}()};function ln(s){for(;Array.isArray(s);)s=s[0];return s}function _o(s,o){return ln(o[s])}function wr(s,o){return ln(o[s.index])}function xa(s,o){return s.data[o]}function ki(s,o){return s[o]}function br(s,o){const a=o[s];return Ni(a)?a:a[0]}function Hs(s){return 4==(4&s[2])}function fs(s){return 128==(128&s[2])}function Zr(s,o){return null==o?null:s[o]}function $s(s){s[18]=0}function Gs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ft={lFrame:Eo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Eu(){return ft.bindingsEnabled}function De(){return ft.lFrame.lView}function Ut(){return ft.lFrame.tView}function ll(s){return ft.lFrame.contextLView=s,s[8]}function wn(){let s=Wo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Wo(){return ft.lFrame.currentTNode}function Yr(s,o){const a=ft.lFrame;a.currentTNode=s,a.isParent=o}function cl(){return ft.lFrame.isParent}function dl(){ft.lFrame.isParent=!1}function wu(){return ft.isInCheckNoChangesMode}function qs(s){ft.isInCheckNoChangesMode=s}function zs(){return ft.lFrame.bindingIndex++}function Pi(s){const o=ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Iu(s,o){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=s,Na(o)}function Na(s){ft.lFrame.currentDirectiveIndex=s}function gl(){return ft.lFrame.currentQueryIndex}function ml(s){ft.lFrame.currentQueryIndex=s}function Fc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function yl(s,o,a){if(a&ct.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&ct.Host||(d=Fc(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=ft.lFrame=Lc();return l.currentTNode=o,l.lView=s,!0}function vo(s){const o=Lc(),a=s[1];ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Lc(){const s=ft.lFrame,o=null===s?null:s.child;return null===o?Eo(s):o}function Eo(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Vc(){const s=ft.lFrame;return ft.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Bc=Vc;function wo(){const s=Vc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dr(){return ft.lFrame.selectedIndex}function Ks(s){ft.lFrame.selectedIndex=s}function Tn(){const s=ft.lFrame;return xa(s.tView,s.selectedIndex)}function ps(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:A,ngOnDestroy:x}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),A&&((s.viewHooks||(s.viewHooks=[])).push(a,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Oa(s,o,a){Uc(s,o,3,a)}function Cu(s,o,a,l){(3&s[2])===a&&Uc(s,o,a,l)}function jn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Uc(s,o,a,l){const g=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<g||-1==g)&&(jp(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function jp(s,o,a,l){const d=a[l]<0,g=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Yo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function mt(s,o,a){const l=_n(s);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=g,w=a[++d];Qr(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function rr(s){return 3===s||4===s||6===s}function Qr(s){return 64===s.charCodeAt(0)}function Fr(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Qo(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Qo(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function $c(s){return-1!==s}function gn(s){return 32767&s}function Fi(s,o){let a=function Ah(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Tu=!0;function hi(s){const o=Tu;return Tu=s,o}let Dl=0;function Hn(s,o){const a=Jo(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ms(l.data,s),ms(o,null),ms(l.blueprint,null));const d=fi(s,o),g=s.injectorIndex;if($c(d)){const v=gn(d),w=Fi(d,o),D=w[1].data;for(let A=0;A<8;A++)o[g+A]=w[v+A]|D[v+A]}return o[g+8]=d,g}function ms(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Jo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function fi(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(l=2===v?g.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Zs(s,o,a){!function Do(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ht)&&(l=a[ht]),null==l&&(l=a[ht]=Dl++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Yi(s,o,a){if(a&ct.Optional)return s;_e(o,"NodeInjector")}function Il(s,o,a,l){if(a&ct.Optional&&void 0===l&&(l=null),0==(a&(ct.Self|ct.Host))){const d=s[9],g=Wn(void 0);try{return d?d.get(o,l,a&ct.Optional):ai(o,l,a&ct.Optional)}finally{Wn(g)}}return Yi(l,o,a)}function Ys(s,o,a,l=ct.Default,d){if(null!==s){const g=function Xo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ht)?s[ht]:void 0;return"number"==typeof o?o>=0?255&o:Cl:o}(a);if("function"==typeof g){if(!yl(o,s,l))return l&ct.Host?Yi(d,a,l):Il(o,a,l,d);try{const v=g(l);if(null!=v||l&ct.Optional)return v;_e(a)}finally{Bc()}}else if("number"==typeof g){let v=null,w=Jo(s,o),D=-1,A=l&ct.Host?o[16][6]:null;for((-1===w||l&ct.SkipSelf)&&(D=-1===w?fi(s,o):o[w+8],-1!==D&&Lr(l,!1)?(v=o[1],w=gn(D),o=Fi(D,o)):w=-1);-1!==w;){const x=o[1];if(ea(g,w,x.data)){const P=qc(w,o,a,v,l,A);if(P!==Qi)return P}D=o[w+8],-1!==D&&Lr(l,o[1].data[w+8]===A)&&ea(g,w,o)?(v=x,w=gn(D),o=Fi(D,o)):w=-1}}}return Il(o,a,l,d)}const Qi={};function Cl(){return new Vi(wn(),De())}function qc(s,o,a,l,d,g){const v=o[1],w=v.data[s+8],x=Io(w,v,a,null==l?Ls(w)&&Tu:l!=v&&0!=(3&w.type),d&ct.Host&&g===w);return null!==x?Li(o,v,x,w):Qi}function Io(s,o,a,l,d){const g=s.providerIndexes,v=o.data,w=1048575&g,D=s.directiveStart,x=g>>20,U=d?w+x:s.directiveEnd;for(let Z=l?w:w+x;Z<U;Z++){const ye=v[Z];if(Z<D&&a===ye||Z>=D&&ye.type===a)return Z}if(d){const Z=v[D];if(Z&&Wr(Z)&&Z.type===a)return D}return null}function Li(s,o,a,l){let d=s[a];const g=o.data;if(function jc(s){return s instanceof Yo}(d)){const v=d;v.resolving&&function rt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(be(g[a]));const w=hi(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Wn(v.injectImpl):null;yl(s,l,ct.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function El(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Sa(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Wn(D),hi(w),v.resolving=!1,Bc()}}return d}function ea(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Lr(s,o){return!(s&ct.Self||s&ct.Host&&o)}class Vi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Ys(this._tNode,this._lView,o,l,a)}}function zc(s){return En(()=>{const o=s.prototype.constructor,a=o[et]||Fn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[et]||Fn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Fn(s){return qe(s)?()=>{const o=Fn(J(s));return o&&o()}:Kr(s)}function Co(s){return function pi(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(rr(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(wn(),s)}const ta="__parameters__";function Dn(s,o,a){return En(()=>{const l=function Ji(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return w.annotation=v,w;function w(D,A,x){const P=D.hasOwnProperty(ta)?D[ta]:Object.defineProperty(D,ta,{value:[]})[ta];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class An{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $p=new An("AnalyzeForEntryComponents");function Cr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Cr(l,o)):o!==s&&o.push(l)}return o}function gi(s,o){s.forEach(a=>Array.isArray(a)?gi(a,o):o(a))}function Sl(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function vs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ui(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function Zn(s,o,a){let l=eo(s,o);return l>=0?s[1|l]=a:(l=~l,function Ml(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Nl(s,o){const a=eo(s,o);if(a>=0)return s[1|a]}function eo(s,o){return function To(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Ao={},ra="__NG_DI_FLAG__",xu="ngTempTokenPath",C=/\n/gm,L="__source",K=ge({provide:String,useValue:ge});let ee;function xe(s){const o=ee;return ee=s,o}function Re(s,o=ct.Default){if(void 0===ee)throw new Oe(203,"");return null===ee?ai(s,void 0,o):ee.get(s,o&ct.Optional?null:void 0,o)}function Xe(s,o=ct.Default){return(function er(){return zr}()||Re)(J(s),o)}const kt=Xe;function St(s){const o=[];for(let a=0;a<s.length;a++){const l=J(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,g=ct.Default;for(let v=0;v<l.length;v++){const w=l[v],D=Sn(w);"number"==typeof D?-1===D?d=w.token:g|=D:d=w}o.push(Xe(d,g))}else o.push(Xe(l))}return o}function $n(s,o){return s[ra]=o,s.prototype[ra]=o,s}function Sn(s){return s[ra]}const Vr=$n(Dn("Inject",s=>({token:s})),-1),yi=$n(Dn("Optional"),8),Mo=$n(Dn("SkipSelf"),4);class nd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function to(s){return s instanceof nd?s.changingThisBreaksApplicationSecurity:s}const no=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ph=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function Pu(s){const o=function aa(){const s=De();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function sa(s,o){const a=function Nu(s){return s instanceof nd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?to(s):function Ou(s){return(s=String(s)).match(no)||s.match(Ph)?s:"unsafe:"+s}(fe(s))}const qh="__ngContext__";function Br(s,o){s[qh]=o}function zh(s){const o=function Va(s){return s[qh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ja(s){return s.ngOriginalError}function sg(s,...o){s.error(...o)}class Ar{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Ay(s){return s&&s.ngErrorLogger||sg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ja(o);for(;a&&ja(a);)a=ja(a);return a||null}}const Ry=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Gt))();function og(s){return s.ownerDocument.defaultView}function m(s){return s instanceof Function?s():s}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function tt(s,o){return undefined(s,o)}function Mn(s){const o=s[3];return li(o)?o[3]:o}function Fu(s){return ef(s[13])}function Lu(s){return ef(s[4])}function ef(s){for(;null!==s&&!li(s);)s=s[4];return s}function ua(s,o,a,l,d){if(null!=l){let g,v=!1;li(l)?g=l:Ni(l)&&(v=!0,l=l[0]);const w=ln(l);0===s&&null!==a?null==d?Vy(o,a,w):ws(o,a,w,d||null,!0):1===s&&null!==a?ws(o,a,w,d||null,!0):2===s?function Hy(s,o,a){const l=Vu(s,o);l&&function FI(s,o,a,l){_n(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=g&&function Kl(s,o,a,l,d){const g=a[7];g!==ln(a)&&ua(o,s,l,g,d);for(let w=10;w<a.length;w++){const D=a[w];dg(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function cd(s,o,a){if(_n(s))return s.createElement(o,a);{const l=null!==a?function pu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function EE(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Gs(d,-1)),a.splice(l,1)}function Py(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&EE(d,l),o>0&&(s[a-1][4]=l[4]);const g=vs(s,10+o);!function Xr(s,o){dg(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Fy(s,o){if(!(256&o[2])){const a=o[11];_n(a)&&a.destroyNode&&dg(s,o,a,3,null,null),function Oy(s){let o=s[13];if(!o)return Ly(s[1],s);for(;o;){let a=null;if(Ni(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Ni(o)&&Ly(o[1],o),o=o[3];null===o&&(o=s),Ni(o)&&Ly(o[1],o),a=o&&o[4]}o=a}}(o)}}function Ly(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function bE(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Yo)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=d[g[v]],D=g[v+1];try{D.call(w)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function wE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],w="function"==typeof v?v(o):ln(o[v]),D=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],D,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();o[7]=null}}(s,o),1===o[1].type&&_n(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&li(o[3])){a!==o[3]&&EE(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function lg(s,o,a){return function PI(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===zt.None||d===zt.Emulated)return null}return wr(l,a)}(s,o.parent,a)}function ws(s,o,a,l,d){_n(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Vy(s,o,a){_n(s)?s.appendChild(o,a):o.appendChild(a)}function DE(s,o,a,l,d){null!==l?ws(s,o,a,l,d):Vy(s,o,a)}function Vu(s,o){return _n(s)?s.parentNode(o):o.parentNode}function IE(s,o,a){return By(s,o,a)}let By=function CE(s,o,a){return 40&s.type?wr(s,a):null};function cg(s,o,a,l){const d=lg(s,l,o),g=o[11],w=IE(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)DE(g,d,a[D],w,!1);else DE(g,d,a,w,!1)}function hd(s,o){if(null!==o){const a=o.type;if(3&a)return wr(o,s);if(4&a)return jy(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return hd(s,l);{const d=s[o.index];return li(d)?jy(-1,d):ln(d)}}if(32&a)return tt(o,s)()||ln(s[o.index]);{const l=AE(s,o);return null!==l?Array.isArray(l)?l[0]:hd(Mn(s[16]),l):hd(s,o.next)}}return null}function AE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function jy(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return hd(l,d)}return o[7]}function $y(s,o,a,l,d,g,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&Br(ln(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)$y(s,o,a.child,l,d,g,!1),ua(o,s,d,w,g);else if(32&D){const A=tt(a,l);let x;for(;x=A();)ua(o,s,d,x,g);ua(o,s,d,w,g)}else 16&D?Gy(s,o,l,a,d,g):ua(o,s,d,w,g);a=v?a.projectionNext:a.next}}function dg(s,o,a,l,d,g){$y(a,l,s.firstChild,o,d,g,!1)}function Gy(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let A=0;A<D.length;A++)ua(o,s,d,D[A],g);else $y(s,o,D,v[3],d,g,!0)}function SE(s,o,a){_n(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function hg(s,o,a){_n(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function ME(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const xE="ng-template";function rf(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==ME(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Ha(s){return 4===s.type&&s.value!==xE}function RE(s,o,a){return o===(4!==s.type||a?s.value:xE)}function vi(s,o,a){let l=4;const d=s.attrs||[],g=function OE(s){for(let o=0;o<s.length;o++)if(rr(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!RE(s,D,a)||""===D&&1===o.length){if(Ur(l))return!1;v=!0}}else{const A=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!rf(s.attrs,A,a)){if(Ur(l))return!1;v=!0}continue}const P=BI(8&l?"class":D,d,Ha(s),a);if(-1===P){if(Ur(l))return!1;v=!0;continue}if(""!==A){let U;U=P>g?"":d[P+1].toLowerCase();const Z=8&l?U:null;if(Z&&-1!==ME(Z,A,0)||2&l&&A!==U){if(Ur(l))return!1;v=!0}}}}else{if(!v&&!Ur(l)&&!Ur(D))return!1;if(v&&Ur(D))continue;v=!1,l=D|1&l}}return Ur(l)||v}function Ur(s){return 0==(1&s)}function BI(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function kE(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function UI(s,o,a=!1){for(let l=0;l<o.length;l++)if(vi(s,o[l],a))return!0;return!1}function PE(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function qy(s,o){return s?":not("+o.trim()+")":o}function FE(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Ur(v)&&(o+=qy(g,d),d=""),l=v,g=g||!Ur(l);a++}return""!==d&&(o+=qy(g,d)),o}const Mt={};function zy(s){Wy(Ut(),De(),Dr()+s,wu())}function Wy(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Oa(o,g,a)}else{const g=s.preOrderHooks;null!==g&&Cu(o,g,0,a)}Ks(a)}function sf(s,o){return s<<17|o<<2}function Po(s){return s>>17&32767}function of(s){return 2|s}function ca(s){return(131068&s)>>2}function af(s,o){return-131069&s|o<<2}function fg(s){return 1|s}function i_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];ml(d),v.contentQueries(2,o[g],g)}}}function cf(s,o,a,l,d,g,v,w,D,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,$s(x),x[3]=x[15]=s,x[8]=a,x[10]=v||s&&s[10],x[11]=w||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=g,x[16]=2==o.type?s[16]:x,x}function Zl(s,o,a,l,d){let g=s.data[o];if(null===g)g=function df(s,o,a,l,d){const g=Wo(),v=cl(),D=s.data[o]=function ZI(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function fl(){return ft.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Ko(){const s=ft.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Yr(g,!0),g}function Uu(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function vg(s,o,a){vo(o);try{const l=s.viewQuery;null!==l&&b_(1,l,a);const d=s.template;null!==d&&ff(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&i_(s,o),s.staticViewQueries&&b_(2,s.viewQuery,a);const g=s.components;null!==g&&function s_(s,o){for(let a=0;a<o.length;a++)mf(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,wo()}}function ju(s,o,a,l){const d=o[2];if(256==(256&d))return;vo(o);const g=wu();try{$s(o),function bu(s){return ft.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&ff(s,o,a,2,l);const v=3==(3&d);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Oa(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Cu(o,A,0,null),jn(o,0)}if(function tC(s){for(let o=Fu(s);null!==o;o=Lu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Gs(g,1),d[2]|=1024}}}(o),function y_(s){for(let o=Fu(s);null!==o;o=Lu(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];fs(l)&&ju(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&i_(s,o),!g)if(v){const A=s.contentCheckHooks;null!==A&&Oa(o,A)}else{const A=s.contentHooks;null!==A&&Cu(o,A,1),jn(o,1)}!function KI(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Ks(~d);else{const g=d,v=a[++l],w=a[++l];Iu(v,g),w(2,o[g])}}}finally{Ks(-1)}}(s,o);const w=s.components;null!==w&&function jM(s,o){for(let a=0;a<o.length;a++)ew(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&b_(2,D,l),!g)if(v){const A=s.viewCheckHooks;null!==A&&Oa(o,A)}else{const A=s.viewHooks;null!==A&&Cu(o,A,2),jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Gs(o[3],-1))}finally{wo()}}function hf(s,o,a,l){const d=o[10],g=!wu(),v=Hs(o);try{g&&!v&&d.begin&&d.begin(),v&&vg(s,o,l),ju(s,o,a,l)}finally{g&&!v&&d.end&&d.end()}}function ff(s,o,a,l,d){const g=Dr(),v=2&l;try{Ks(-1),v&&o.length>20&&Wy(s,o,20,wu()),a(l,d)}finally{Ks(g)}}function Ql(s,o,a){!Eu()||(function qM(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||Hn(a,o),Br(l,o);const v=a.initialInputs;for(let w=d;w<g;w++){const D=s.data[w],A=Wr(D);A&&XI(o,a,D);const x=Li(o,s,w,a);Br(x,o),null!==v&&eC(0,w-d,x,D,0,v),A&&(br(a.index,o)[8]=x)}}(s,o,a,wr(a,o)),128==(128&a.flags)&&function QI(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function pl(){return ft.lFrame.currentDirectiveIndex}();try{Ks(v);for(let D=l;D<d;D++){const A=s.data[D],x=o[D];Na(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&h_(A,x)}}finally{Ks(-1),Na(w)}}(s,o,a))}function o_(s,o,a=wr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function Eg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=pf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function pf(s,o,a,l,d,g,v,w,D,A){const x=20+l,P=x+d,U=function a_(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Mt);return a}(x,P),Z="function"==typeof A?A():A;return U[1]={type:s,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Z,incompleteFirstPass:!1}}function wg(s,o,a,l){const d=rw(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&D_(s).push(l,d.length-1))}function d_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function YE(s,o,a,l){let d=!1;if(Eu()){const g=function JI(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];UI(a,v.selectors,!1)&&(d||(d=[]),Zs(Hn(a,o),s,v.type),Wr(v)?(f_(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,JE(a,s.data.length,g.length);for(let x=0;x<g.length;x++){const P=g[x];P.providersResolver&&P.providersResolver(P)}let w=!1,D=!1,A=Uu(s,o,g.length,null);for(let x=0;x<g.length;x++){const P=g[x];a.mergedAttrs=Fr(a.mergedAttrs,P.hostAttrs),g_(s,a,o,A,P),p_(A,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),A++}!function zE(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let w=null,D=null;for(let A=o.directiveStart;A<l;A++){const x=d[A],P=x.inputs,U=null===g||Ha(o)?null:XE(P,g);v.push(U),w=d_(P,A,w),D=d_(x.outputs,A,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function QE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new Oe(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=Fr(a.mergedAttrs,a.attrs),d}function YI(s,o,a,l,d,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function GM(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function h_(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function f_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function p_(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Wr(o)&&(a[""]=s)}}function JE(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function g_(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Kr(d.type)),v=new Yo(g,Wr(d),null);s.blueprint[l]=v,a[l]=v,YI(s,o,0,l,Uu(s,a,d.hostVars,Mt),d)}function XI(s,o,a){const l=wr(o,s),d=Eg(a),g=s[10],v=md(s,cf(s,d,null,a.onPush?64:16,l,o,g,g.createRenderer(l,a),null,null));s[o.index]=v}function $a(s,o,a,l,d,g){const v=wr(s,o);!function Dg(s,o,a,l,d,g,v){if(null==g)_n(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?fe(g):v(g,l||"",d);_n(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,g,s.value,a,l,d)}function eC(s,o,a,l,d,g){const v=g[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const A=v[D++],x=v[D++],P=v[D++];null!==w?l.setInput(a,P,A,x):a[x]=P}}}function XE(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function m_(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function ew(s,o){const a=br(o,s);if(fs(a)){const l=a[1];80&a[2]?ju(l,a,l.template,a[8]):a[5]>0&&__(a)}}function __(s){for(let l=Fu(s);null!==l;l=Lu(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const v=g[1];ju(v,g,v.template,g[8])}else g[5]>0&&__(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=br(a[l],s);fs(d)&&d[5]>0&&__(d)}}function mf(s,o){const a=br(o,s),l=a[1];(function nC(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),vg(l,a,a[8])}function md(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function v_(s){for(;s;){s[2]|=64;const o=Mn(s);if(bh(s)&&!o)return s;s=o}return null}function w_(s,o,a){const l=o[10];l.begin&&l.begin();try{ju(s,o,s.template,a)}catch(d){throw sC(o,d),d}finally{l.end&&l.end()}}function yf(s){!function Ig(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=zh(a),d=l[1];hf(d,l,d.template,a)}}(s[8])}function b_(s,o,a){ml(0),o(s,a)}const iC=(()=>Promise.resolve(null))();function rw(s){return s[7]||(s[7]=[])}function D_(s){return s.cleanup||(s.cleanup=[])}function sC(s,o){const a=s[9],l=a?a.get(Ar,null):null;l&&l.handleError(o)}function Cg(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],w=a[g++],D=o[v],A=s.data[v];null!==A.setInput?A.setInput(D,d,l,w):D[w]=d}}function Ga(s,o,a){const l=_o(o,s);!function ld(s,o,a){_n(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function _f(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?g=w:1==g?d=ce(d,w):2==g&&(l=ce(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const I_=new An("INJECTOR",-1);class C_{get(o,a=Ao){if(a===Ao){const l=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw l.name="NullInjectorError",l}return a}}const T_=new An("Set Injector scope."),_d={},aC={};let A_;function Tg(){return void 0===A_&&(A_=new C_),A_}function S_(s,o=null,a=null,l){const d=ow(s,o,a,l);return d._resolveInjectorDefTypes(),d}function ow(s,o=null,a=null,l){return new aw(s,a,o||Tg(),l)}class aw{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&gi(a,w=>this.processProvider(w,o,a)),gi([o],w=>this.processInjectorType(w,[],g)),this.records.set(I_,vd(void 0,this));const v=this.records.get(T_);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:he(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Ao,l=ct.Default){this.assertNotDestroyed();const d=xe(this),g=Wn(void 0);try{if(!(l&ct.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function YM(s){return"function"==typeof s||"object"==typeof s&&s instanceof An}(o)&&qt(o);w=D&&this.injectableDefInScope(D)?vd(M_(o),_d):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&ct.Self?Tg():this.parent).get(o,a=l&ct.Optional&&a===Ao?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[xu]=v[xu]||[]).unshift(he(o)),d)throw v;return function ia(s,o,a,l){const d=s[xu];throw o[L]&&d.unshift(o[L]),s.message=function So(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=he(o);if(Array.isArray(o))d=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):he(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[xu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Wn(g),xe(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(he(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=J(o)))return!1;let d=kr(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,w=-1!==l.indexOf(v);if(void 0!==g&&(d=kr(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(v);try{gi(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:Z}=x[P];gi(Z,ye=>this.processProvider(ye,U,Z||dt))}}this.injectorDefTypes.add(v);const D=Kr(v)||(()=>new v);this.records.set(v,vd(D,_d));const A=d.providers;if(null!=A&&!w){const x=o;gi(A,P=>this.processProvider(P,x,A))}return void 0!==g&&void 0!==o.providers}processProvider(o,a,l){let d=vf(o=J(o))?o:J(o&&o.provide);const g=function uC(s,o,a){return R_(s)?vd(void 0,s.useValue):vd(x_(s),_d)}(o);if(vf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=vd(void 0,_d,!0),v.factory=()=>St(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,a){return a.value===_d&&(a.value=aC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function lw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=J(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function M_(s){const o=qt(s),a=null!==o?o.factory:Kr(s);if(null!==a)return a;if(s instanceof An)throw new Oe(204,!1);if(s instanceof Function)return function uw(s){const o=s.length;if(o>0)throw Ui(o,"?"),new Oe(204,!1);const a=function oi(s){const o=s&&(s[Wi]||s[os]);if(o){const a=function Ns(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function x_(s,o,a){let l;if(vf(s)){const d=J(s);return Kr(d)||M_(d)}if(R_(s))l=()=>J(s.useValue);else if(function KM(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...St(s.deps||[]));else if(function WM(s){return!(!s||!s.useExisting)}(s))l=()=>Xe(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function ZM(s){return!!s.deps}(s))return Kr(d)||M_(d);l=()=>new d(...St(s.deps))}return l}function vd(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function R_(s){return null!==s&&"object"==typeof s&&K in s}function vf(s){return"function"==typeof s}let ha=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return S_({name:""},l,a,"");{const g=null!==(d=a.name)&&void 0!==d?d:"";return S_({name:g},a.parent,a.providers,g)}}}return s.THROW_IF_NOT_FOUND=Ao,s.NULL=new C_,s.\u0275prov=on({token:s,providedIn:"any",factory:()=>Xe(I_)}),s.__NG_ELEMENT_ID__=-1,s})();function bs(s,o){ps(zh(s)[1],wn())}function Hu(s){let o=function wC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Wr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=O_(s.inputs),v.declaredInputs=O_(s.declaredInputs),v.outputs=O_(s.outputs);const w=d.hostBindings;w&&JM(s,w);const D=d.viewQuery,A=d.contentQueries;if(D&&wf(s,D),A&&bC(s,A),re(s.inputs,d.inputs),re(s.declaredInputs,d.declaredInputs),re(s.outputs,d.outputs),Wr(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===Hu&&(a=!1)}}o=Object.getPrototypeOf(o)}!function gw(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Fr(d.hostAttrs,a=Fr(a,d.hostAttrs))}}(l)}function O_(s){return s===cr?{}:s===dt?[]:s}function wf(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function bC(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function JM(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Mg=null;function bf(){if(!Mg){const s=Gt.Symbol;if(s&&s.iterator)Mg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Mg=l)}}}return Mg}function Jl(s){return!!xg(s)&&(Array.isArray(s)||!(s instanceof Map)&&bf()in s)}function xg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ei(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function k_(s,o,a,l){const d=De();return Ei(d,zs(),o)&&(Ut(),$a(Tn(),d,s,o,a,l)),k_}function Dw(s,o,a,l,d,g,v,w){const D=De(),A=Ut(),x=s+20,P=A.firstCreatePass?function CC(s,o,a,l,d,g,v,w,D){const A=o.consts,x=Zl(o,s,4,v||null,Zr(A,w));YE(o,a,x,Zr(A,D)),ps(o,x);const P=x.tViews=pf(2,x,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),P.queries=o.queries.embeddedTView(x)),x}(x,A,D,o,a,l,d,g,v):A.data[x];Yr(P,!1);const U=D[11].createComment("");cg(A,D,U,P),Br(U,D),md(D,D[x]=m_(U,D,U,P)),uu(P)&&Ql(A,D,P),null!=v&&o_(D,P,w)}function Td(s){return ki(function hl(){return ft.lFrame.contextLView}(),20+s)}function xf(s,o=ct.Default){const a=De();return null===a?Xe(s,o):Ys(wn(),a,J(s),o)}function Pw(){throw new Error("invalid")}function q_(s,o,a){const l=De();return Ei(l,zs(),o)&&function Gi(s,o,a,l,d,g,v,w){const D=wr(o,a);let x,A=o.inputs;!w&&null!=A&&(x=A[l])?(Cg(s,a,x,l,d),Ls(o)&&function bg(s,o){const a=br(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function WE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,_n(g)?g.setProperty(D,l,d):Qr(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}(Ut(),Tn(),l,s,o,l[11],a,!1),q_}function z_(s,o,a,l,d){const v=d?"class":"style";Cg(s,a,o.inputs[v],v,l)}function Pg(s,o,a,l){const d=De(),g=Ut(),v=20+s,w=d[11],D=d[v]=cd(w,o,function sy(){return ft.lFrame.currentNamespace}()),A=g.firstCreatePass?function VC(s,o,a,l,d,g,v){const w=o.consts,A=Zl(o,s,2,d,Zr(w,g));return YE(o,a,A,Zr(w,v)),null!==A.attrs&&_f(A,A.attrs,!1),null!==A.mergedAttrs&&_f(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(v,g,d,0,o,a,l):g.data[v];Yr(A,!0);const x=A.mergedAttrs;null!==x&&mt(w,D,x);const P=A.classes;null!==P&&hg(w,D,P);const U=A.styles;return null!==U&&SE(w,D,U),64!=(64&A.flags)&&cg(g,d,D,A),0===function Ra(){return ft.lFrame.elementDepthCount}()&&Br(D,d),function _u(){ft.lFrame.elementDepthCount++}(),uu(A)&&(Ql(g,d,A),function Yl(s,o,a){if(Ac(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}(g,A,d)),null!==l&&o_(d,A),Pg}function Fg(){let s=wn();cl()?dl():(s=s.parent,Yr(s,!1));const o=s;!function vu(){ft.lFrame.elementDepthCount--}();const a=Ut();return a.firstCreatePass&&(ps(a,s),Ac(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Th(s){return 0!=(16&s.flags)}(o)&&z_(a,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hp(s){return 0!=(32&s.flags)}(o)&&z_(a,o,De(),o.stylesWithoutHost,!1),Fg}function W_(s,o,a,l){return Pg(s,o,a,l),Fg(),W_}function Vg(){return De()}function K_(s){return!!s&&"function"==typeof s.then}function Z_(s){return!!s&&"function"==typeof s.subscribe}const BC=Z_;function Bg(s,o,a,l){const d=De(),g=Ut(),v=wn();return function qi(s,o,a,l,d,g,v,w){const D=uu(l),x=s.firstCreatePass&&D_(s),P=o[8],U=rw(o);let Z=!0;if(3&l.type||w){const $e=wr(l,o),it=w?w($e):$e,Ie=U.length,gt=w?Zt=>w(ln(Zt[l.index])):l.index;if(_n(a)){let Zt=null;if(!w&&D&&(Zt=function UC(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const w=o[7],D=d[g+2];return w.length>D?w[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=g,Zt.__ngLastListenerFn__=g,Z=!1;else{g=Sd(l,o,P,g,!1);const yn=a.listen(it,d,g);U.push(g,yn),x&&x.push(d,gt,Ie,Ie+1)}}else g=Sd(l,o,P,g,!0),it.addEventListener(d,g,v),U.push(g),x&&x.push(d,gt,Ie,v)}else g=Sd(l,o,P,g,!1);const ye=l.outputs;let Fe;if(Z&&null!==ye&&(Fe=ye[d])){const $e=Fe.length;if($e)for(let it=0;it<$e;it+=2){const As=o[Fe[it]][Fe[it+1]].subscribe(g),bc=U.length;U.push(g,As),x&&x.push(d,l.index,bc,-(bc+1))}}}(g,d,d[11],v,s,o,!!a,l),Bg}function jC(s,o,a,l){try{return!1!==a(l)}catch(d){return sC(s,d),!1}}function Sd(s,o,a,l,d){return function g(v){if(v===Function)return l;const w=2&s.flags?br(s.index,o):o;0==(32&o[2])&&v_(w);let D=jC(o,0,l,v),A=g.__ngNextListenerFn__;for(;A;)D=jC(o,0,A,v)&&D,A=A.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Ug(s=1){return function Ws(s){return(ft.lFrame.contextLView=function _l(s,o){for(;s>0;)o=o[15],s--;return o}(s,ft.lFrame.contextLView))[8]}(s)}function HC(s,o){let a=null;const l=function NE(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const g=o[d];if("*"!==g){if(null===l?UI(s,g,!0):PE(l,g))return d}else a=d}return a}function Bw(s){const o=De()[16][6];if(!o.projection){const l=o.projection=Ui(s?s.length:1,null),d=l.slice();let g=o.child;for(;null!==g;){const v=s?HC(g,s):0;null!==v&&(d[v]?d[v].projectionNext=g:l[v]=g,d[v]=g),g=g.next}}}function $C(s,o=0,a){const l=De(),d=Ut(),g=Zl(d,20+s,16,null,a||null);null===g.projection&&(g.projection=o),dl(),64!=(64&g.flags)&&function VI(s,o,a){Gy(o[11],0,o,a,lg(s,a,o),IE(a.parent||o[6],a,o))}(d,l,g)}function io(s,o,a,l,d){const g=s[a+1],v=null===o;let w=l?Po(g):ca(g),D=!1;for(;0!==w&&(!1===D||v);){const x=s[w+1];nx(s[w],o)&&(D=!0,s[w+1]=l?fg(x):of(x)),w=l?Po(x):ca(x)}D&&(s[a+1]=l?of(g):fg(g))}function nx(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&eo(s,o)>=0}const Sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ve(s){return s.substring(Sr.key,Sr.keyEnd)}function qa(s,o){const a=Sr.textEnd;return a===o?-1:(o=Sr.keyEnd=function Q_(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Sr.key=o,a),Qe(s,o,a))}function Qe(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function X_(s,o){return function bn(s,o,a,l){const d=De(),g=Ut(),v=Pi(2);g.firstUpdatePass&&Kw(g,s,v,l),o!==Mt&&Ei(d,v,o)&&bi(g,g.data[Dr()],d,d[11],s,d[v+1]=function nv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(to(s)))),s}(o,a),l,v)}(s,o,null,!0),X_}function jr(s){!function Hr(s,o,a,l){const d=Ut(),g=Pi(2);d.firstUpdatePass&&Kw(d,null,g,l);const v=De();if(a!==Mt&&Ei(v,g,a)){const w=d.data[Dr()];if(rv(w,l)&&!Ww(d,g)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=ce(D,a||"")),z_(d,w,v,a,l)}else!function ev(s,o,a,l,d,g,v,w){d===Mt&&(d=dt);let D=0,A=0,x=0<d.length?d[0]:null,P=0<g.length?g[0]:null;for(;null!==x||null!==P;){const U=D<d.length?d[D+1]:void 0,Z=A<g.length?g[A+1]:void 0;let Fe,ye=null;x===P?(D+=2,A+=2,U!==Z&&(ye=P,Fe=Z)):null===P||null!==x&&x<P?(D+=2,ye=x):(A+=2,ye=P,Fe=Z),null!==ye&&bi(s,o,a,l,ye,Fe,v,w),x=D<d.length?d[D]:null,P=A<g.length?g[A]:null}}(d,w,v,v[11],v[g+1],v[g+1]=function Jw(s,o,a){if(null==a||""===a)return dt;const l=[],d=to(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(Zn,Ds,s,!0)}function Ds(s,o){for(let a=function Hg(s){return function ga(s){Sr.key=0,Sr.keyEnd=0,Sr.value=0,Sr.valueEnd=0,Sr.textEnd=s.length}(s),qa(s,Qe(s,0,Sr.textEnd))}(o);a>=0;a=qa(o,a))Zn(s,ve(o),!0)}function Ww(s,o){return o>=s.expandoStartIndex}function Kw(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Dr()],v=Ww(s,a);rv(g,l)&&null===o&&!v&&(o=!1),o=function Zw(s,o,a,l){const d=function Zo(s){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Gu(a=Of(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=Of(d,s,o,a,l),null===g){let D=function Yw(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==ca(l))return s[Po(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=Of(null,s,o,D[1],l),D=Gu(D,o.attrs,l),function ZC(s,o,a,l){s[Po(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function Qw(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=Gu(l,s[g].hostAttrs,a);return Gu(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function zC(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,w=Po(v),D=ca(v);s[l]=a;let x,A=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||eo(P,x)>0)&&(A=!0)}else x=a;if(d)if(0!==D){const U=Po(s[w+1]);s[l+1]=sf(U,w),0!==U&&(s[U+1]=af(s[U+1],l)),s[w+1]=function BE(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=sf(w,0),0!==w&&(s[w+1]=af(s[w+1],l)),w=l;else s[l+1]=sf(D,0),0===w?w=l:s[D+1]=af(s[D+1],l),D=l;A&&(s[l+1]=of(s[l+1])),io(s,x,l,!0),io(s,x,l,!1),function WC(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&eo(g,o)>=0&&(a[l+1]=fg(a[l+1]))}(o,x,s,l,g),v=sf(w,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function Of(s,o,a,l,d){let g=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(g=o[w],l=Gu(l,g.hostAttrs,d),g!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function Gu(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Zn(s,v,!!a||o[++g]))}return void 0===s?null:s}function bi(s,o,a,l,d,g,v,w){if(!(3&o.type))return;const D=s.data,A=D[w+1];kf(function Yy(s){return 1==(1&s)}(A)?tv(D,o,a,d,ca(A),v):void 0)||(kf(g)||function Zy(s){return 2==(2&s)}(A)&&(g=tv(D,null,a,d,w,v)),function la(s,o,a,l,d){const g=_n(s);if(o)d?g?s.addClass(a,l):a.classList.add(l):g?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:oe.DashCase;if(null==d)g?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=oe.Important),g?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,_o(Dr(),a),d,g))}function tv(s,o,a,l,d,g){const v=null===o;let w;for(;d>0;){const D=s[d],A=Array.isArray(D),x=A?D[1]:D,P=null===x;let U=a[d+1];U===Mt&&(U=P?dt:void 0);let Z=P?Nl(U,l):x===l?U:void 0;if(A&&!kf(Z)&&(Z=Nl(D,l)),kf(Z)&&(w=Z,v))return w;const ye=s[d+1];d=v?Po(ye):ca(ye)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(w=Nl(D,l))}return w}function kf(s){return void 0!==s}function rv(s,o){return 0!=(s.flags&(o?16:32))}function iv(s,o=""){const a=De(),l=Ut(),d=s+20,g=l.firstCreatePass?Zl(l,d,1,o,null):l.data[d],v=a[d]=function ud(s,o){return _n(s)?s.createText(o):s.createTextNode(o)}(a[11],o);cg(l,a,v,g),Yr(g,!1)}function xd(s,o,a){const l=De(),d=function tc(s,o,a,l){return Ei(s,zs(),a)?o+fe(a)+l:Mt}(l,s,o,a);return d!==Mt&&Ga(l,Dr(),d),xd}const ac=void 0;var vv=["en",[["a","p"],["AM","PM"],ac],[["AM","PM"],ac,ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ac,"{1} 'at' {0}",ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _v(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let qu={};function Mr(s){const o=function rT(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=ib(o);if(a)return a;const l=o.split("-")[0];if(a=ib(l),a)return a;if("en"===l)return vv;throw new Error(`Missing locale data for the locale "${s}".`)}function Xg(s){return Mr(s)[wt.PluralCase]}function ib(s){return s in qu||(qu[s]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[s]),qu[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Rd="en-US";let em=Rd;function Uv(s,o,a,l,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)Uv(s[g],o,a,l,d);else{const g=Ut(),v=De();let w=vf(s)?s:J(s.provide),D=x_(s);const A=wn(),x=1048575&A.providerIndexes,P=A.directiveStart,U=A.providerIndexes>>20;if(vf(s)||!s.multi){const Z=new Yo(D,d,xf),ye=Wf(w,o,d?x:x+U,P);-1===ye?(Zs(Hn(A,v),g,w),lm(g,s,o.length),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(Z),v.push(Z)):(a[ye]=Z,v[ye]=Z)}else{const Z=Wf(w,o,x+U,P),ye=Wf(w,o,x,x+U),Fe=Z>=0&&a[Z],$e=ye>=0&&a[ye];if(d&&!$e||!d&&!Fe){Zs(Hn(A,v),g,w);const it=function $v(s,o,a,l,d){const g=new Yo(s,a,xf);return g.multi=[],g.index=o,g.componentProviders=0,jv(g,d,l&&!a),g}(d?wb:Hv,a.length,d,l,D);!d&&$e&&(a[ye].providerFactory=it),lm(g,s,o.length,0),o.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(it),v.push(it)}else lm(g,s,Z>-1?Z:ye,jv(a[d?ye:Z],D,!d&&l));!d&&l&&$e&&a[ye].componentProviders++}}}function lm(s,o,a,l){const d=vf(o),g=function lC(s){return!!s.useClass}(o);if(d||g){const D=(g?J(o.useClass):o).prototype.ngOnDestroy;if(D){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,D]):A[x+1].push(l,D)}else A.push(a,D)}}}function jv(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Wf(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Hv(s,o,a,l){return cm(this.multi,[])}function wb(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Li(a,a[1],this.providerFactory.index,l);g=w.slice(0,v),cm(d,g);for(let D=v;D<w.length;D++)g.push(w[D])}else g=[],cm(d,g);return g}function cm(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function bb(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Eb(s,o,a){const l=Ut();if(l.firstCreatePass){const d=Wr(s);Uv(a,l.data,l.blueprint,d,!0),Uv(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Db{}class qv{resolveComponentFactory(o){throw function dm(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Kf=(()=>{class s{}return s.NULL=new qv,s})();function Zf(){return _a(wn(),De())}function _a(s,o){return new Yf(wr(s,o))}let Yf=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Zf,s})();function gr(s){return s instanceof Yf?s.nativeElement:s}class Ib{}let wT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function DT(){const s=De(),a=br(wn().index,s);return function bT(s){return s[11]}(Ni(a)?a:s)}(),s})(),Cb=(()=>{class s{}return s.\u0275prov=on({token:s,providedIn:"root",factory:()=>null}),s})();class zv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Wv=new zv("13.2.7"),$d={};function Qf(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(ln(g)),li(g))for(let w=10;w<g.length;w++){const D=g[w],A=D[1].firstChild;null!==A&&Qf(D[1],D,A,l)}const v=a.type;if(8&v)Qf(s,o,a.child,l);else if(32&v){const w=tt(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=AE(o,a);if(Array.isArray(w))l.push(...w);else{const D=Mn(o[16]);Qf(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class Is{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Qf(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(li(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Py(o,l),vs(a,l))}this._attachedToViewContainer=!1}Fy(this._lView[1],this._lView)}onDestroy(o){wg(this._lView[1],this._lView,null,o)}markForCheck(){v_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){w_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function rC(s,o,a){qs(!0);try{w_(s,o,a)}finally{qs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ug(s,o){dg(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class Tb extends Is{constructor(o){super(o),this._view=o}detectChanges(){yf(this._view)}checkNoChanges(){!function tw(s){qs(!0);try{yf(s)}finally{qs(!1)}}(this._view)}get context(){return null}}class Ab extends Kf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Wt(o);return new Xf(a,this.ngModule)}}function hm(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Xf extends Db{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function LE(s){return s.map(FE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return hm(this.componentDef.inputs)}get outputs(){return hm(this.componentDef.outputs)}create(o,a,l,d){const g=(d=d||this.ngModule)?function Sb(s,o){return{get:(a,l,d)=>{const g=s.get(a,$d,d);return g!==$d||l===$d?g:o.get(a,l,d)}}}(o,d.injector):o,v=g.get(Ib,zo),w=g.get(Cb,null),D=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function c_(s,o,a){if(_n(s))return s.selectRootElement(o,a===zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):cd(v.createRenderer(null,this.componentDef),A,function Jf(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),P=this.componentDef.onPush?576:528,U=function Ef(s,o){return{components:[],scheduler:s||Ry,clean:iC,playerHandler:o||null,flags:0}}(),Z=pf(0,null,null,1,0,null,null,null,null,null),ye=cf(null,Z,U,P,null,null,v,D,w,g);let Fe,$e;vo(ye);try{const it=function vC(s,o,a,l,d,g){const v=a[1];a[20]=s;const D=Zl(v,20,2,"#host",null),A=D.mergedAttrs=o.hostAttrs;null!==A&&(_f(D,A,!0),null!==s&&(mt(d,s,A),null!==D.classes&&hg(d,s,D.classes),null!==D.styles&&SE(d,s,D.styles)));const x=l.createRenderer(s,o),P=cf(a,Eg(o),null,o.onPush?64:16,a[20],D,l,x,g||null,null);return v.firstCreatePass&&(Zs(Hn(D,a),v,o.type),f_(v,D),JE(D,a.length,1)),md(a,P),a[20]=P}(x,this.componentDef,ye,v,D);if(x)if(l)mt(D,x,["ng-version",Wv.full]);else{const{attrs:Ie,classes:gt}=function VE(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!Ur(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ie&&mt(D,x,Ie),gt&&gt.length>0&&hg(D,x,gt.join(" "))}if($e=xa(Z,20),void 0!==a){const Ie=$e.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Zt=a[gt];Ie.push(null!=Zt?Array.from(Zt):null)}}Fe=function EC(s,o,a,l,d){const g=a[1],v=function ZE(s,o,a){const l=wn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),g_(s,l,o,Uu(s,o,1,null),a));const d=Li(o,s,l.directiveStart,l);Br(d,o);const g=wr(l,o);return g&&Br(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=wn();o.contentQueries(1,v,D.directiveStart)}const w=wn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ks(w.index),YI(a[1],w,0,w.directiveStart,w.directiveEnd,o),h_(o,v)),v}(it,this.componentDef,ye,U,[bs]),vg(Z,ye,null)}finally{wo()}return new Kv(this.componentType,Fe,_a($e,ye),ye,$e)}}class Kv extends class vT{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Tb(d),this.componentType=o}get injector(){return new Vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Gd{}class Zv{}const va=new Map;class e0 extends Gd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ab(this);const l=fn(o);this._bootstrapComponents=m(l.bootstrap),this._r3Injector=ow(o,a,[{provide:Gd,useValue:this},{provide:Kf,useValue:this.componentFactoryResolver}],he(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ha.THROW_IF_NOT_FOUND,l=ct.Default){return o===ha||o===Gd||o===I_?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class gm extends Zv{constructor(o){super(),this.moduleType=o,null!==fn(o)&&function Qv(s){const o=new Set;!function a(l){const d=fn(l,!0),g=d.id;null!==g&&(function Yv(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${he(o)} vs ${he(o.name)}`)}(g,va.get(g),l),va.set(g,l));const v=m(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new e0(this.moduleType,o)}}function Fb(s,o,a,l,d,g){const v=o+a;return Ei(s,v,d)?function pa(s,o,a){return s[o]=a}(s,v+1,g?l.call(g,d):l(d)):function ep(s,o){const a=s[o];return a===Mt?void 0:a}(s,v+1)}function Bb(s,o){const a=Ut();let l;const d=s+20;a.firstCreatePass?(l=function _m(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Kr(l.type)),v=Wn(xf);try{const w=hi(!1),D=g();return hi(w),function TC(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,De(),d,D),D}finally{Wn(v)}}function Ub(s,o,a){const l=s+20,d=De(),g=ki(d,l);return function fc(s,o){return s[1].data[o].pure}(d,l)?Fb(d,function pr(){const s=ft.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,g.transform,a,g):g.transform(a)}function Pe(s){return o=>{setTimeout(s,void 0,o)}}const vn=class TT extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,g,v;let w=o,D=a||(()=>null),A=l;if(o&&"object"==typeof o){const P=o;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),D=null===(g=P.error)||void 0===g?void 0:g.bind(P),A=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(D=Pe(D),w&&(w=Pe(w)),A&&(A=Pe(A)));const x=super.subscribe({next:w,error:D,complete:A});return o instanceof Y.w0&&o.add(x),x}};function tp(){return this._results[bf()]()}class np{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=bf(),l=np.prototype;l[a]||(l[a]=tp)}get changes(){return this._changes||(this._changes=new vn)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Cr(o);(this._changesDetected=!function Al(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let nt=(()=>{class s{}return s.__NG_ELEMENT_ID__=ze,s})();const xt=nt,AT=class extends xt{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=cf(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),vg(a,l,o),new Is(l)}};function ze(){return ae(wn(),De())}function ae(s,o){return 4&s.type?new AT(o,s,_a(s,o)):null}let Me=(()=>{class s{}return s.__NG_ELEMENT_ID__=$r,s})();function $r(){return qb(wn(),De())}const Hb=Me,$b=class extends Hb{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Vi(this._hostTNode,this._hostLView)}get parentInjector(){const o=fi(this._hostTNode,this._hostLView);if($c(o)){const a=Fi(o,this._hostLView),l=gn(o);return new Vi(a[1].data[l+8],a)}return new Vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Gb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,g){const v=o&&!function na(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,g=P.ngModuleRef}const D=v?o:new Xf(Wt(o)),A=l||this.parentInjector;if(!g&&null==D.ngModule){const U=(v?A:this.parentInjector).get(Gd,null);U&&(g=U)}const x=D.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(o,a){const l=o._lView,d=l[1];if(function mu(s){return li(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const P=l[3],U=new $b(P,P[6],P[3]);U.detach(U.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function ky(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],Sl(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function dd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,g);const w=jy(g,v),D=l[11],A=Vu(D,v[7]);return null!==A&&function nf(s,o,a,l,d,g){l[0]=d,l[6]=o,dg(s,l,a,1,d,g)}(d,v[6],D,l,A,w),o.attachToViewContainerRef(),Sl(n0(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Gb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Py(this._lContainer,a);l&&(vs(n0(this._lContainer),a),Fy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Py(this._lContainer,a);return l&&null!=vs(n0(this._lContainer),a)?new Is(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Gb(s){return s[8]}function n0(s){return s[8]||(s[8]=[])}function qb(s,o){let a;const l=o[s.index];if(li(l))a=l;else{let d;if(8&s.type)d=ln(l);else{const g=o[11];d=g.createComment("");const v=wr(s,o);ws(g,Vu(g,v),d,function LI(s,o){return _n(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=a=m_(l,o,d,s),md(o,a)}return new $b(a,s,o)}class Wb{constructor(o){this.queryList=o,this.matches=null}clone(){return new Wb(this.queryList)}setDirty(){this.queryList.setDirty()}}class zi{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new zi(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Jb(o,a).matches&&this.queries[a].setDirty()}}class Kb{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class vm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new vm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Pt{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Pt(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,Wd(a,g)),this.matchTNodeWithReadOption(o,a,Io(a,o,g,!1,!1))}else l===nt?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Io(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Yf||d===Me||d===nt&&4&a.type)this.addMatch(a.index,-2);else{const g=Io(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Wd(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function ir(s,o,a,l){return-1===a?function Zb(s,o){return 11&s.type?_a(s,o):4&s.type?ae(s,o):null}(o,s):-2===a?function Ct(s,o,a){return a===Yf?_a(o,s):a===nt?ae(o,s):a===Me?qb(o,s):void 0}(s,o,l):Li(s,s[1],a,o)}function r0(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const A=v[D];w.push(A<0?null:ir(o,g[A],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function Wa(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=r0(s,o,d,a);for(let w=0;w<g.length;w+=2){const D=g[w];if(D>0)l.push(v[w/2]);else{const A=g[w+1],x=o[-D];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&Wa(U[1],U,A,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const Z=P[U];Wa(Z[1],Z,A,l)}}}}}return l}function s0(s){const o=De(),a=Ut(),l=gl();ml(l+1);const d=Jb(a,l);if(s.dirty&&Hs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Wa(a,o,l,[]):r0(a,o,d,l);s.reset(g,gr),s.notifyOnChanges()}return!0}return!1}function Jt(s,o,a,l){const d=Ut();if(d.firstCreatePass){const g=wn();(function Qb(s,o,a){null===s.queries&&(s.queries=new vm),s.queries.track(new Pt(o,a))})(d,new Kb(o,a,l),g.index),function Rr(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function pc(s,o,a){const l=new np(4==(4&a));wg(s,o,l,l.destroy),null===o[19]&&(o[19]=new zi),o[19].queries.push(new Wb(l))}(d,De(),a)}function Yb(){return function Gr(s,o){return s[19].queries[o].queryList}(De(),gl())}function Jb(s,o){return s.queries.getByIndex(o)}function Ka(s,o){return ae(s,o)}function Am(...s){}const oD=new An("Application Initializer");let Sm=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Am,this.reject=Am,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(K_(g))a.push(g);else if(BC(g)){const v=new Promise((w,D)=>{g.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Xe(oD,8))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const aD=new An("AppId",{providedIn:"root",factory:function uD(){return`${g0()}${g0()}${g0()}`}});function g0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ja=new An("Platform Initializer"),yc=new An("Platform ID"),lD=new An("appBootstrapListener");let m0=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();const Mm=new An("LocaleId",{providedIn:"root",factory:()=>kt(Mm,ct.Optional|ct.SkipSelf)||function Xa(){return"undefined"!=typeof $localize&&$localize.locale||Rd}()}),Xd=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class v0{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let E0=(()=>{class s{compileModuleSync(a){return new gm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=m(fn(a).declarations).reduce((v,w)=>{const D=Wt(w);return D&&v.push(new Xf(D)),v},[]);return new v0(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const dD=(()=>Promise.resolve(0))();function _c(s){"undefined"==typeof Zone?dD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vn(!1),this.onMicrotaskEmpty=new vn(!1),this.onStable=new vn(!1),this.onError=new vn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function hD(){let s=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function PT(s){const o=()=>{!function fD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Rm(s),s.isCheckStableRunning=!0,xm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Rm(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,w)=>{try{return b0(s),a.invokeTask(d,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),D0(s)}},onInvoke:(a,l,d,g,v,w,D)=>{try{return b0(s),a.invoke(d,g,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),D0(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Rm(s),xm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,w0,Am,Am);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const w0={};function xm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Rm(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function b0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function D0(s){s._nesting--,xm(s)}class Nm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vn,this.onMicrotaskEmpty=new vn,this.onStable=new vn,this.onError=new vn}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let pD=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),_c(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_c(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Xe(Ts))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})(),gD=(()=>{class s{constructor(){this._applications=new Map,eu.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return eu.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();class mD{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function th(s){eu=s}let oo,eu=new mD;const I0=new An("AllowMultipleToken");class yD{constructor(o,a){this.name=o,this.token=a}}function _D(s,o,a=[]){const l=`Platform: ${o}`,d=new An(l);return(g=[])=>{let v=up();if(!v||v.injector.get(I0,!1))if(s)s(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:T_,useValue:"platform"});!function ap(s){if(oo&&!oo.destroyed&&!oo.injector.get(I0,!1))throw new Oe(400,"");oo=s.get(lp);const o=s.get(Ja,null);o&&o.forEach(a=>a())}(ha.create({providers:w,name:l}))}return function LT(s){const o=up();if(!o)throw new Oe(401,"");return o}()}}function up(){return oo&&!oo.destroyed?oo:null}let lp=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function VT(s,o){let a;return a="noop"===s?new Nm:("zone.js"===s?void 0:s)||new Ts({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Ts,useValue:w}];return w.run(()=>{const A=ha.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(A),P=x.injector.get(Ar,null);if(!P)throw new Oe(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Z=>{P.handleError(Z)}});x.onDestroy(()=>{km(this._modules,x),U.unsubscribe()})}),function C0(s,o,a){try{const l=a();return K_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(Sm);return U.runInitializers(),U.donePromise.then(()=>(function Dv(s){lt(s,"Expected localeId to be defined"),"string"==typeof s&&(em=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Mm,Rd)||Rd),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=vD({},l);return function vc(s,o,a){const l=new gm(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Om);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Xe(ha))},s.\u0275prov=on({token:s,factory:s.\u0275fac}),s})();function vD(s,o){return Array.isArray(o)?o.reduce(vD,s):Object.assign(Object.assign({},s),o)}let Om=(()=>{class s{constructor(a,l,d,g,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),D=new O.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),_c(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,le.T)(w,D.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof Db?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function nh(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Gd),w=d.create(ha.NULL,[],l||d.selector,g),D=w.location.nativeElement,A=w.injector.get(pD,null),x=A&&w.injector.get(gD);return A&&x&&x.registerApplication(D,A),w.onDestroy(()=>{this.detachView(w.hostView),km(this.components,w),x&&x.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;km(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(lD,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Xe(Ts),Xe(ha),Xe(Ar),Xe(Kf),Xe(Sm))},s.\u0275prov=on({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function km(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let T0=!0,A0=!1;function ED(){return A0=!0,T0}function cp(){if(A0)throw new Error("Cannot enable prod mode after platform setup.");T0=!1}let tn=(()=>{class s{}return s.__NG_ELEMENT_ID__=bD,s})();function bD(s){return function DD(s,o,a){if(Ls(s)&&!a){const l=br(s.index,o);return new Is(l,l)}return 47&s.type?new Is(o[16],o):null}(wn(),De(),16==(16&s))}class O0{constructor(){}supports(o){return Jl(o)}create(o){return new TD(o)}}const HT=(s,o)=>o;class TD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||HT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<MD(l,d,g)?a:l,w=MD(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const A=w-d,x=D-d;if(A!=x){for(let U=0;U<A;U++){const Z=U<g.length?g[U]:g[U]=0,ye=Z+U;x<=ye&&ye<A&&(g[U]=Z+1)}g[v.previousIndex]=x-A}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Jl(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)g=o[w],v=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,w),l=!0),a=a._next}else d=0,function ex(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[bf()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new AD(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new SD),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class AD{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $T{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class SD{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new $T,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MD(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class oh{constructor(){}supports(o){return o instanceof Map||xg(o)}create(){return new xD}}class xD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||xg(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new GT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class GT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Or(){return new dp([new O0])}let dp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Or()),deps:[[s,new Mo,new yi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:Or}),s})();function ah(){return new uo([new oh])}let uo=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||ah()),deps:[[s,new Mo,new yi]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=on({token:s,providedIn:"root",factory:ah}),s})();const ND=_D(null,"core",[{provide:yc,useValue:"unknown"},{provide:lp,deps:[ha]},{provide:gD,deps:[]},{provide:m0,deps:[]}]);let KT=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Xe(Om))},s.\u0275mod=Q({type:s}),s.\u0275inj=en({}),s})()},3942:(ut,Ae,k)=>{k.d(Ae,{Z:()=>Oe});var p=k(2090),Y=k(4859),O=k(9681),le=k(1877);class X{constructor(fe,be){this._delegate=fe,this.firebase=be,(0,O._addComponent)(fe,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,be=O._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(rt=Ze.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:be})}_removeServiceInstance(fe,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(be)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ce(){const Le=function he(Le){const fe={},be={__esModule:!0,initializeApp:function Ce(je,ne={}){const W=O.initializeApp(je,ne);if((0,p.r3)(fe,W.name))return fe[W.name];const ie=new Le(W,be);return fe[W.name]=ie,ie},app:Ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(je){const ne=je.name,W=ne.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const ie=(me=Ze())=>{if("function"!=typeof me[W])throw re.create("invalid-app-argument",{appName:ne});return me[W]()};void 0!==je.serviceProps&&(0,p.ZB)(ie,je.serviceProps),be[W]=ie,Le.prototype[W]=function(...me){return this._getService.bind(this,ne).apply(this,je.multipleInstances?me:[])}}return"PUBLIC"===je.type?be[W]:null},removeApp:function rt(je){delete fe[je]},useAsService:function Ge(je,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function Ze(je){if(!(0,p.r3)(fe,je=je||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:je});return fe[je]}return be.default=be,Object.defineProperty(be,"apps",{get:function _e(){return Object.keys(fe).map(je=>fe[je])}}),Ze.App=Le,be}(X);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function fe(be){(0,p.ZB)(Le,be)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Le}(),$=new le.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function Se(Le){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(ut,Ae,k)=>{k.r(Ae),k.d(Ae,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>dn,_addOrOverwriteComponent:()=>xi,_apps:()=>_t,_clearComponents:()=>qt,_components:()=>cn,_getProvider:()=>ss,_registerComponent:()=>on,_removeServiceInstance:()=>en,deleteApp:()=>as,getApp:()=>Pr,getApps:()=>os,initializeApp:()=>Wi,onLog:()=>er,registerVersion:()=>zr,setLogLevel:()=>Wn});var p=k(5861),Y=k(4859),O=k(1877),le=k(2090);class X{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ge(Ye){const Te=Ye.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(et)){const ht=et.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(et=>et).join(" ")}}const re="@firebase/app",ce=new O.Yd("@firebase/app"),Rn="[DEFAULT]",lt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,cn=new Map;function dn(Ye,Te){try{Ye.container.addComponent(Te)}catch(et){ce.debug(`Component ${Te.name} failed to register with FirebaseApp ${Ye.name}`,et)}}function xi(Ye,Te){Ye.container.addOrOverwriteComponent(Te)}function on(Ye){const Te=Ye.name;if(cn.has(Te))return ce.debug(`There were multiple attempts to register component ${Te}.`),!1;cn.set(Te,Ye);for(const et of _t.values())dn(et,Ye);return!0}function ss(Ye,Te){const et=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Ye.container.getProvider(Te)}function en(Ye,Te,et=Rn){ss(Ye,Te).clearInstance(et)}function qt(){cn.clear()}const oi=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ns{constructor(Te,et,ht){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}const kr="9.6.11";function Wi(Ye,Te={}){"object"!=typeof Te&&(Te={name:Te});const et=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},Te),ht=et.name;if("string"!=typeof ht||!ht)throw oi.create("bad-app-name",{appName:String(ht)});const $t=_t.get(ht);if($t){if((0,le.vZ)(Ye,$t.options)&&(0,le.vZ)(et,$t.config))return $t;throw oi.create("duplicate-app",{appName:ht})}const Bt=new Y.H0(ht);for(const V of cn.values())Bt.addComponent(V);const j=new Ns(Ye,et,Bt);return _t.set(ht,j),j}function Pr(Ye=Rn){const Te=_t.get(Ye);if(!Te)throw oi.create("no-app",{appName:Ye});return Te}function os(){return Array.from(_t.values())}function as(Ye){return ct.apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(Ye){const Te=Ye.name;_t.has(Te)&&(_t.delete(Te),yield Promise.all(Ye.container.getProviders().map(et=>et.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function zr(Ye,Te,et){var ht;let $t=null!==(ht=lt[Ye])&&void 0!==ht?ht:Ye;et&&($t+=`-${et}`);const Bt=$t.match(/\s|\//),j=Te.match(/\s|\//);if(Bt||j){const V=[`Unable to register library "${$t}" with version "${Te}":`];return Bt&&V.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),Bt&&j&&V.push("and"),j&&V.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void ce.warn(V.join(" "))}on(new Y.wA(`${$t}-version`,()=>({library:$t,version:Te}),"VERSION"))}function er(Ye,Te){if(null!==Ye&&"function"!=typeof Ye)throw oi.create("invalid-log-argument");(0,O.Am)(Ye,Te)}function Wn(Ye){(0,O.Ub)(Ye)}const En="firebase-heartbeat-store";let tr=null;function Os(){return tr||(tr=(0,le.X3)("firebase-heartbeat-database",1,(Ye,Te)=>{0===Te&&Ye.createObjectStore(En)}).catch(Ye=>{throw oi.create("storage-open",{originalErrorMessage:Ye.message})})),tr}function zt(){return(zt=(0,p.Z)(function*(Ye){try{return(yield Os()).transaction(En).objectStore(En).get(lr(Ye))}catch(Te){throw oi.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function ot(Ye,Te){return bt.apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(Ye,Te){try{const ht=(yield Os()).transaction(En,"readwrite");return yield ht.objectStore(En).put(Te,lr(Ye)),ht.complete}catch(et){throw oi.create("storage-set",{originalErrorMessage:et.message})}})).apply(this,arguments)}function lr(Ye){return`${Ye.name}!${Ye.options.appId}`}class ho{constructor(Te){this.container=Te,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new dt(et),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Te=this;return(0,p.Z)(function*(){const ht=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=yr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==$t&&!Te._heartbeatsCache.heartbeats.some(Bt=>Bt.date===$t))return Te._heartbeatsCache.heartbeats.push({date:$t,agent:ht}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Bt=>{const j=new Date(Bt.date).valueOf();return Date.now()-j<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,p.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const et=yr(),{heartbeatsToSend:ht,unsentEntries:$t}=function cr(Ye,Te=1024){const et=[];let ht=Ye.slice();for(const $t of Ye){const Bt=et.find(j=>j.agent===$t.agent);if(Bt){if(Bt.dates.push($t.date),_r(et)>Te){Bt.dates.pop();break}}else if(et.push({agent:$t.agent,dates:[$t.date]}),_r(et)>Te){et.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:et,unsentEntries:ht}}(Te._heartbeatsCache.heartbeats),Bt=(0,le.L)(JSON.stringify({version:2,heartbeats:ht}));return Te._heartbeatsCache.lastSentHeartbeatDate=et,$t.length>0?(Te._heartbeatsCache.heartbeats=$t,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Bt})()}}function yr(){return(new Date).toISOString().substring(0,10)}class dt{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,p.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function Ia(Ye){return zt.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var et=this;return(0,p.Z)(function*(){var ht;if(yield et._canUseIndexedDBPromise){const Bt=yield et.read();return ot(et.app,{lastSentHeartbeatDate:null!==(ht=Te.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var et=this;return(0,p.Z)(function*(){var ht;if(yield et._canUseIndexedDBPromise){const Bt=yield et.read();return ot(et.app,{lastSentHeartbeatDate:null!==(ht=Te.lastSentHeartbeatDate)&&void 0!==ht?ht:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...Te.heartbeats]})}})()}}function _r(Ye){return(0,le.L)(JSON.stringify({version:2,heartbeats:Ye})).length}!function jt(Ye){on(new Y.wA("platform-logger",Te=>new X(Te),"PRIVATE")),on(new Y.wA("heartbeat",Te=>new ho(Te),"PRIVATE")),zr(re,"0.7.21",Ye),zr(re,"0.7.21","esm2017"),zr("fire-js","")}("")},4859:(ut,Ae,k)=>{k.d(Ae,{wA:()=>O,H0:()=>he});var p=k(5861),Y=k(2090);class O{constructor(H,$,J){this.name=H,this.instanceFactory=$,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const le="[DEFAULT]";class X{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const J=new Y.BH;if(this.instancesDeferred.set($,J),this.isInitialized($)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:$});qe&&J.resolve(qe)}catch(qe){}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const J=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),qe=null!==($=null==H?void 0:H.optional)&&void 0!==$&&$;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Se){if(qe)return null;throw Se}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function re(ce){return"EAGER"===ce.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:le})}catch($){}for(const[$,J]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier($);try{const Se=this.getOrInitializeService({instanceIdentifier:qe});J.resolve(Se)}catch(Se){}}}}clearInstance(H=le){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,p.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...$.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=le){return this.instances.has(H)}getOptions(H=le){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,J=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:J,options:$});for(const[Se,Oe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Se)&&Oe.resolve(qe);return qe}onInit(H,$){var J;const qe=this.normalizeInstanceIdentifier($),Se=null!==(J=this.onInitCallbacks.get(qe))&&void 0!==J?J:new Set;Se.add(H),this.onInitCallbacks.set(qe,Se);const Oe=this.instances.get(qe);return Oe&&H(Oe,qe),()=>{Se.delete(H)}}invokeOnInitCallbacks(H,$){const J=this.onInitCallbacks.get($);if(J)for(const qe of J)try{qe(H,$)}catch(Se){}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let J=this.instances.get(H);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=H,ce===le?void 0:ce),options:$}),this.instances.set(H,J),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(J,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,J)}catch(qe){}var ce;return J||null}normalizeInstanceIdentifier(H=le){return this.component?this.component.multipleInstances?H:le:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new X(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,Ae,k)=>{k.d(Ae,{in:()=>Y,Yd:()=>re,Ub:()=>he,Am:()=>ce});const p=[];var Y=(()=>{return(H=Y||(Y={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Y;var H})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},le=Y.INFO,X={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ge=(H,$,...J)=>{if($<H.logLevel)return;const qe=(new Date).toISOString(),Se=X[$];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Se](`[${qe}]  ${H.name}:`,...J)};class re{constructor($){this.name=$,this._logLevel=le,this._logHandler=ge,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function he(H){p.forEach($=>{$.setLogLevel(H)})}function ce(H,$){for(const J of p){let qe=null;$&&$.level&&(qe=O[$.level]),J.userLogHandler=null===H?null:(Se,Oe,...Le)=>{const fe=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(rt){return null}}).filter(be=>be).join(" ");Oe>=(null!=qe?qe:Se.logLevel)&&H({level:Y[Oe].toLowerCase(),message:fe,args:Le,type:Se.name})}}}},5861:(ut,Ae,k)=>{function p(O,le,X,ge,re,he,ce){try{var H=O[he](ce),$=H.value}catch(J){return void X(J)}H.done?le($):Promise.resolve($).then(ge,re)}function Y(O){return function(){var le=this,X=arguments;return new Promise(function(ge,re){var he=O.apply(le,X);function ce($){p(he,ge,re,ce,H,"next",$)}function H($){p(he,ge,re,ce,H,"throw",$)}ce(void 0)})}}k.d(Ae,{Z:()=>Y})}},ut=>{ut(ut.s=3488)}]);